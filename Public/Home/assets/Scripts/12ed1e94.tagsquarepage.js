(function(){define("lib/user",[],function(){return{isLogin:function(){return typeof window.ukey=="undefined"&&(ukey=!1),ukey?!0:!1},toLogin:function(e){document.location.href=e}}}),require(["lib/user"],function(e){"use strict";var t={all:function(){var e=$("#tagSearchBox"),t=$("#tagSearch #q");e.length&&t.focus(function(){e.addClass("focus")}).blur(function(){e.removeClass("focus")})},login:function(){$(".join-list").delegate(".focus-btn","mouseenter",function(){var e=$(this);e.removeClass("focus-btn").addClass("gnbtn-frame").html('<span class="gnicon-cancel"></span>取消')}),$(".join-list").delegate(".gnbtn-frame","mouseleave",function(){var e=$(this);e.removeClass("gnbtn-frame").addClass("focus-btn").html('<span class="gnicon-tick"></span>已关注')}),$(".join-list").delegate("a[data-operation]","click",function(){var e=$(this),t=e.data("operation"),n=e.data("id"),r={follow:'<a class="focus-btn follow-btn" href="javascript: void 0;" data-id="'+n+'" data-operation="unfollow"><span class="gnicon-tick"></span>已关注</a>',unfollow:'<a class="gnbtn-plat follow-btn" href="javascript:void 0;" data-id="'+n+'" data-operation="follow"><span>+</span>关注</a>'};$.ajax({url:"/apis/ask/tag_follower.json",data:{tag_name:n},type:t=="follow"?"post":"delete",success:function(n){n.ok&&e.replaceWith(r[t])},dataType:"json"})})},unlogin:function(){}},n=e.isLogin()?"login":"unlogin";t[n]&&t[n](ukey),t.all&&t.all()}),define("tagSquarePage",function(){})})();