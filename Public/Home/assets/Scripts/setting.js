/* @generated */G.def("ValidateUtils",function(){"use strict";var a=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,b=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@\?\^=%&:\/~\+#]*[\w\-@?\^=%&\/~\+#])?/;return{isEnglishAndNumber:function(a){return!a||/[^\x00-\xff]/ig.test(a)},isNickname:function(a){return!a||!a.match(/[^\u3400-\u4db5\u4e00-\u9fcbA-Za-z0-9._\-]/)},isNicknameLen:function(a){if(!a)return!0;var b=a.match(/[^\x00-\xff]/ig),c=a.length+(b==null?0:b.length);return c<=20},isEmail:function(b){return!b||a.test(b)},isUrl:function(a){return!a||b.test(a)},hasAngleBrackets:function(a){return!a||a.indexOf(">")===-1&&a.indexOf("<")===-1},isVcode:function(a){return!a||/^[0-9a-zA-Z]{4}$/.test(a)},isCJKWithSpace:function(a){return!a||!a.match(/[^\u3400-\u4db5\u4e00-\u9fcb\s\u3000]/)}}}),G.def("validate",["ValidateUtils"],function(a){function b(a){return a._isLive?$(a._selector):(a._$inputs||(a._$inputs=$(a._selector)),a._$inputs)}function c(a,b,c,d,e){var f=!0;for(var g in c){if(g.slice(0,1)==="_")continue;var h,i=c[g],j=c._desc,k=d[g];if(!k)continue;h=k.call(b,i,c,a);switch(h){case!0:break;case!1:e(!1,b,g,c),c._isValidated=!1;return;default:c._asyncValidateError=0,f=!1}}c._isValidated=!0,e(f||null,b,g,c)}function d(a,c){for(var d in c){var e=c[d],f=b(e);if(f.filter(a).length!==0)return e._isLive&&(e._$inputs=f),e}}function e(a,e,f,g,h){function i(a){var b=a.target,i=d(b,f);if(!i)return;if(e.beforeValidate&&!e.beforeValidate.call(null,b))return;c(b,i._$inputs,i,g,h),e.afterValidate&&e.afterValidate.call(null,b)}a.focusout(i).delegate("input","focus",function(a){var b=this,c=d(b,f);if(!c)return;c._isValidated=!1}).delegate("input","keydown",function(a){a.keyCode===13&&i(a)}).delegate("input:checkbox","change",function(a){i(a)}).submit(function(a){var d=this;if(d.sign===!0)return a.preventDefault(),!1;d.sign=!0;if(e.beforeFormValidate&&!e.beforeFormValidate.call(null,d))return a.preventDefault(),d.sign=!1,!1;var i,j,k=!0;for(i in f){j=f[i];if(j._isValidated&&j._asyncValidateError===0)continue;if(j._isValidated===!1||j._asyncValidateError!==0){k=!1;continue}c(null,b(j),j,g,h),j._isValidated===!1&&(k=!1)}if(k===!1)return a.preventDefault(),d.sign=!1,!1;if(e.afterFormValidate&&!e.afterFormValidate.call(null,d))return a.preventDefault(),d.sign=!1,!1;e.showAsyncMsg=!1,d.sign=!1})}function f(a,b){return function(){return b&&!b.apply(null,arguments)?!1:a.apply(null,arguments)}}function g(a,b){return function(){return a.apply(this,arguments)?b?b.apply(this,arguments):!0:!1}}return"use strict",function(d,h,i){var j={},k={showAsyncMsg:!0,msgClass:{error:"tip",success:"success"},msgPlace:function(a){return a.next()}},l={},m={pattern:function(a,b,c){return(new RegExp(a)).test(this.val())},required:function(a,b,c){return!a||!!this.val()},email:function(b,c,d){return a.isEmail(this.val())},url:function(b,c,d){return a.isUrl(this.val())},eq:function(b,c,d){var e=this;return l[b]||(l[b]=!0,j.afterValidate(function(a){$(a).is("#"+b)&&j.validate(d,e,c)})),e.val()===$("#"+b).val()},min:function(a){var b=this.val();return!b||parseInt(b,10)<=a},max:function(a){var b=this.val();return!b||parseInt(b,10)>=a},minlength:function(a,b,c){return this.val().length>=a},maxlength:function(a,b,c){return this.val().length<=a},nickname:function(){return a.isNickname(this.val())},nicknameLen:function(){return a.isNicknameLen(this.val())},async:function(a,b,c){var d=this.val(),e={},f=this;if(!d)return!0;e[a.param]=d,$.ajax({type:a.type||"POST",url:a.url,data:e,dataType:a.dataType||"json",success:function(c){j.asyncTrigger(a.success?a.success(c):c,f,"async",b,G.isFun(a.msg)?a.msg(c):a.msg)},error:function(){a.error&&a.error.call(f)}})}},n={pattern:"{desc}格式不正确",required:"{desc}是必填的",email:"{desc}格式不正确",url:"{desc}格式不正确",eq:"两次输入的{desc}不一致",min:"{desc}必需大于{arg}",max:"{desc}必需小于{arg}",minlength:"{desc}太短，至少{arg}个字",maxlength:"太长了，不能超过{arg}个字",nickname:"仅限中英文、数字、“.”、“-”及“_”",nicknameLen:"太长，最多10个汉字或者20个英文、数字"},o=$(d),p={};return j.validate=function(a,b,d){return c(a,b,d,m,j.trigger),this},j.getMsgPlace=function(a,b){var c=b._msgPlace;return c||(c=b._msgPlace=k.msgPlace(a)),c},j.trigger=function(a,b,c,d,e,f){var g=j.getMsgPlace(b,d),h=k.msgClass,i=d[c],l=d._desc;return e=n[c]||e,a==null?k.clearCallBack?k.clearCallBack.call(null,g,e,i,l):g.removeClass(h.error).removeClass(h.success).text(""):a===!0?(k.successCallBack?k.successCallBack.call(null,g,e,i,l):g.removeClass(h.error).addClass(h.success).html("&nbsp;"),f&&(d._asyncValidateError=0)):a===!1&&(k.errorCallBack?k.errorCallBack.call(null,g,e,i,l):g.removeClass(h.success).addClass(h.error).text(e.replace("{desc}",l).replace("{arg}",i)),f&&(d._asyncValidateError=1)),this},j.asyncTrigger=function(a,b,c,d,e){return d._isValidated&&k.showAsyncMsg&&j.trigger(!!a,b,c,d,e,!0),this},j.method=function(a,b,c){return m[a]=b,n[a]=c,this},j.rules=function(a){if(!a)return;var b,c;for(c in a)b=a[c],b._isValidated=null,b._asyncValidateError=0,b._selector||(b._selector="#"+c);return $.extend(p,a),this},j.afterFormValidate=function(a){var b=k.afterFormValidate;return k.afterFormValidate=f(a,b),this},j.beforeFormValidate=function(a){var b=k.beforeFormValidate;return k.beforeFormValidate=g(a,b),this},j.beforeValidate=function(a){var b=k.beforeValidate;return k.beforeValidate=g(a,b),this},j.afterValidate=function(a){var b=k.afterValidate;return k.afterValidate=function(){b&&b.apply(this,arguments),a.apply(this,arguments)},this},o.attr("novalidate",!0),$.extend(k,i),j.rules(h),e(o,k,p,m,j.trigger),j}}),G.def("./setting/setupInfoPage",["validate","ValidateUtils"],function(a,b){return"use strict",{login:function(){function f(a,b,c,d){var e,f=$(a),g=$(b);if(!f.length||!g.length)return;e=setTimeout(function(){g.text(f.val().length)},0),f.bind("focus",function(){var a=$(this),b=a.val();e=setInterval(function(){b!==a.val()&&(b=a.val(),g.text(b.length))},200)}).bind("blur",function(){clearInterval(e),d&&d.call(f)})}var c={nickname:"昵称",title:"专业头衔",blogTitle:"日志名称",blogUrl:"blog地址",introduction:"个人简介",serverError:"服务器正在休息，请刷新之后过一会再试！",globalError:'<div class="tip_box">{v}</div>',errors:{nickIdentical:"这个昵称已经被使用",nickname:'仅限中英文、数字、"."、"-"及"_"',blogUrl:"not URL"}},d=$('<img class="form-loading" width="16" height="16" src="/skin/imgs/loading.gif"/>'),e=function(a){$("#tipBox").html($(c.globalError.replace("{v}",a)))};a("#profile",null,{msgPlace:function(a){return a.siblings(".tip")}}).method("isUrl",function(){return b.isUrl(this.val())},c.errors.blogUrl).method("isNickname",function(){return b.isNickname(this.val())},c.errors.nickname).rules({nickname:{_desc:c.nickname,required:1,nicknameLen:1,isNickname:1,async:{url:"/apis/auth/account.json?retrieve_type=is_available",param:"nickname",msg:c.errors.nickIdentical,type:"GET",success:function(a){return a.result.is_available===!0},error:function(){e(c.serverError)},dataType:"json"}},title:{_desc:c.title,maxlength:35},blogTitle:{_desc:c.blogTitle,maxlength:10},blogUrl:{_desc:c.blogUrl,isUrl:1},introduction:{_desc:c.introduction,maxlength:250}}),f("#selfIntro textarea","#wordCount span",250);var g={"北京":["东城区","西城区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","密云县","延庆县"],"上海":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","南汇区","奉贤区","崇明区"],"广东":["广州","韶关","深圳","珠海","汕头","佛山","江门","湛江","茂名","肇庆","惠州","梅州","汕尾","河源","阳江","清远","东莞","中山","潮州","揭阳","云浮"],"安徽":["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"],"重庆":["万州区","涪陵区","渝中区","大渡口区","江北区","沙坪坝区","九龙坡区","南岸区","北碚区","万盛区","双桥区","渝北区","巴南区","黔江区","长寿区","綦江县","潼南县","铜梁县","大足县","荣昌县","璧山县","梁平县","城口县","丰都县","垫江县","武隆县","忠县","开县","云阳县","奉节县","巫山县","巫溪县","石柱土家族自治县","秀山土家族苗族自治县","酉阳土家族苗族自治县","彭水苗族土家族自治县","江津市","合川市","永川区","南川市"],"福建":["福州","厦门","莆田","三明","泉州","漳州","南平","龙岩","宁德"],"甘肃":["兰州","嘉峪关","金昌","白银","天水","武威","张掖","平凉","酒泉","庆阳","定西","陇南","临夏","甘南"],"广西":["南宁","柳州","桂林","梧州","北海","防城港","钦州","贵港","玉林","百色","贺州","河池"],"贵州":["贵阳","六盘水","遵义","安顺","铜仁","黔西南","毕节","黔东南","黔南"],"海南":["海口","三亚","其他"],"河北":["石家庄","唐山","秦皇岛","邯郸","邢台","保定","张家口","承德","沧州","廊坊","衡水"],"黑龙江":["哈尔滨","齐齐哈尔","鸡西","鹤岗","双鸭山","大庆","伊春","佳木斯","七台河","牡丹江","黑河","绥化","大兴安岭"],"河南":["郑州","开封","洛阳","平顶山","安阳","鹤壁","新乡","焦作","濮阳","许昌","漯河","三门峡","南阳","商丘","信阳","周口","驻马店"],"湖北":["武汉","黄石","十堰","宜昌","襄樊","鄂州","荆门","孝感","荆州","黄冈","咸宁","随州","恩施土家族苗族自治州"],"湖南":["长沙","株洲","湘潭","衡阳","邵阳","岳阳","常德","张家界","益阳","郴州","永州","怀化","娄底","湘西土家族苗族自治州"],"内蒙古":["呼和浩特","包头","乌海","赤峰","通辽","鄂尔多斯","呼伦贝尔","兴安盟","锡林郭勒盟","乌兰察布盟","巴彦淖尔盟","阿拉善盟"],"江苏":["南京","无锡","徐州","常州","苏州","南通","连云港","淮安","盐城","扬州","镇江","泰州","宿迁"],"江西":["南昌","景德镇","萍乡","九江","新余","鹰潭","赣州","吉安","宜春","抚州","上饶"],"吉林":["长春","吉林","四平","辽源","通化","白山","松原","白城","延边朝鲜族自治州"],"辽宁":["沈阳","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","盘锦","铁岭","朝阳","葫芦岛"],"宁夏":["银川","石嘴山","吴忠","固原"],"青海":["西宁","海东","海北","黄南","海南","果洛","玉树","海西"],"山西":["太原","大同","阳泉","长治","晋城","朔州","晋中","运城","忻州","临汾","吕梁"],"山东":["济南","青岛","淄博","枣庄","东营","烟台","潍坊","济宁","泰安","威海","日照","莱芜","临沂","德州","聊城","滨州","菏泽"],"四川":["成都","自贡","攀枝花","泸州","德阳","绵阳","广元","遂宁","内江","乐山","南充","眉山","宜宾","广安","达州","雅安","巴中","资阳","阿坝","甘孜","凉山"],"天津":["和平区","河东区","河西区","南开区","河北区","红桥区","塘沽区","汉沽区","大港区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","宁河县","静海县","蓟县","滨海新区","保税区"],"西藏":["拉萨","昌都","山南","日喀则","那曲","阿里","林芝"],"新疆":["乌鲁木齐","克拉玛依","吐鲁番","哈密","昌吉","博尔塔拉","巴音郭楞","阿克苏","克孜勒苏","喀什","和田","伊犁","塔城","阿勒泰","石河子"],"云南":["昆明","曲靖","玉溪","保山","昭通","楚雄","红河","文山","思茅","西双版纳","大理","德宏","丽江","怒江","迪庆","临沧"],"浙江":["杭州","宁波","温州","嘉兴","湖州","绍兴","金华","衢州","舟山","台州","丽水"],"陕西":["西安","铜川","宝鸡","咸阳","渭南","延安","汉中","榆林","安康","商洛"],"台湾":["台北","高雄","其他"],"香港":["香港"],"澳门":["澳门"],"海外":["美国","英国","法国","俄罗斯","加拿大","巴西","澳大利亚","印尼","泰国","马来西亚","新加坡","菲律宾","越南","印度","日本","新西兰","韩国","瑞典","其他"]};$("#area").doOnce(function(){var a=this,b=$("#city");a.change(function(){var c=a.find("option:selected").val(),d=g[c];b.empty().show(),c in g?$.each(d,function(c,d){var e=$("<option/>").text(d).attr("value",d),f=a.data("city");d===f&&e.attr("selected","selected"),e.appendTo(b)}):b.html('<option value="保密">保密</option>').hide()}),a.keyup(function(b){(b.keyCode===38||b.keyCode===40)&&a.trigger("change")}),a.trigger("change")})}}}),G.def("ajaxupload",function(){"use strict";var a={},b={};return function(c,d,e){function j(){var a=Math.random().toString(36).substring(2),i="hidden_iframe_"+a,j="hidden_form_"+a,k=d.parent(),l=d.next(),m,n=$('<iframe id="'+i+'" name="'+i+'" />').css("display","none").appendTo("body"),o=d.wrap("<form/>").parent().css({position:"absolute",top:"-1200px",left:"-1200px"}).attr({id:j,name:j,target:i,enctype:"multipart/form-data",encoding:"multipart/form-data",action:c,method:"POST"}).appendTo("body");b[f]=a,$.each(e.data,function(a,b){$('<input type="hidden"/>').attr("name",a).val(b).appendTo(o)}),n.bind("load",function(){var c;try{c=n.contents().text()}catch(d){}b[f]==a&&!g&&e.success&&c&&(h=!0,e.success.call(null,c))}),o.submit(),o.find("input:not(:file)").remove(),d.unwrap(),l.length?l.before(d):d.appendTo(k)}function k(a){e.data=$.extend(e.data,a),j()}var f=c+d[0].name,g=!1,h=!1,i;e=$.extend({timeout:0,data:{}},e),e.timeout&&e.timeoutCallback&&(i=setTimeout(function(){h||(g=!0,e.timeoutCallback.call(null))},e.timeout*1e3),c+d[0].name in a&&clearTimeout(a[f]),a[f]=i),e.asyncPrepare?e.asyncPrepare.call(null,k):j()}}),G.def("imgclip",function(){return function(){function a(a,b,c){function B(a){a.preventDefault(),s=!0,t=a.target.className.indexOf("xResize")===0,u=a.target.className.indexOf("yResize")===0,v=a.target.id!=="resizerMask"&&!t&&!u,q=a.pageX,r=a.pageY,v?e.css("cursor","move"):t?(e.css("cursor","e-resize"),d.css("cursor","e-resize")):u?(e.css("cursor","n-resize"),d.css("cursor","n-resize")):(e.css("cursor","se-resize"),d.css("cursor","se-resize"))}function C(a){s=v=t=u=!1,e.css("cursor","default"),d.css("cursor","default")}function D(a){a.preventDefault();if(s){var b=$(this),c=m,d=n,e=o,f=p,g=a.pageY-r,h=a.pageX-q,k=Math.abs(g)<Math.abs(h)?g:h;v?(c+=g,d+=h):t?(e+=h,f+=h):u?(e+=g,f+=g):(e+=h,f+=h),d>=0&&i>=d+e&&c>=0&&j>=c+f&&e>z&&f>A&&(n=d,o=e,m=c,p=f),q=a.pageX,r=a.pageY,E()}}function E(){e.css({width:o,height:p,top:m,left:n}),o=e.width(),p=e.height(),k.css({top:-m,left:-n});for(var a=0,b=l.length;a<b;a++)F(l[a])}function F(a){var b=a.data("guoke_wh");a.css({width:b[0]*i/o,height:b[1]*j/p,"margin-top":-(b[0]*m/o),"margin-left":-(b[1]*n/p)})}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;l=[],w=typeof a=="string"?$(a):a,i=w.width(),j=w.height(),o=c&&c.width||Math.min(i,j),p=c&&c.height||o,m=c&&c.top||0,n=c&&c.left||0,A=c&&c.minHeight||48,z=c&&c.minWidth||48,x=w.wrap("<div class='mask_wrapper'></div>").css({opacity:.6}).parent().bind("drag",function(a){a.preventDefault()});var G=[x.html(),"<div id='imgMask' class='img_mask'><div id='coverMask' class='cover_mask' style='top:",m,"px;left:",n,"px;width:",o,"px;height:",p,"px;overflow:hidden;'><img style='position:absolute;top:",-m,"px;left:",-n,"px;width:",i,"px;height:",j,"px;' src='",w.attr("src"),"'/><div class=' top_border'></div><div class=' left_border'></div><div class='xResize right_border'></div><div class='yResize bottom_border'></div><div id='resizerMask' class='resizer_mask'></div></div></div>"].join("");x.html(G),d=$("#imgMask").css({width:i,height:j}).mousedown(B),$("body").mousemove(D).mouseup(C).mouseleave(C),e=d.children("#coverMask"),f=d.children("#resizerMask"),k=d.find("img"),h=d.find(".yResize"),g=d.find(".xResize");for(var H in b)y=w.clone().css({opacity:1}).data("guoke_wh",b[H]),l.push(y),$(H).append(y).css({width:b[H][0],height:b[H][1]}),F(y);return{update:E}}return function(b,c,d){b.length===1&&(b.imageClipper=a(b,c,d))}}()}),G.def("./setting/setupHeadPage",["ajaxupload","imgclip"],function(a,b){return"use strict",{login:function(){$("#imgSubmit").doOnce(function(){var b=$("#trueFile"),c=$("#uploadMsg"),d=$("#imgSubmit"),e=$("#cutPanel"),f=$("#corpImg"),g=$("#canelCorp"),h=$("#previewBig"),i=$("#previewMiddle"),j=$("#previewTiny"),k=$("#acessToken").val(),l=["jpeg","jpg","png","gif"],m={uploading:"正在上传图片",completed:"上传成功，请截取你喜欢的部分，并点击“保存”。",timeout:"上传文件超时，可能是服务器错误或网络问题，请稍后再试。",toolarge:"哎呀，图片太大了，不要超过3.5M，请重新选择上传。",unknown:"上传图片失败，请联系客服",identify:"未能识别图片，请重新选择上传",unsupported:"图片的格式暂时不支持，请重新选择上传。",size:"上传的图片尺寸太小啦，请重新选择上传。"};d.click(function(d){function q(){j.siblings("img").remove(),i.siblings("img").remove(),h.siblings("img").remove(),j.show(),h.show(),i.show(),e.hide()}d.preventDefault();if(b.val()==="")return alert("请选择一张图片"),!1;var n=b.val(),o=n.length,p=n.split(".");p.length>1?p=p[p.length-1].toLowerCase():p="";if($.inArray(p,l)===-1)return alert("图片格式不支持"),!1;c.attr("class","upload-msg uploading").text(m.uploading).css({color:"#999"}),a("/apis/image.json",b,{asyncPrepare:function(a){k=$("#accessToken").val(),a({access_token:k})},success:function(a){try{a=$.parseJSON(a)}catch(b){/too large/i.test(a)?a={errmsg:m.toolarge}:a={errmsg:m.unknown}}if(a.errmsg){c.text(a.errmsg).css({color:"red"});return}if(!a.ok){a.error_code===205002?c.text(m.identify).css({color:"red"}):a.error_code===205004&&c.text(m.unsupported).css({color:"red"});return}if(a.ok){if(a.result.height<120||a.result.width<120){c.text(m.size).css({color:"red"});return}var d=a.result.url,k=$("#cropPanel");$(".crop").doOnce(function(a){var b=$(this);e.show(),j.hide(),h.hide(),i.hide(),b.html("").html('<img src="" class="preview_big_pic" style="maxwidth:315px;">'),j.siblings("img").size()>0&&(j.siblings("img").remove(),i.siblings("img").remove(),h.siblings("img").remove()),$(".preview_big_pic").attr("src",d),b.find(".preview_big_pic").bind("load",function(){a($(this),{"#preview160":[160,160],"#preview48":[48,48],"#preview24":[24,24]},{width:120,height:120,top:0,left:0,minWidth:48,minHeight:48})})},"imgclip"),g.click(function(){q()}),f.click(function(){var b=a.result.width<=315?1:315/a.result.width,d=$("#coverMask"),f=parseInt(d[0].style.left,10)/b,g=parseInt(d[0].style.top,10)/b,k=parseInt(d[0].style.width,10)/b,l=parseInt(d[0].style.height,10)/b,m=160,n=160,o=a.result.hashkey;g+l>a.result.height&&(l=a.result.height-g,k=l),$.ajax({url:"/apis/image.json",type:"put",data:{sx:Math.round(f),sy:Math.round(g),swidth:Math.floor(k),sheight:Math.floor(l),width:m,height:n,hashkey:o,format:"JPEG"},dataType:"json",success:function(a){c.html("头像保存成功！"),i.attr("src",a.result.url),j.attr("src",a.result.url),h.attr("src",a.result.url),$("#avatar").val(a.result.hashkey),e.submit()},error:function(){}})}),c.html(m.completed).css({color:"#4ba733"})}},timeout:30,timeoutCallback:function(){c.length?c.attr("class","upload-msg error").text(m.timeout):alert(m.timeout)}})})})}}}),G.def("./setting/setupSafePage",["validate","ValidateUtils"],function(a,b){return"use strict",{login:function(){var c={passwd:"密码",globalError:'<div class="tip_box">{v}</div>',errors:{noChinese:"{desc}只能是英文字母或数字"}},d=$('<img class="form-loading" width="16" height="16" src="/skin/imgs/loading.gif" />'),e=function(a){$("#tipBox").html($(c.globalError.replace("{v}",a)))},f=$("#passwordTrueOld"),g=$("#passwordTrueNew"),h=$("#passwordOld"),i=$("#passwordNew"),j=$("#passwordConfirm");a("#changePassword",null,{msgPlace:function(a){return a.siblings(".tip")}}).method("noChinese",function(a,c,d){return!b.isEnglishAndNumber(this.val())},c.errors.noChinese).rules({password_old:{_desc:c.passwd,required:1,minlength:4,noChinese:1},password:{_desc:c.passwd,required:1,minlength:4,noChinese:1},password_confirm:{_desc:c.passwd,required:1,eq:"password"}})},unlogin:function(){},all:function(){}}}),G.def("./setting/setupAliasPage",function(){return"use strict",{login:function(){},unlogin:function(){},all:function(){}}}),G.def("./setting/setupEmailPage",["validate","ValidateUtils"],function(a,b){return"use strict",{login:function(){function k(a){a.preventDefault(),g.attr("src",i+"?v="+j++)}var c={email:"邮箱",captcha:"验证码",emailError:"邮箱格式错误",serverError:"服务器正在休息，请刷新之后过一会再试！",globalError:'<div class="tip_box">{v}</div>',errors:{captcha:"{desc}是4个字母或数字",email:"这个邮箱已经被人使用了"}},d=$('<img class="form-loading" width="16" height="16" src="imgs/loading.gif" />'),e=function(a){$("#tipbox").html($(c.globalError.replace("{v}",a)))},f=$("#email"),g=$("#captchaImage"),h=$("#changeCaptchaImage"),i=g.attr("src"),j=1;h.click(k),g.click(k),a("#emailVerify",null,{msgPlace:function(a){return a.siblings(".tip")}}).method("isEmail",function(){return b.isEmail(this.val())},c.emailError).rules({email:{_desc:c.email,required:1,isEmail:1,async:{url:"/apis/auth/email.json?retrieve_type=is_available",param:"email",type:"GET",msg:c.errors.email,success:function(a){return a.result.is_available===!0},error:function(){e(c.serverError)},dataType:"json"}}})},unlogin:function(){},all:function(){}}}),G.def("./setting/messageIndexPage",function(){return"use strict",{login:function(){function a(a,b){$.ajax({url:"/apis/community/user/message.json",data:{ukey_receiver:a},type:"DELETE",dataType:"json",success:function(a){a&&a.ok&&b&&b()}})}$("#msgList").doOnce(function(){this.delegate("li","hover",function(a){a.type==="mouseenter"?$(this).addClass("hover"):$(this).removeClass("hover")}).delegate("a[data-operation]","click",function(b){b.preventDefault();var c=$(this),d=c.data("ukey"),e=c.parents(".pt-txt").find("a").eq(0).text();if(!confirm("你确定要删除与"+e+"的所有对话吗？删除后将不能恢复"))return;a(d,function(){c.parents("li").fadeOut()})})}),$("#msgNow").click(function(){$(this).toggleClass("click").find("span").toggleClass("gicon-msg").toggleClass("gicon-msg_click"),$("#msgFilter").slideToggle("fast")}),$("#msgList .pt-txt p[class!=pt-txt-d] a").attr("target","_blank")}}}),G.def("UBB",function(){function p(a){this.setting=p.mix({defaultColor:"#333333",linkDefaultColor:"#006699",flashImage:"/skin/imgs/flash.png"},a),this.setting.tags=p.mix(g,this.setting.tags),this.setting.ubbTagsOrder={},this.setting.wrapUbbTags={};var b,c,d,e,f,h;a=this.setting;for(b in a.tags){c=a.tags[b];if(c==null){delete a.tags[b];continue}switch(c.canContains){case"*":a.ubbTagsOrder[b]=!0;break;case"":a.ubbTagsOrder[b]=!1;break;case undefined:a.ubbTagsOrder[b]=!1;break;default:f=c.canContains.split(","),h={};for(d=0,e=f.length;d<e;d++)h[f[d].toLowerCase()]=!0;a.ubbTagsOrder[b]=h}a.wrapUbbTags[b]=c.canWrap}}"use strict";var a={clone:function(b,c){c||(c=b,b=this);if(!b.isNode)return null;if(c){var d,e,f=b.clone();for(d=0,e=b.length;d<e;d++)b[d].isNode&&f.append(b[d].clone(!0));return f}return a.createNode(b.name,b.attr)},append:function(a,b){b||(b=a,a=this);if(!b)return a;if(b.parent)throw"Node "+b.name+" has a parent node!";return a.push(b),b.parent=a,a},getDeepestChild:function(a){var b;while(b=a[a.length-1])a=b;return a},createNode:function(b,c){var d=[];return d.isNode=!0,d.append=a.append,d.clone=a.clone,b&&(d.name=b),c&&(d.attr=c),d},createTextNode:function(b){var c=a.createNode("#text");return c.value=b,c.origValue=b,c}},b=/([A-Z])/g,c=/-([a-z])/g,d=/^-?\d/,e=/^-?\d+(?:px)?$/i,f=/\[(\/)?([a-zA-Z0-9]+)/,g={},h={block:1,table:1,"table-caption":1,"table-footer-group":1,"table-header-group":1,"table-row":1,"table-row-group":1,"list-item":1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},i={img:1,object:1,button:1,textarea:1,input:1,select:1},j={pre:1,"pre-wrap":1,"pre-line":1},k={pre:1,"pre-wrap":1},l={isInlineBlock:function(a,b){var c=l.getComputedStyle(a,"display");return!!(c==="inline-block"||c==="inline"&&i[b])},hasBlockBox:function(a){return!!h[l.getComputedStyle(a,"display")]},isKeepNewLine:function(a,b){return b==="pre"||b==="textarea"?2:j[l.getComputedStyle(a,"white-space")]?1:0},isKeepWhiteSpace:function(a){return!!k[l.getComputedStyle(a,"white-space")]},ubbEscape:function(a){return a},changeState:function(a,b,c){var d=a.node,e=a.key,f,g={0:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},1:{1:0,2:0,3:1,4:0,7:0,8:0},2:{1:1,2:1,3:1,4:0,7:1,8:1},3:{1:1,2:1,3:1,4:0,7:1,8:1}},h={1:1,2:2,3:3,5:2,6:1,7:2,8:2};f=g[e][b],f&&d&&(d.suffix=(d.suffix||"")+(f==1?"\n":"\n\n")),b in h&&(a.key=h[b]),a.node=c},parseNode:function(a,b,c,d,e,f){var g,h,i,j,k,m,n,o=f.boxStates,p=f.textStates,q=o[o.length-1],r=p[p.length-1];switch(c){case 8:return;case 3:i=a.nodeValue.replace(/\r\n/g,"\n"),j=r.keepNewLine,k=r.keepWhiteSpace,j||(i=i.replace(/^\n|\n$/g,"").replace(/\n/g," ")),k||(i=i.replace(/^[\u0020\u200B\u200A\u3000\u2000]*|[\u0020\u200B\u200A\u3000\u2000]*$/g,"").replace(/[\u0020\u200B\u200A\u3000\u2000\u00A0]{1,}/g," ")),i=l.ubbEscape(i);if(i==="")return;m=j===2&&i.slice(0,1)==="\n"&&q.key===0,n=j&&i.length>1&&i.slice(-1)==="\n",k?i==="\n"?(e.text="",m?l.changeState(q,6,e):l.changeState(q,8,e)):m&&n?(e.text=i.slice(1,-1),l.changeState(q,5,e)):m?(e.text=i.slice(1),l.changeState(q,6,e)):n?(e.text=i.slice(0,-1),l.changeState(q,7,e)):(e.text=i,l.changeState(q,1,e)):(e.text=i,l.changeState(q,1,e));break;case 1:b==="br"?l.changeState(q,2,e):e.hasBlockBox?a.offsetHeight>0?l.changeState(q,3,e):l.changeState(q,2,e):l.changeState(q,l.isInlineBlock(a,b)?1:4,e);break;default:}for(g in d.tags)h=d.tags[g],h.parseHTML&&h.parseHTML(b,a,e,d);return e},treeToUbb:function(a){var b,c,d,e=[a.prefix||""];a.text&&e.push(a.text);for(b=0,c=a.length;b<c;b++)d=a[b],e.push(l.treeToUbb(d));return e.push(a.suffix||""),e.join("")},canContains:function(a,b,c){var d=c[a.name];return typeof d=="boolean"?d:d[b.name]},pushOpenUbbTag:function(b,c,d){var e;while(!b.isRoot&&!l.canContains(b,c,d))e?e=b.clone().append(e):e=b.clone(),b=b.parent;return b.append(c),e&&l.canContains(c,e,d)?(c.append(e),a.getDeepestChild(e)):c},pushCloseUbbTag:function(b,c){var d;while(!b.isRoot&&b.name!==c)d?d=b.clone().append(d):d=b.clone(),b=b.parent;return b.isRoot?b:(b=b.parent,b.append(d),d?a.getDeepestChild(d):b)},pushLineUbbTag:function(b,c){var d;while(!b.isRoot&&!c[b.name])d?d=b.clone().append(d):d=b.clone(),b=b.parent;return b.append(a.createTextNode("\n")),b.append(d),d?a.getDeepestChild(d):b},htmlEncode:function(a){return a&&(a=a.replace(/&/igm,"&amp;"),a=a.replace(/</igm,"&lt;"),a=a.replace(/>/igm,"&gt;"),a=a.replace(/\"/igm,"&quot;")),a},scanUbbText:function(b,c,d){var e=[],g=[],h=/\[\/?(bold|italic|url|blockquote|ul|ol|image|float|ref|math|code|video|indent|h1|h2|h3|h4|h5|h6)/,i=/\[\/?(blockquote|indent|color)/,j=/\[color\S*?\]/,k=/\[\/color\]/,m=/\[\/(bold|italic|url|image|float)\]$/,n=/\[float\s*?=\s*?(right|left|none)\]/,o=/\[(ul|ol)\S*?\]/,p=/\[\/(ul|ol)\]/,q,r,s=!1;if(d&&b!==""){b=l.htmlEncode(b),e=b.split("\n"),q=e.length;for(var t=0;t<q;t++)r=e[t],h.test(r)?(i.test(r)?(r=r.replace(j,"<p>").replace(k,"</p>"),/\[indent\]/.test(r)?r=r.replace("[indent]","[indent]<p>")+"</p>":/\[\/indent\]/.test(r)&&(r="<p>"+r.replace("[/indent]","</p>[/indent]")),n.test(r)&&(r=r.replace("[/image]","__float__"+n.exec(r)[1]+"[/image]"),r=r.replace(/\[\/?float=?\w*?\]/g,""))):m.test(r)?n.test(r)?(r=r.replace("[/image]","__float__"+n.exec(r)[1]+"[/image]"),r=r.replace(/\[\/?float=?\w*?\]/g,""),r="<p>"+r+"</p>"):r="<p>"+r+"</p>":o.test(r)?(r+="\n",s=!0):p.test(r)?(r+="\n",s=!1):r+="\n",g.push(r)):s?g.push("<p>"+r+"</p>\n"):g.push("<p>"+r+"</p>");b=g.join("")}b=b.replace(/\r\n/g,"\n");var u,v,w,x,y,z,A,B=c.ubbTagsOrder,C=c.wrapUbbTags,D=0,E=1,F=D,G=0,H=0,t=b.length,I="",J=a.createNode(),K=J;J.isRoot=!0;for(;H<t;H++){u=b.charAt(H);switch(u){case"[":F===E?(I+="[",F=D):(I&&K.append(a.createTextNode(I)),I="[");break;case"]":F===E?(I+="]",F=D):(v=f.exec(I),v&&v[2]&&(w=v[2].toLowerCase())in B?(A=!!v[1],A||(z=I.slice(v[2].length+(v[1]?2:1)),x=a.createNode(w,z)),A?K=l.pushCloseUbbTag(K,w):K=l.pushOpenUbbTag(K,x,B)):K.append(a.createTextNode(I+"]")),I="");break;case"\n":F===E&&(F=D),I&&(K.append(a.createTextNode(I)),I=""),K=l.pushLineUbbTag(K,C);break;default:F===E&&(F=D),I+=u}}return I&&K.append(a.createTextNode(I)),J},parseUbbNode:function(a,b,c,d){var e=c.tags,f;if(a.name==="#text")return a.value==="\n"?d.nobr?(d.nobr=!1,""):"<br/>":(d.nobr=!1,a.value.replace(/\s/g,"&nbsp;"));if((f=e[a.name])&&f.parseUBB)return f.isBlock&&(d.nobr=!0),f.parseUBB(a,b,c)},fixUbbNode:function(a,b,c){return a.name==="#text"?l.ubbEscape(a.value):"["+a.name+(a.attr||"")+"]"+b+"[/"+a.name+"]"}},m=function(b,c,d,e){var f,g,h,i,j,k=a.createNode(),n=b.nodeType,o=b.nodeName.toLowerCase(),p=b.childNodes;d||(d={},d.boxStates=[],d.textStates=[]),n===1&&(l.hasBlockBox(b)?(d.boxStates.push({key:0,node:null}),k.hasBlockBox=!0):b.nodeName.toLowerCase()==="body"&&(d.boxStates.push({key:0,node:null}),k.hasBlockBox=!0),d.textStates.push({keepNewLine:l.isKeepNewLine(b,o),keepWhiteSpace:l.isKeepNewLine(b)}));for(f=0,g=p.length;f<g;f++)j=m(p[f],c,d,!0),j&&k.append(j);return n===1&&d.textStates.pop(),k.hasBlockBox&&d.boxStates.pop(),e?l.parseNode(b,o,n,c,k,d):l.treeToUbb(k)},n=function(a,b,c){var d,e,f=[];c=c||{};if(a.isNode)for(d=0,e=a.length;d<e;d++)f.push(n(a[d],b,c));return a.isRoot?f.join(""):l.parseUbbNode(a,f.join(""),b,c)},o=function(a,b,c){var d,e,f=[];c=c||{};if(a.isNode)for(d=0,e=a.length;d<e;d++)f.push(o(a[d],b,c));return a.isRoot?f.join(""):l.fixUbbNode(a,f.join(""),b,c)};return document.defaultView&&document.defaultView.getComputedStyle?l.getComputedStyle=function(a,c){var d,e,f=a.ownerDocument.defaultView;if(!f)return;return c=c.replace(b,"-$1").toLowerCase(),d=f.getComputedStyle(a,null),d&&(e=d.getPropertyValue(c)),e}:l.getComputedStyle=function(a,b){b=b.replace(c,function(a){return a.charAt(1).toUpperCase()});var f,g,h=a.currentStyle&&a.currentStyle[b],i=a.style;return!e.test(h)&&d.test(h)&&(f=i.left,g=a.runtimeStyle.left,a.runtimeStyle.left=a.currentStyle.left,i.left=b==="fontSize"?"1em":h||0,h=i.pixelLeft+"px",i.left=f,a.runtimeStyle.left=g),h===""?"auto":h.toString()},p.extend=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},p.addTags=function(a){p.extend(g,a)},p.mix=function(a,b){var c,d={};return p.extend(d,a),p.extend(d,b),d},p.Util=l,p.prototype.HTMLtoUBB=function(a){return this.fixUBB(m(a,this.setting))},p.prototype.UBBtoHTML=function(a){return n(l.scanUbbText(a,this.setting,!0),this.setting)},p.prototype.fixUBB=function(a){var b=o(l.scanUbbText(a,this.setting),this.setting);return b},p.prototype.escapeUBB=l.ubbEscape,p.extend(p.Util,{isBold:function(a){var b=parseInt(a,10);return isNaN(b)?/^(bold|bolder)$/.test(a):b>400},isItalic:function(a){return/^(italic|oblique)$/.test(a)},RGBtoHEX:function(a){var b,c="",d,e=/([0-9]+)[, ]+([0-9]+)[, ]+([0-9]+)/,f=e.exec(a);if(!f)if(a.length===4){d=a.split("").slice(1),c="#";for(b=0;b<3;b++)c+=d[b]+d[b]}else c=a;else{for(b=1;b<f.length;b++)c+=("0"+parseInt(f[b],10).toString(16)).slice(-2);c="#"+c}return c}}),p.addTags({bold:{parseHTML:function(a,b,c){a==="#text"&&l.isBold(l.getComputedStyle(b.parentNode,"font-weight"))&&(c.prefix="[bold]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/bold]")},parseUBB:function(a,b,c){return"<b>"+b+"</b>"},canContains:"bold,italic,color,url,image,float",canWrap:0,isBlock:0,noAttr:1},italic:{parseHTML:function(a,b,c){a==="#text"&&l.isItalic(l.getComputedStyle(b.parentNode,"font-style"))&&(c.prefix="[italic]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/italic]")},parseUBB:function(a,b,c){return"<i>"+b+"</i>"},canContains:"bold,italic,color,url,image,float",canWrap:0,isBlock:0,noAttr:1},color:{parseHTML:function(a,b,c,d){if(a==="#text"){var e,f=b.parentNode;e=l.RGBtoHEX(l.getComputedStyle(f,"color")),e&&e!==d.defaultColor&&(f.nodeName.toLowerCase()!=="a"||e!==d.linkDefaultColor)&&(c.prefix="[color="+e+"]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/color]")}},parseUBB:function(a,b,c){return'<span style="color:'+(a.attr?a.attr.slice(1):"")+';">'+b+"</span>"},canContains:"bold,italic,color,url,image,float",canWrap:0,isBlock:0,noAttr:0},url:{parseHTML:function(a,b,c){a==="a"&&(c.prefix="[url="+b.getAttribute("href")+"]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/url]")},parseUBB:function(a,b,c){var d,e,f,g=a.attr?a.attr.replace(/^\ href\=|^\=+/,""):"";if(!a.attr)for(d=0,f=a.length;d<f;d++)e=a[d],e.name==="#text"&&(g+=e.value);return'<a href="'+g+'">'+b+"</a>"},canContains:"bold,italic,color,url,image,float",canWrap:0,isBlock:0,noAttr:0},image:{parseHTML:function(a,b,c){if(a==="img"&&!b.getAttribute("data-src")&&!b.getAttribute("data-code")){var d;b.getAttribute("style")&&/float/.test(b.getAttribute("style"))?(d=b.getAttribute("style").split("float")[1],d=d.match(/right|left|none/)[0],d==="none"?c.prefix="[image]"+b.getAttribute("src")+"[/image]"+(c.prefix||""):c.prefix="[float="+d+"][image]"+b.getAttribute("src")+"[/image][/float]"+(c.prefix||"")):c.prefix="[image]"+b.getAttribute("src")+"[/image]"+(c.prefix||"")}},parseUBB:function(a,b,c){return/__float__/.test(b)?(b=b.split("__float__"),b?'<img src="'+b[0]+'" style="float:'+b[1]+'"/>':""):b?'<img src="'+b+'"/>':""},canWrap:0,isBlock:0,noAttr:1},video:{parseHTML:function(a,b,c){var d;a==="img"&&(d=b.getAttribute("data-src"))&&(c.prefix="[video]"+d+"[/video]"+(c.prefix||""))},parseUBB:function(a,b,c){return b?'<img class="gui-ubb-flash" data-src="'+b+'" src="'+c.flashImage+'" width="480" height="400"/>':""},canWrap:0,isBlock:0,noAttr:1},math:{parseHTML:function(a,b,c){var d;a==="img"&&(d=b.getAttribute("data-code"))&&(c.prefix="[math]"+d+"[/math]"+(c.prefix||""))},parseUBB:function(a,b,c){var d=a[0].origValue,e;return $.ajax({url:"/apis/formula.json",type:"post",async:!1,data:{tex:d},success:function(a){e=a.result.url},dataType:"json"}),b?'<img data-code="'+d.replace('"','\\"')+'" src="'+e+'" class="edui-faked-insertmathjax"/>':""},canWrap:0,isBlock:0,noAttr:1},flash:{parseUBB:function(a,b,c){return b?'<img class="gui-ubb-flash" data-src="'+b+'" src="'+c.flashImage+'" width="480" height="400"/>':""},canWrap:0,isBlock:0,noAttr:1},blockquote:{parseHTML:function(a,b,c){a==="blockquote"&&(c.prefix="[blockquote]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/blockquote]")},parseUBB:function(a,b,c){return"<blockquote>"+b+"</blockquote>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},indent:{parseHTML:function(a,b,c){a==="dl"&&(c.prefix="[indent]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/indent]")},parseUBB:function(a,b,c){return"<dl>"+b+"</dl>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h1:{parseHTML:function(a,b,c){a==="h1"&&(c.prefix="[h1]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h1]")},parseUBB:function(a,b,c){return"<h1>"+b+"</h1>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h2:{parseHTML:function(a,b,c){a==="h2"&&(c.prefix="[h2]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h2]")},parseUBB:function(a,b,c){return"<h2>"+b+"</h2>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h3:{parseHTML:function(a,b,c){a==="h3"&&(c.prefix="[h3]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h3]")},parseUBB:function(a,b,c){return"<h3>"+b+"</h3>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h4:{parseHTML:function(a,b,c){a==="h4"&&(c.prefix="[h4]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h4]")},parseUBB:function(a,b,c){return"<h4>"+b+"</h4>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h5:{parseHTML:function(a,b,c){a==="h5"&&(c.prefix="[h5]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h5]")},parseUBB:function(a,b,c){return"<h5>"+b+"</h5>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},h6:{parseHTML:function(a,b,c){a==="h6"&&(c.prefix="[h6]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/h6]")},parseUBB:function(a,b,c){return"<h6>"+b+"</h6>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},code:{parseHTML:function(a,b,c){a==="pre"&&(c.prefix="[code]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/code]")},parseUBB:function(a,b,c){return"<pre>"+b+"</pre>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},ul:{parseHTML:function(a,b,c){a==="ul"&&(c.prefix="[ul]\n"+(c.prefix||""),c.suffix=(c.suffix||"")+"\n[/ul]")},parseUBB:function(a,b,c){var d=0,e=b.split("<br/>"),f=e[0]?0:1,g=e[e.length-1]?0:-1,h=[];g+=e.length;for(;f<g;d++,f++)h[d]=e[f];return"<ul><li>"+h.join("</li><li>")+"</li></ul>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},ol:{parseHTML:function(a,b,c){a==="ol"&&(c.prefix="[ol]\n"+(c.prefix||""),c.suffix=(c.suffix||"")+"\n[/ol]")},parseUBB:function(a,b,c){var d=0,e=b.split("<br/>"),f=e[0]?0:1,g=e[e.length-1]?0:-1,h=[];g+=e.length;for(;f<g;d++,f++)h[d]=e[f];return"<ol><li>"+h.join("</li><li>")+"</li></ol>"},canContains:"*",canWrap:1,isBlock:1,noAttr:1},ref:{parseHTML:function(a,b,c){a==="div"&&b.className==="gui-ubb-ref"&&(c.prefix="[ref]"+(c.prefix||""),c.suffix=(c.suffix||"")+"[/ref]")},parseUBB:function(a,b,c){return'<div class="gui-ubb-ref">'+b+"</div>"},canWrap:0,isBlock:1,noAttr:1}}),p}),G.def("Base",function(){"use strict";var a=function(){};return a.extend=function(a,b){var c=b||this;for(var d in c)c.hasOwnProperty(d)&&d!=="prototype"&&(a[d]=c[d]);for(var e in c.prototype)c.prototype.hasOwnProperty(e)&&(a.prototype[e]=c.prototype[e])},a}),G.def("Event",["Base"],function(a){function c(){}"use strict";var b=Array.prototype.slice;return c.prototype.on=function(a,b,c,d){return this.eventQueue=this.eventQueue||{},this.eventQueue[a]=this.eventQueue[a]||[],this.eventQueue[a].push({callback:b,context:c,once:d}),this},c.prototype.off=function(a,b){this.eventQueue=this.eventQueue||{};if(this.eventQueue[a]==null)return;return b?(this.eventQueue[a]=G.filter(this.eventQueue[a],function(a,c){return a.callback!==b}),this.eventQueue[a].length===0&&delete this.eventQueue[a]):delete this.eventQueue[a],this},c.prototype.fire=function(a,c){this.eventQueue=this.eventQueue||{};var d=this.eventQueue[a],e=!0;if(d){var f=b.call(arguments,1);G.each(d,function(b){b.callback.apply(b.context,f)===!1&&(e=!1),b.once&&this.off(a,b.callback)},this)}return e},a.extend(c),c}),G.def("support",function(){"use strict";var a=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),b="Webkit Moz O ms Khtml".split(" "),c=document.createElement("div");return{fixed:function d(){if(typeof d.r!="undefined")return d.r;var a=!0;if(G.ua.isIpad||G.ua.isIphone)a=navigator.userAgent.match(/[5-9]_[0-9]/)!==null;else{var b=document.createElement("div"),c=document.createElement("div");b.style.position="absolute",b.style.top="200px",c.style.position="fixed",c.style.top="100px",b.appendChild(c),document.body.appendChild(b),c.getBoundingClientRect&&c.getBoundingClientRect().top==b.getBoundingClientRect().top&&(a=!1),document.body.removeChild(b),b=null,c=null}return d.r=a,a},touchEvent:function e(){if(typeof e.r!="undefined")return e.r;var a=!0,b=["touchstart","touchmove","touchend","touchcancel"];for(var d=0,f=b.length;d<f;d++){var g=b[d];g="on"+g;var h=g in c;h||(c.setAttribute(g,"return;"),h=typeof c[g]=="function");if(!h){a=!1;break}}return e.r=a,a},cssanimation:function f(){if(typeof f.r!="undefined")return f.r;var a=!1,d=c.style,e="animationName",g=e.charAt(0).toUpperCase()+e.substr(1),h=(e+" "+b.join(g+" ")+g).split(" ");for(var i in h)if(d[h[i]]!==undefined){a=!0;break}return f.r=a,a}}}),G.def("Overlay",["support","Event"],function(a,b){function r(a){var b,c;a?(b=(g.height()-l.height())/2+(document.documentElement.scrollTop||window.pageYOffset||0),c=(g.width()-l.width())/2+(document.documentElement.scrollLeft||window.pageXOffset||0)):(b=(g.height()-l.height())/2,c=(g.width()-l.width())/2),l.css({top:b,left:c})}function s(a,b){o&&o.length&&o.css({opacity:a||.5,"background-color":b||"#000"}).show()}function t(){o&&o.length&&o.hide()}function u(){o.css({top:document.documentElement.scrollTop||window.pageYOffset||0,left:document.documentElement.scrollLeft||window.pageXOffset||0})}function v(){o.css({width:g.width(),height:g.height()})}function w(){G.ua.isIE6&&o&&o.length&&(o.css({position:"absolute",bottom:"auto",right:"auto"}),v(),u())}function x(b){if(x.inited)return;x.inited=!0,d=b||"gui",e='<div id="blockWindow" class="'+d+'-block">                           <div class="'+d+'-block-b">                               <h4 class="'+d+'-block-hd">                                   <span id="blockTitle"></span>                                   <a class="blockClose '+d+'-block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="'+d+'-block-bd"></div>                           </div>                       </div>',l=$(e),l.appendTo("body"),m=$(h),n=$(i),q=[l,m],navigator.userAgent.match(/iPad|iPhone/i)!==null?k=navigator.userAgent.match(/[5-9]_[0-9]/)!==null:(k=a.fixed(),g.resize(function(){p&&p.pos()})),G.ua.isIE6&&g.resize(function(){o&&o.length&&p&&v()}).scroll(function(){o&&o.length&&p&&u()}),l.delegate(j,"click",function(a){a.preventDefault(),p&&p.close()})}function y(a,b,c,d){this._isOpen=!1,x.call(this,d),this._fixed=k,this._coverNeedShowed=!1,this._initedCover=!1,a&&!d&&this.open(a,b,c)}"use strict";var c=0,d,e='<div id="blockWindow" class="gui-block">                           <div class="gui-block-b">                               <h4 class="gui-block-hd">                                   <span id="blockTitle"></span>                                   <a class="blockClose gui-block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="gui-block-bd"></div>                           </div>                       </div>',f='<iframe src="{v}" id="blockIframe" frameborder="0" width="100%"></iframe>',g=$(window),h="#blockContent",i="#blockTitle",j=".blockClose",k,l,m,n,o,p,q;return y.prototype={openCallBack:function(a){return a&&this.on("open",a,this),this},closeCallBack:function(a){return a&&this.on("close",a,this),this},afterClose:function(a){return a&&this.on("afterClose",a,this),this},afterOpen:function(a){return a&&this.on("afterOpen",a,this),this},isOpen:function(){return this._isOpen},close:function(){return this._isOpen?this.fire("close",q)?(l.hide(),this._isOpen=!1,p=null,this.fire("afterClose",q),this):this:this},open:function(a,b,c){return this.fire("open",q)?(p&&p!==this&&p.close(),p=this,this.undelegate(),b&&this.delegate(b),a&&!G.isHtml(a)&&(a=G.format(f,a)),m.html(a||""),this._title&&n.html(this._title),this._width&&l.width(this._width),l.css("position",!this._fixed||!k?"absolute":"fixed"),this.pos(),l.show(),this._isOpen=!0,c&&c.call(this,m),this.fire("afterOpen",q),this):this},delegate:function(a){if(!a.length){m.delegate(a.selector,a.event,a.func);return}return G.each(a,function(a){this.delegate(a.selector,a.event,a.func)},m),this},undelegate:function(){return m.undelegate(),this},pos:function(){return r(!this._fixed||!k),G.ua.isIE6&&this._cover&&this._cover.length&&this._cover.css(),this},title:function(a){return this._title=a,this._isOpen&&n.html(a),this},width:function(a){return this._width=a,this._isOpen&&(l.width(a),this.pos()),this},pin:function(){if(this._fixed||!k)return;return this._fixed=!0,this._isOpen&&(l.css("position","fixed"),this.pos()),this},unpin:function(){if(!this._fixed)return;return this._fixed=!1,this._isOpen&&(l.css("position","absolute"),this.pos()),this},showCover:function(a,b){if(!o||!o.length)o=$('<div style="position:fixed;top:0;left:0;right:0;bottom:0;display:none;z-index:'+((parseInt(l.css("z-index"),10)||0)-1)+';"></div>').appendTo("body"),w();if(!this._initedCover){var c=this;this.on("afterClose",function(){c._coverNeedShowed&&t()}).on("afterOpen",function(){c._coverNeedShowed&&s(c._coverOpacity,c._coverColor)}),this._initedCover=!0}return typeof a=="string"&&(b=a,a=null),a&&(this._coverOpacity=a),b&&(this._coverColor=b),s(a||this._coverOpacity,b||this._coverColor),this._coverNeedShowed=!0,this},hideCover:function(){return t(),this._coverNeedShowed=!1,this}},b.extend(y),y}),G.def("UBBUtils",function(){function e(a,b,c){if(a&&G.isFun(a))return a(b,c);if(a)return a.replace(/{v}/g,b).replace(/{s}/g,c)}var a={bold:"[bold]{s}[/bold]",italic:"[italic]{s}[/italic]",video:"[video]{v}[/video]",image:"[image]{v}[/image]",link:function(a,b){if(a&&b)return"[url="+a+"]"+b+"[/url]";if(a)return"[url]"+a+"[/url]"},ref:"[ref]{v}[/ref]"},b={video:'<img class="gui-ubb-flash" data-src="{v}" src="/skin/imgs/flash.png" width="480" height="400"/>',link:'<a href="{v}">{v}</a>',image:'<img src="{v}"/>',ref:'<div class="gui-ubb-ref">{v}</div>'},c={youku:/http:\/\/v\.youku\.com\/v_show\/id_([^\.]+)\.html/,tudou:/http:\/\/www\.tudou\.com\/programs\/view\/([^\/]+)\//,tudoulist:/http:\/\/www\.tudou\.com\/(?:albumplay|listplay)\/[^\/]+\/([^\/]+)\.html/,wuliu:/http:\/\/www\.56\.com\/[^\/]+\/v_([^\.]+)\.html/,ku6:/http:\/\/v\.ku6\.com\/show\/([^\.]+)\.html/,qq:/http:\/\/v\.qq\.com\/[^\/]+\/([^\.]+)\.html/,sina:/http:\/\/video\.sina\.com\.cn\/v\/b\/(\d+-\d+)\.html/,vweibo:/http:\/\/video\.weibo\.com\/v\/weishipin\/([\w-]+)\.htm/,sohu:/http:\/\/tv\.sohu\.com\/\d+\/n\d+\.shtml/,open163:/http:\/\/v\.163\.com\/movie\/\d{4}\/\d{1,2}\/[A-Z\d]\/[A-Z\d]\/[A-Z\d]+_[A-Z\d]+\.html/,netease:/http:\/\/v\.163\.com\/(?:zongyi|jishi|zixun|yule|mv|paike)\/([A-Z\d]+\/[A-Z\d]+)\.html/,letv:/http:\/\/www\.letv\.com\/ptv\/vplay\/(\d+)\.html/,acfun:/(http:\/\/www\.acfun\.tv\/v\/ac\d+)/,bilibili:/http:\/\/www\.bilibili\.tv\/video\/av(\d+)(?:\/index_(\d+))?/},d=["youku.com","tudou.com","56.com","ku6.com","sohu.com","qq.com","sina.com","netease.com","126.net","letv.com","qiyi.com","union.bokecc.com","cdn.acfun.tv","static.hdslb.com"];return{tReplace:function(a,b,c){var d=a,e=b,f=c,g=!0;for(var h=0;h<e.length;h++)e[h][2]||(d=d.replace(e[h][0],f?"":e[h][1]));while(g){g=!1;for(var h=0;h<e.length;h++)e[h][2]&&d.search(e[h][0])!=-1&&(g=!0,d=d.replace(e[h][0],f?"":e[h][1]))}return d},tRGB2Hex:function(a){var b=a,c=0,d=255,e="",f=/([0-9]+)[, ]+([0-9]+)[, ]+([0-9]+)/,g=f.exec(b);if(!g)e=b;else{for(ti=1;ti<g.length;ti++)e+=("0"+parseInt(g[ti]).toString(16)).slice(-2);e="#"+e}return e},tHTMLEncode:function(a){var b=a;return b&&(b=b.replace(/&/igm,"&amp;"),b=b.replace(/</igm,"&lt;"),b=b.replace(/>/igm,"&gt;"),b=b.replace(/\"/igm,"&quot;"),b=b.replace(/ /igm,"&nbsp;")),b},tHTMLDecode:function(a){var b=a;return b&&(b=b.replace(/&lt;/igm,"<"),b=b.replace(/&gt;/igm,">"),b=b.replace(/&quot;/igm,'"'),b=b.replace(/&nbsp;/igm," "),b=b.replace(/&amp;/igm,"&")),b},tHTMLClear:function(a){var b=a;return b&&(b=b.replace(/<script[^>]*>[\s\S]*?<\/script[^>]*>/gim,""),b=b.replace(/<(\/?)(script|i?frame|style|html|head|body|title|link|meta|object|\?|\%)([^>]*?)>/gi,""),b=b.replace(/<([a-z]+)+\s*(?:onerror|onload|onunload|onresize|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousemove|onmousedown|onmouseout|onmouseover|onmouseup|onselect)[^>]*>/gi,"<$1>")),b},tHTML2XHTML:function(a){var b=a;return b&&(b=b.replace(/<br.*?>/ig,"<br />"),b=b.replace(/(<hr\s+[^>]*[^\/])(>)/ig,"$1 />"),b=b.replace(/(<img\s+[^>]*[^\/])(>)/ig,"$1 />")),b},tXHTML2UBB:function(a){var b=a;if(b){var c=this,d=[[/\n/ig,"",!1],[/<blockquote>([\w\W]*?)<\/blockquote>/igm,"[blockquote]$1[/blockquote]",!1],[/<div class="?gui-ubb-ref"?>([\w\W]*?)<\/div>/igm,"[ref]$1[/ref]",!1],[/<br \/>/ig,"\n",!1],[/<\/div>(\n?<div>)?/igm,"\n",!1],[/([\w\W]+)<div>/igm,"$1\n",!1],[/<b>([\w\W]*?)<\/b>/igm,"[bold]$1[/bold]",!0],[/<strong>([\w\W]*?)<\/strong>/igm,"[bold]$1[/bold]",!0],[/<i>([\w\W]*?)<\/i>/igm,"[italic]$1[/italic]",!0],[/<em>([\w\W]*?)<\/em>/igm,"[italic]$1[/italic]",!0],[/<ol>([^<]*?)<\/ol>/igm,"[ol]\n$1[/ol]\n",!0],[/<ul>([^<]*?)<\/ul>/igm,"[ul]\n$1[/ul]\n",!0],[/<li>([^<]*?)<\/li>/igm,"$1\n",!0],[/<span\s[^>]*?>([\w\W]*?)<\/span>/igm,function(a,b){var d=b,e=$(a)[0];return e.style.fontWeight.toLowerCase()=="bold"&&(d="[bold]"+d+"[/bold]"),e.style.fontStyle.toLowerCase()=="italic"&&(d="[italic]"+d+"[/italic]"),e.style.textDecoration.toLowerCase()=="underline"&&(d="[underline]"+d+"[/underline]"),e.style.color&&(d="[color="+c.tRGB2Hex(e.style.color)+"]"+d+"[/color]"),e=null,d},!0],[/<p\s[^>]*?>([\w\W]*?)<\/p>/igm,function(a,b){var c=b,d=$(a)[0];return d.style.fontWeight.toLowerCase()=="bold"&&(c="[p][bold]"+c+"[/bold][/p]"),d=null,c},!0],[/<a\s[^>]*?>([^<]*?)<\/a>/igm,function(a,b){var c=b,d=$(a)[0];return d.getAttribute("href")&&(c="[url="+d.getAttribute("href")+"]"+c+"[/url]"),d=null,c},!0],[/<img\s[^>]*?>/igm,function(a){var b=$(a)[0],c=b.getAttribute("src"),d=b.getAttribute("data-src");return d?(c="[video]"+d+"[/video]",c):(c&&(c="[image]"+c+"[/image]"),b=null,c)},!0]];b=this.tReplace(b,d),b=b.replace(/<[^>]*>/igm,""),b=this.tHTMLDecode(b)}return b},tUBB2XHTML:function(a){var b=a;if(b){var c=this,d=[[/\[ul\]\n?([\w\W]*?)\n?\[\/ul\]\n?/igm,function(a,b){return"<ul><li>"+b.split("\n").join("</li><li>")+"</li></ul>"},!1],[/\[ol\]\n?([\w\W]*?)\n?\[\/ol\]\n?/igm,function(a,b){return"<ol><li>"+b.split("\n").join("</li><li>")+"</li></ol>"},!1],[/\n/igm,"<br />",!1],[/\[color=([^\]]*)\]([^\[]*?)\[\/color\]/igm,function(a,b,c){return'<span style="color: '+b.replace(/&nbsp;/g,"")+'">'+c+"</span>"},!0],[/\[url=([^\]]*)\]([\w\W]*?)\[\/url\]/igm,'<a href="$1">$2</a>',!1],[/\[url\]([^\]]*?)\[\/url\]/igm,'<a href="$1">$1</a>',!0],[/\[image\]([^\[]*?)\[\/image\]/igm,'<img src="$1"/>',!0],[/\[video\]([^\[]*?)\[\/video\]/igm,'<img class="gui-ubb-flash" data-src="$1" src="/skin/imgs/flash.png" width="480" height="400"/>',!0],[/\[bold\]([\w\W]*?)\[\/bold\]/igm,"<b>$1</b>",!1],[/\[italic\]([\w\W]*?)\[\/italic\]/igm,"<i>$1</i>",!1],[/\[blockquote\]([\w\W]*?)\[\/blockquote\]/igm,"<blockquote>$1</blockquote>",!1],[/\[ref\]([\w\W]*?)\[\/ref\]/igm,'<div class="gui-ubb-ref">$1</div>',!1]];b=this.tHTMLEncode(b),b=this.tReplace(b,d),b=this.tReplace(b,[[/\[\/?(bold|italic|url|video|image|color|ul|ol)[^\]]*?\]/igm,"",!1]],!0)}return b},tUBBTag:function(b,c,d){return e(a[b],c,d)},tHTMLTag:function(a,c,d){return e(b[a],c,d)},tValidateFlash:function(a){if(~a.indexOf(".swf"))for(var b=0,e=d.length;b<e;b++)if(~a.indexOf(d[b]))return!0;var f,g;for(var h in c)if(c.hasOwnProperty(h)){f=c[h],g=f.exec(a);if(g)return!0}return!1},tValidateRef:function(a){return/(http:\/\/)?www\.guokr\.com\/(post|article|blog|question|zone\/[^\/]+\/article)\/\d+(\/)?/.test(a)}}}),G.def("tmpl",function(){function a(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var b={entities:a};return function(c,d){/\W/.test(c)||(c=document.getElementById(c).innerHTML);var e=new Function("funcs, obj","var p=[],print=function(){p.push.apply(p,arguments);};with(funcs){with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',entities($1),'").replace(/\t:=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}}return p.join('');");return d?e(b,d):function(a){return e(b,a)}}}),G.def("Menu",["tmpl","Event"],function(a,b){function d(b,d,e,f){G.isFun(e)||(f=e,e=null),this.$menu=$(a(c,{list:d,useFocus:f.useFocus,convert:f.convert,className:f.className||""})),this.$list=this.$menu.find("li"),this.selected=-1,this.data=d,this.doneCallBack=e;var g=this;g.$menu.appendTo(b).delegate("li","mouseenter",function(){var a=g.$list.index(this);if(g.selected===a)return;g.select(a,f.disableMouseChangeEvent)}).delegate("li","click",function(){var a=g.$list.index(this);g.selected=a,g.done()}).mouseleave(function(){g.select(-1,f.disableMouseChangeEvent)});if(f.useFocus){var h=g.$menu.children("a");h.keydown(function(a){a.preventDefault();switch(a.which){case 13:g.done();break;case 27:g.hide();break;case 40:g.down();break;case 38:g.up()}}).focus(function(){g.show(),g.selected===-1&&g.select(0)}),this.focus=function(){return h.focus(),this}}}"use strict";var c='<div class="gui-menu <%=className%>">                        <% if (useFocus) { %>                            <a href="#" tabindex="0" hidefocus="true" class="gui-menu-focus">&nbsp;</a>                        <% } %>                        <ul class="gui-menu-list">                            <% for (var i=0;i<list.length;i++) { %>                            <li>                                <% if (typeof convert !== "undefined") { %>                                    <%:=convert(list[i])%>                                <% } else { %>                                    <%=list[i]%>                                <% } %>                            </li>                            <% } %>                        </ul>                    </div>';return b.extend(d),d.prototype.up=function(){var a=this.selected-1;return a<0&&(a=this.data.length-1),this.select(a),this},d.prototype.down=function(){var a=this.selected+1;return a>this.data.length-1&&(a=0),this.select(a),this},d.prototype.select=function(a,b){if(a==null)return this.data[this.selected];if(a<-1||a>=this.data.length)a=-1;return!b&&this.selected!==a&&!this.fire("change",this.data[a])?this:(this.selected=a,this.$list.removeClass("selected"),this.selected!==-1&&$(this.$list[this.selected]).addClass("selected"),this)},d.prototype.remove=function(){if(!this.fire("remove"))return;this.$menu&&this.$menu.remove(),delete this.$menu,delete this.$list,delete this.selected,delete this.data,delete this.doneCallBack},d.prototype.show=function(){return this.$menu.show(),this},d.prototype.hide=function(){return this.fire("hide")?(this.$menu.hide(),this):this},d.prototype.onChange=function(a){return this.on("change",a,this),this},d.prototype.onRemove=function(a){return this.on("remove",a,this),this},d.prototype.onHide=function(a){return this.on("hide",a,this),this},d.prototype.done=function(){return this.doneCallBack&&this.doneCallBack.call(this,this.data[this.selected]),this},d}),G.def("Trie",function(){function b(a,b){var c=[];for(var d=0,e=a.length;d<e;d++)a[d].indexOf(b)!==-1&&c.push(a[d]);return c}function c(a){var b=[],c={},d;for(var e=0,f=a.length;e<f;e++)d=a[e],c[d]||(b.push(d),c[d]=!0);return b}function d(d,e,f,g){function i(c,d,f){if(c.length===0){j(f,a-d);return}var g;(g=f[c.slice(0,1)])?(g.$&&c.length===1&&(h=h.concat(g.$)),i(c.slice(1),d,g)):f.$&&(h=h.concat(b(f.$,e)))}function j(a,b){if(b===0)return;var c;for(var d in a)c=a[d],c.$&&(h=h.concat(c.$)),j(c,b-1)}var h=[];e=new String(e),g&&(e=g(e)),i(e,e.length,d),f(c(h))}"use strict";var a=G.ua.isIE6?3:5;return function(b,c,e){var f,g=!1,h=!1,i,j,k="";typeof g_obj_id!="undefined"&&(k=g_obj_id),G.isFun(b)?g||(g=!0,b(a,G.ua.isIE6?"":k,function(a){g=!1,f=e?e(a):a,i&&j&&d(f,i,j,c)},function(){h=!0,g=!1,e&&e()})):f=b,this.calculate=function(a,b){if(!a||h){b();return}g?(i=a,j=b):d(f,a,b,c)},this.isLoading=function(){return g},this.isFailed=function(){return h}}}),G.def("TextUtils",function(){function l(a,b){var c=typeof a[b];return c==="function"||c=="object"&&!!a[b]||c=="unknown"}function m(b,c){return typeof b[c]!=a}function n(a,b){return typeof a[b]=="object"&&!!a[b]}function o(a){window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: "+a)}function p(b,c,d){return c<0&&(c+=b.value.length),typeof d==a&&(d=c),d<0&&(d+=b.value.length),{start:c,end:d}}function q(a,b,c){return{start:b,end:c,length:c-b,text:a.value.slice(b,c)}}function r(){return n(document,"body")?document.body:document.getElementsByTagName("body")[0]}function u(a,b){return function(){var c=this.jquery?this[0]:this,d=c.nodeName.toLowerCase();if(c.nodeType==1&&(d=="textarea"||d=="input"&&c.type=="text")){var e=[c].concat(Array.prototype.slice.call(arguments)),f=a.apply(this,e);if(!b)return f}if(b)return this}}"use strict";var a="undefined",b,c,d,e,f,g,h,i,j,k,s=document.createElement("textarea");r().appendChild(s);if(m(s,"selectionStart")&&m(s,"selectionEnd")&&l(s,"setSelectionRange"))b=function(a){var b=a.selectionStart,c=a.selectionEnd;return q(a,b,c)},c=function(a,b,c){var d=p(a,b,c);a.focus(),a.setSelectionRange(d.start,d.end)},j=function(a,b){b?a.selectionEnd=a.selectionStart:a.selectionStart=a.selectionEnd};else{if(!(l(s,"createTextRange")&&n(document,"selection")&&l(document.selection,"createRange"))){r().removeChild(s),o("No means of finding text input caret position");return}b=function(a){a.focus();var b=0,c=0,d,e,f,g,h=document.selection.createRange();return h&&h.parentElement()==a&&(f=a.value.length,d=a.value.replace(/\r\n/g,"\n"),e=a.createTextRange(),e.moveToBookmark(h.getBookmark()),g=a.createTextRange(),g.collapse(!1),e.compareEndPoints("StartToEnd",g)>-1?b=c=f:(b=-e.moveStart("character",-f),b+=d.slice(0,b).split("\n").length-1,e.compareEndPoints("EndToEnd",g)>-1?c=f:(c=-e.moveEnd("character",-f),c+=d.slice(0,c).split("\n").length-1))),q(a,b,c)};var t=function(a,b){return b-(a.value.slice(0,b).split("\r\n").length-1)};c=function(a,b,c){var d=p(a,b,c),e=a.createTextRange(),f=t(a,d.start);e.collapse(!0),d.start==d.end?e.move("character",f):(e.moveEnd("character",t(a,d.end)),e.moveStart("character",f)),e.select()},j=function(a,b){var c=document.selection.createRange();c.collapse(b),c.select()}}r().removeChild(s),e=function(a,b,d,e){var f;b!=d&&(f=a.value,a.value=f.slice(0,b)+f.slice(d)),e&&c(a,b,b)},d=function(a){var c=b(a);e(a,c.start,c.end,!0)},i=function(a){var d=b(a),e;return d.start!=d.end&&(e=a.value,a.value=e.slice(0,d.start)+e.slice(d.end)),c(a,d.start,d.start),d.text},k=function(a,b){b==null&&(b=a.value.length),c(a,b,b)},f=function(a,b,d,e){var f=a.value,g;a.value=f.slice(0,d)+b+f.slice(d),e&&(g=d+b.length,c(a,g,g))},g=function(a,d){var e=b(a),f=a.value;a.value=f.slice(0,e.start)+d+f.slice(e.end);var g=e.start+d.length;c(a,g,g)},h=function(a,d,e){var f=b(a),g=a.value;a.value=g.slice(0,f.start)+d+f.text+e+g.slice(f.end);var h=f.start+d.length,i=h+f.length;c(a,h,i)},$.fn.extend({getSelection:u(b,!1),setSelection:u(c,!0),collapseSelection:u(j,!0),deleteSelectedText:u(d,!0),deleteText:u(e,!0),extractSelectedText:u(i,!1),insertText:u(f,!0),replaceSelectedText:u(g,!0),surroundSelectedText:u(h,!0),insertCaret:u(k,!0)})}),G.def("at",["tmpl","Menu","Trie","TextUtils"],function(a,b,c,d){function u(a){!$.contains(j[0],a.target)&&k[0]!==a.target&&y()}function v(a,b,c,d){$.ajax({type:"get",url:"/apis/community/relationship/following_nickname.json",success:function(a){a.ok&&c(a.result)},error:d,dataType:"json"})}function w(){if(w.inited)return;i=$("body"),j=$(e).appendTo(i),k?j.css("marginTop","30px"):k=j.prepend(f).find("input"),l=j.children("div"),q=new c(v,function(a){return a.toLowerCase().replace(s,"")},function(b){return l.html(a(g,{tip:b==null?null:t.tip,noneTip:b==null?t.loadFailTip:null})),p&&p.remove(),b});var b=!1;k.keydown(function(a){switch(a.which){case 13:a.preventDefault(),y(k.val()),b=!1;break;case 27:a.preventDefault(),y(),b=!1;break;case 40:p&&(b=!0,a.preventDefault(),p.down());break;case 38:p&&(b=!0,a.preventDefault(),p.up());break;case 8:k.val().length===0&&(a.preventDefault(),y()),b=!1;break;default:setTimeout(function(){var a=k.val();a&&a.slice(a.length-1).match(r)&&(a=a.replace(r,""),y(a))}),b=!1}}),window.addEventListener?k[0].addEventListener("input",function(){x(k.val())},!1):window.attachEvent&&k[0].attachEvent("onpropertychange",function(){!b&&window.event.propertyName=="value"&&x(k.val())}),w.inited=!0}function x(c){var d=null,e=null;q.calculate(c,function(c){q.isFailed()?d=t.loadFailTip:q.isLoading()?e=t.loadingTip:c==null?e=t.tip:c.length===0&&(d=t.noneTip),l.html(a(g,{tip:e,noneTip:d})),p&&p.remove(),c&&c.length>0&&(c=c.slice(0,10),p=(new b(l,c,function(a){y(a)},{useFocus:!0,disableMouseChangeEvent:!0})).onChange(function(a){k.val(a)}).onHide(function(){k.insertCaret()}))})}function y(a){a==="妹子"&&alert("﹁_﹁，出门右转是性情！"),j.css("left",-99999),a?m(a+" "):n(),i.unbind("click",u),h&&h.unbind("click",u),o=!1}"use strict";var e='<div class="gui-at"><div></div></div>',f='<input class="gbtxt"/>',g='<% if(tip) { %><p><%=tip%></p><% } %><% if (noneTip) { %><p class="gui-at-none"><%=noneTip%></p><% } %>',h,i,j,k,l,m,n,o=!1,p,q,r=/[^\u3400-\u4db5\u4e00-\u9fcba-zA-Z0-9._\-]/g,s=/[^\u3400-\u4db5\u4e00-\u9fcba-z0-9]/g,t={tip:"输入对方昵称来@TA",loadFailTip:"获取失败，请刷新页面重试",loadingTip:"获取用户列表中...",noneTip:"关注列表无匹配，回车键确认输入"};return function(b,c,d,e,f){if(o)return;o=!0,m=c,n=d,e&&(h=e),f&&(k=f),setTimeout(function(){w(),j.css({top:b.top,left:b.left,display:"block"}),f||k.val(""),k.focus(),x(k.val()),i.click(u),h&&h.click(u)})}}),G.def("MultipleUploader",["Event"],function(a){function d(a,c,d){var e=this;e.$container=$(a),e.uploadUrl=c,e._option=$.extend({},b,d),e.uploadName=e._option.name,e._params=e._option.params||{},e.maxCount=e._option.maxCount,e.maxConnection=e._option.maxConnection,e.count=0,e._abortFunc={},e._connections=[],e._waiting=[],e._queue=[],e._fileViews={},e._uploads={},e._init(),e.on("complete",function(a,b){if(b=e.constructor.state.SUCCESS){var c=e._waiting[e._waiting.length-1];c&&e.upload(c)}}),e.on("stateChange",function(a,b,c){e.constructor.setStateClass(e.getFileView(a),b,e._option.stateClassPrefix,c)})}"use strict";var b={buttonTmpl:'<input type="file" name="{v}" size="10"/>',viewTmpl:"<ul></ul>",fileViewTmpl:'<li data-id="{id}" data-filename="{filename}">{filename}<span class="fileStatsSummary" style="margin-left:5px;">{summary}</span></li>',dragTmpl:'<div class="gui-multiple-drag-area">将文件拖到此处上传</div>',name:"upload_file",uploadOnChange:!0,maxCount:100,maxConnection:2,defaultFailMsg:"上传失败",stateClassPrefix:"gui-multiple-",dragStateClassPrefix:"gui-multiple-drag",timeout:3e5,forceUseForm:!1,errorCodeKey:"error_code",errorMsgKey:"error",errorCode:[900001,900002,900003]},c=0;return a.extend(d),d.state={SUCCESS:"success",SUCCESS_SUMMARY:"上传成功",WAITING:"waiting",WAITING_SUMMARY:"正在上传...",UPLOADING:"uploading",UPLOADING_SUMMARY:"正在上传...",ERROR:"error",ERROR_SUMMARY:"上传失败",TIMEOUT:"timeout",TIMEOUT_SUMMARY:"上传超时",ABORT:"abort",ABORT_SUMMARY:"上传失败"},d.setStateClass=function(a,b,c,d){var e,f,g=$(a),h=this.state;for(e in h)f=h[e],h.hasOwnProperty(e)&&b!==f&&g.removeClass(c+f);return g.addClass(c+b),g.find(".fileStatsSummary").html(d),this},d.isSupported=function(){var a=document.createElement("input"),b=!1;return a.type="file",a.type==="file"&&!a.disabled&&(b=!0),this.isSupported=function(){return b},b},d.supportDrag=function(){var a=document.createElement("div"),b="draggable"in a||"ondragstart"in a&&"ondrop"in a;return this.supportDrag=function(){return b},b},d.supportXhr=function(){var a=document.createElement("input"),b;return a.type="file",b="multiple"in a&&"files"in a&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof (new XMLHttpRequest).upload!="undefined",this.supportXhr=function(){return b},b},d.pushIfNotExist=function(a,b){var c=0,d=a.length,e=!1;for(;c<d;c++)if(a[c]===b){e=!0;break}return e||a.push(b),e},d.removeIfExist=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(b===a[c])return a.splice(c,1),!0;return!1},d.prototype._init=function(){this._setupButton(),this.$view=$(this._option.viewTmpl),this.$container.append(this.$view)},d.prototype._setupButton=function(){var a=this;a.$container.html(G.format(a._option.buttonTmpl,a._option.name)),a.$button=a.$container.find("input[type=file]"),a.constructor.supportXhr()&&!this._option.forceUseForm&&a.$button.attr("multiple","mulitple"),a.$button.change(function b(){var c=$(this),d=c.clone(),e;c.replaceWith(d),c.detach(),e=a._addUpload(this),a._option.uploadOnChange&&a.upload(e),d.change(b)})},d.prototype._setupDrag=function(){var a=this;a.$drag=$(G.format(a._option.dragTmpl)),a.$container.append(a.$drag),a.$drag.attr("draggable","draggable"),a.$drag.bind("dragenter",function(){a.$drag.addClass(a._option.dragStateClassPrefix+"enter"),a.fire("dragenter")}).bind("dragleave",function(b){a.$drag.removeClass(a._option.dragStateClassPrefix+"enter"),a.fire("dragleave")}).bind("drop",function(b){b.preventDefault(),a.$drag.removeClass(a._option.dragStateClassPrefix+"enter");var c=0,d=b.originalEvent.dataTransfer.files,e=d.length,f,g;for(;c<e;c++)f=d[c],g=a._addOneUpload(f),a._option.uploadOnChange&&a.upload(g)})},d.prototype._getUploadId=function(){return"__UPLOADERS-"+c++},d.prototype._addUpload=function(a){if(this.constructor.supportXhr()&&!this._option.forceUseForm){var b=0,c=a.files,d=c.length,e,f=[];for(;b<d;b++)e=c[b],f.push(this._addOneUpload(e));return f}return this._addOneUpload(a)},d.prototype._addOneUpload=function(a){if(this.count>=this.maxCount)return this.fire("addTooManyFiles",a,this.maxCount),-1;var b=this._getUploadId(),c;return this._uploads[b]=a,this._queue.push(b),this.count++,c=$(G.format(this._option.fileViewTmpl,{id:b,filename:this.getFileName(b),summary:"正在上传..."})),this._fileViews[b]=c[0],this.$view.append(c),b},d.prototype.removeUpload=function(a){var b=this.constructor,c=this._fileViews[a];return b.removeIfExist(this._waiting,a),this.abort(a),b.removeIfExist(this._queue,a),c&&($(this._fileViews[a]).remove(),delete this._fileViews[a]),delete this._uploads[a],this},d.prototype.getFileName=function(a){if(this.constructor.supportXhr()&&!this._option.forceUseForm){var b=this._uploads[a];return b.fileName!=null?b.fileName:b.name}return this._uploads[a].value.replace(/.*(\/|\\)/,"")},d.prototype.uploadAll=function(a){var b=0,c=this._queue.length;for(;b<c;b++)this.upload(this._queue[this._queue.length-1]);return this},d.prototype.upload=function(a){if(G.type(a)==="array"){var b=0,c=a.length;for(;b<c;b++)this._uploadOne(a[b])}else this._uploadOne(a);return this},d.prototype._uploadOne=function(a){var b=this.getFileName(a),c;return this._connections.length>=this.maxConnection?(this._intoWaiting(a),this):this._intoConnections(a)?this:(c=$.extend(this._params,{filename:encodeURIComponent(b)}),this.constructor.supportXhr()&&!this._option.forceUseForm?this._uploadByXhr(a,c):this._uploadByForm(a,c),this)},d.prototype.abort=function(a,b){var c=this._abortFunc[a];return c&&(delete this._abortFunc[a],c()),b?(this.fire("timeout",a),this._finishConnection(a,this.constructor.state.TIMEOUT,this.constructor.state.TIMEOUT_SUMMARY)):(this.fire("abort",a),this._finishConnection(a,this.constructor.state.ABORT,this.constructor.state.ABORT_SUMMARY)),this},d.prototype._intoWaiting=function(a){var b=this.constructor,c;return b.removeIfExist(this._queue,a),c=b.pushIfNotExist(this._waiting,a),this.fire("waiting",a),this.fire("stateChange",a,b.state.WAITING,b.state.WAITING_SUMMARY),c},d.prototype._intoConnections=function(a){var b=this.constructor,c;return b.removeIfExist(this._queue,a),b.removeIfExist(this._waiting,a),c=b.pushIfNotExist(this._connections,a),this.fire("uploading",a),this.fire("stateChange",a,b.state.UPLOADING,b.state.UPLOADING_SUMMARY),c},d.prototype._finishConnection=function(a,b,c){var d=this.constructor;d.removeIfExist(this._connections,a),this.fire("complete",a,b),this.fire("stateChange",a,b,c)},d.prototype._uploadByXhr=function(a,b){var c=new XMLHttpRequest,d=this,e=b.filename,f=d.getUpload(a),g=new FormData,h,i,j;c.upload.onprogress=function(b){b.lengthComputable&&d.fire("progress",a,b.loaded,b.total)},c.onreadystatechange=function(b){if(c.readyState==4){var e=d._option,f;i&&clearTimeout(i);if(c.status===200||c.status===201){f=c.responseText;try{f=$.parseJSON(f)}catch(b){f={},f[e.errorCodeKey]=e.errorCode[3],f[e.errorMsgKey]=e.defaultFailMsg}f[e.errorCodeKey]==null?(d.fire("success",a,f),h=d.constructor.state.SUCCESS,j=d.constructor.state.SUCCESS_SUMMARY):(d.fire("error",a,f),h=d.constructor.state.ERROR,j=d.constructor.state.ERROR_SUMMARY)}else f={},f[e.errorCodeKey]=e.errorCode[1],f[e.errorMsgKey]=e.defaultFailMsg,d.fire("error",a,f),h=d.constructor.state.ERROR,j=d.constructor.state.ERROR_SUMMARY;d._finishConnection(a,h,j)}},c.open("POST",d.uploadUrl,!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Cache-Control","no-cache"),g.append(d.uploadName,f),G.each(b,function(a,b){g.append(b,a)}),d._abortFunc[a]=function(){c.abort(),i&&clearTimeout(i)},i=setTimeout(function(){i=null,d.abort(a,!0)},d._option.timeout),c.send(g)},d.prototype._uploadByForm=function(a,b){var c=this,d,e="hidden_iframe_"+a,f="hidden_form_"+a,g=$(c.getUpload(a)),h=$('<iframe id="'+e+'" name="'+e+'" />').css("display","none").appendTo("body"),i=g.wrap("<form/>").parent().css("display","none").attr({id:f,name:f,target:e,enctype:"multipart/form-data",encoding:"multipart/form-data",action:c.uploadUrl,method:"POST"}).appendTo("body");$.each(b,function(a,b){$('<input type="hidden"/>').attr("name",a).val(b).appendTo(i)}),h.bind("load",function(){d&&clearTimeout(d);var b=c._option,e,f,g;try{e=$.parseJSON(h.contents().text())}catch(i){e={},e[b.errorCodeKey]=b.errorCode[0],e[b.errorMsgKey]=b.defaultFailMsg}e[b.errorCodeKey]==null?(c.fire("success",a,e),f=c.constructor.state.SUCCESS,g=c.constructor.state.SUCCESS_SUMMARY):(c.fire("error",a,e),f=c.constructor.state.ERROR,g=c.constructor.state.ERROR_SUMMARY),c._finishConnection(a,f,g),setTimeout(function(){h.remove()},50)}),this._abortFunc[a]=function(){i.remove(),h.remove(),d&&clearTimeout(d)},d=setTimeout(function(){d=null,c.abort(a,!0)},c._option.timeout),i.submit()},d.prototype.getUpload=function(a){return this._uploads[a]},d.prototype.getFileView=function(a){return this._fileViews[a]},d.prototype.remove=function(){var a=this;a.$drag=null,a.$button=null,a.$container.html(""),a.$container=null,a._option=null,a._abortFunc=null,a._connections=null,a._waiting=null,a._queue=null,a._fileViews=null,a._uploads=null},d}),G.def("jQuery",function(){function e(a,c,e){if(e===undefined&&a.nodeType===1){e=a.getAttribute("data-"+c);if(typeof e=="string"){try{e=e==="true"?!0:e==="false"?!1:e==="null"?null:b.isNaN(e)?d.test(e)?b.parseJSON(e):e:parseFloat(e)}catch(f){}b.data(a,c,e)}else e=undefined}return e}function u(){return!1}function v(){return!0}function B(a,c,d){return d[0].type=a,b.event.handle.apply(c,d)}function D(a){var c,d,e,f,g,h,i,j,k,l,m,o,p,q=[],r=[],s=b.data(this,this.nodeType?"events":"__events__");typeof s=="function"&&(s=s.events);if(a.liveFired===this||!s||!s.live||a.button&&a.type==="click")return;a.namespace&&(o=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var t=s.live.slice(0);for(i=0;i<t.length;i++)g=t[i],g.origType.replace(n,"")===a.type?r.push(g.selector):t.splice(i--,1);f=b(a.target).closest(r,a.currentTarget);for(j=0,k=f.length;j<k;j++){m=f[j];for(i=0;i<t.length;i++){g=t[i];if(m.selector===g.selector&&(!o||o.test(g.namespace))){h=m.elem,e=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,e=b(a.relatedTarget).closest(g.selector)[0];(!e||e!==h)&&q.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=q.length;j<k;j++){f=q[j];if(d&&f.level>d)break;a.currentTarget=f.elem,a.data=f.handleObj.data,a.handleObj=f.handleObj,p=f.handleObj.origHandler.apply(f.elem,arguments);if(p===!1||a.isPropagationStopped()){d=f.level,p===!1&&(c=!1);if(a.isImmediatePropagationStopped())break}}return c}function E(a,b){return(a&&a!=="*"?a+".":"")+b.replace(p,"`").replace(q,"&")}function M(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function N(a,c,d){if(b.isFunction(c))return b.grep(a,function(a,b){var e=!!c.call(a,b,a);return e===d});if(c.nodeType)return b.grep(a,function(a,b){return a===c===d});if(typeof c=="string"){var e=b.grep(a,function(a){return a.nodeType===1});if(J.test(c))return b.filter(c,e,!d);c=b.filter(c,e)}return b.grep(a,function(a,e){return b.inArray(a,c)>=0===d})}function Y(a,c){return b.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Z(a,c){var d=0;c.each(function(){if(this.nodeName!==(a[d]&&a[d].nodeName))return;var c=b.data(a[d++]),e=b.data(this,c),f=c&&c.events;if(f){delete e.handle,e.events={};for(var g in f)for(var h in f[g])b.event.add(this,g,f[g][h],f[g][h].data)}})}function _(a,c){c.src?b.ajax({url:c.src,async:!1,dataType:"script"}):b.globalEval(c.text||c.textContent||c.innerHTML||""),c.parentNode&&c.parentNode.removeChild(c)}function bn(a,c,d){var e=c==="width"?bh:bi,f=c==="width"?a.offsetWidth:a.offsetHeight;return d==="border"?f:(b.each(e,function(){d||(f-=parseFloat(b.css(a,"padding"+this))||0),d==="margin"?f+=parseFloat(b.css(a,"margin"+this))||0:f-=parseFloat(b.css(a,"border"+this+"Width"))||0}),f)}function bB(a,c,d,e){b.isArray(c)&&c.length?b.each(c,function(c,f){d||bt.test(a)?e(a,f):bB(a+"["+(typeof f=="object"||b.isArray(f)?c:"")+"]",f,d,e)}):!d&&c!=null&&typeof c=="object"?b.isEmptyObject(c)?e(a,""):b.each(c,function(b,c){bB(a+"["+b+"]",c,d,e)}):e(a,c)}function bH(a,c){var d={};return b.each(bG.concat.apply([],bG.slice(0,c)),function(){d[this]=a}),d}function bI(a){if(!bC[a]){var c=b("<"+a+">").appendTo("body"),d=c.css("display");c.remove();if(d==="none"||d==="")d="block";bC[a]=d}return bC[a]}function bL(a){return b.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var a=window.document,b=function(){function I(){if(b.isReady)return;try{a.documentElement.doScroll("left")}catch(c){setTimeout(I,1);return}b.ready()}var b=function(a,c){return new b.fn.init(a,c)},c=window.jQuery,d=window.$,e,f=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,g=/^.[^:#\[\.,]*$/,h=/\S/,i=/\s/,j=/^\s+/,k=/\s+$/,l=/\W/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=navigator.userAgent,x,y=!1,z=[],A,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,G=Array.prototype.indexOf,H={};return b.fn=b.prototype={init:function(c,d){var g,h,i,j;if(!c)return this;if(c.nodeType)return this.context=this[0]=c,this.length=1,this;if(c==="body"&&!d&&a.body)return this.context=a,this[0]=a.body,this.selector="body",this.length=1,this;if(typeof c=="string"){g=f.exec(c);if(g&&(g[1]||!d)){if(g[1])return j=d?d.ownerDocument||d:a,i=n.exec(c),i?b.isPlainObject(d)?(c=[a.createElement(i[1])],b.fn.attr.call(c,d,!0)):c=[j.createElement(i[1])]:(i=b.buildFragment([g[1]],[j]),c=(i.cacheable?i.fragment.cloneNode(!0):i.fragment).childNodes),b.merge(this,c);h=a.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return e.find(c);this.length=1,this[0]=h}return this.context=a,this.selector=c,this}return!d&&!l.test(c)?(this.selector=c,this.context=a,c=a.getElementsByTagName(c),b.merge(this,c)):!d||d.jquery?(d||e).find(c):b(d).find(c)}return b.isFunction(c)?e.ready(c):(c.selector!==undefined&&(this.selector=c.selector,this.context=c.context),b.makeArray(c,this))},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,c,d){var e=b();return b.isArray(a)?D.apply(e,a):b.merge(e,a),e.prevObject=this,e.context=this.context,c==="find"?e.selector=this.selector+(this.selector?" ":"")+d:c&&(e.selector=this.selector+"."+c+"("+d+")"),e},each:function(a,c){return b.each(this,a,c)},ready:function(c){return b.bindReady(),b.isReady?c.call(a,b):z&&z.push(c),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(b.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||b(null)},push:D,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!b.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(b.isPlainObject(e)||(f=b.isArray(e)))?(f?(f=!1,g=d&&b.isArray(d)?d:[]):g=d&&b.isPlainObject(d)?d:{},h[c]=b.extend(k,g,e)):e!==undefined&&(h[c]=e)}return h},b.extend({noConflict:function(a){return window.$=d,a&&(window.jQuery=c),b},isReady:!1,readyWait:1,ready:function(c){c===!0&&b.readyWait--;if(!b.readyWait||c!==!0&&!b.isReady){if(!a.body)return setTimeout(b.ready,1);b.isReady=!0;if(c!==!0&&--b.readyWait>0)return;if(z){var d,e=0,f=z;z=null;while(d=f[e++])d.call(a,b);b.fn.trigger&&b(a).trigger("ready").unbind("ready")}}},bindReady:function(){if(y)return;y=!0;if(a.readyState==="complete")return setTimeout(b.ready,1);if(a.addEventListener)a.addEventListener("DOMContentLoaded",A,!1),window.addEventListener("load",b.ready,!1);else if(a.attachEvent){a.attachEvent("onreadystatechange",A),window.attachEvent("onload",b.ready);var c=!1;try{c=window.frameElement==null}catch(d){}a.documentElement.doScroll&&c&&I()}},isFunction:function(a){return b.type(a)==="function"},isArray:Array.isArray||function(a){return b.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):H[B.call(a)]||"object"},isPlainObject:function(a){if(!a||b.type(a)!=="object"||a.nodeType||b.isWindow(a))return!1;if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===undefined||C.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(a){if(typeof a!="string"||!a)return null;a=b.trim(a);if(o.test(a.replace(p,"@").replace(q,"]").replace(r,"")))return window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))();b.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(c){if(c&&h.test(c)){var d=a.getElementsByTagName("head")[0]||a.documentElement,e=a.createElement("script");e.type="text/javascript",b.support.scriptEval?e.appendChild(a.createTextNode(c)):e.text=c,d.insertBefore(e,d.firstChild),d.removeChild(e)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===undefined||b.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(var i=a[0];f<g&&c.call(i,f,i)!==!1;i=a[++f]);return a},trim:F?function(a){return a==null?"":F.call(a)}:function(a){return a==null?"":a.toString().replace(j,"").replace(k,"")},makeArray:function(a,c){var d=c||[];if(a!=null){var e=b.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||b.isWindow(a)?D.call(d,a):b.merge(d,a)}return d},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,b){var c=a.length,d=0;if(typeof b.length=="number")for(var e=b.length;d<e;d++)a[c++]=b[d];else while(b[d]!==undefined)a[c++]=b[d++];return a.length=c,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,b,c){var d=[],e;for(var f=0,g=a.length;f<g;f++)e=b(a[f],f,c),e!=null&&(d[d.length]=e);return d.concat.apply([],d)},guid:1,proxy:function(a,c,d){return arguments.length===2&&(typeof c=="string"?(d=a,a=d[c],c=undefined):c&&!b.isFunction(c)&&(d=c,c=undefined)),!c&&a&&(c=function(){return a.apply(d||this,arguments)}),a&&(c.guid=a.guid=a.guid||c.guid||b.guid++),c},access:function(a,c,d,e,f,g){var h=a.length;if(typeof c=="object"){for(var i in c)b.access(a,i,c[i],e,f,d);return a}if(d!==undefined){e=!g&&e&&b.isFunction(d);for(var j=0;j<h;j++)f(a[j],c,e?d.call(a[j],j,f(a[j],c)):d,g);return a}return h?f(a[0],c):undefined},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},browser:{}}),b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){H["[object "+b+"]"]=b.toLowerCase()}),x=b.uaMatch(w),x.browser&&(b.browser[x.browser]=!0,b.browser.version=x.version),b.browser.webkit&&(b.browser.safari=!0),G&&(b.inArray=function(a,b){return G.call(b,a)}),i.test(" ")||(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),e=b(a),a.addEventListener?A=function(){a.removeEventListener("DOMContentLoaded",A,!1),b.ready()}:a.attachEvent&&(A=function(){a.readyState==="complete"&&(a.detachEvent("onreadystatechange",A),b.ready())}),window.jQuery=window.$=b}();(function(){b.support={};var c=a.documentElement,d=a.createElement("script"),e=a.createElement("div"),f="script"+b.now();e.style.display="none",e.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var g=e.getElementsByTagName("*"),h=e.getElementsByTagName("a")[0],i=a.createElement("select"),j=i.appendChild(a.createElement("option"));if(!g||!g.length||!h)return;b.support={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/red/.test(h.getAttribute("style")),hrefNormalized:h.getAttribute("href")==="/a",opacity:/^0.55$/.test(h.style.opacity),cssFloat:!!h.style.cssFloat,checkOn:e.getElementsByTagName("input")[0].value==="on",optSelected:j.selected,deleteExpando:!0,optDisabled:!1,checkClone:!1,scriptEval:!1,noCloneEvent:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0},i.disabled=!0,b.support.optDisabled=!j.disabled,d.type="text/javascript";try{d.appendChild(a.createTextNode("window."+f+"=1;"))}catch(k){}c.insertBefore(d,c.firstChild),window[f]&&(b.support.scriptEval=!0,delete window[f]);try{delete d.test}catch(k){b.support.deleteExpando=!1}c.removeChild(d),e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function n(){b.support.noCloneEvent=!1,e.detachEvent("onclick",n)}),e.cloneNode(!0).fireEvent("onclick")),e=a.createElement("div"),e.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var l=a.createDocumentFragment();l.appendChild(e.firstChild),b.support.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,b(function(){var c=a.createElement("div");c.style.width=c.style.paddingLeft="1px",a.body.appendChild(c),b.boxModel=b.support.boxModel=c.offsetWidth===2,"zoom"in c.style&&(c.style.display="inline",c.style.zoom=1,b.support.inlineBlockNeedsLayout=c.offsetWidth===2,c.style.display="",c.innerHTML="<div style='width:4px;'></div>",b.support.shrinkWrapBlocks=c.offsetWidth!==2),c.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var d=c.getElementsByTagName("td");b.support.reliableHiddenOffsets=d[0].offsetHeight===0,d[0].style.display="",d[1].style.display="none",b.support.reliableHiddenOffsets=b.support.reliableHiddenOffsets&&d[0].offsetHeight===0,c.innerHTML="",a.body.removeChild(c).style.display="none",c=d=null});var m=function(b){var c=a.createElement("div");b="on"+b;var d=b in c;return d||(c.setAttribute(b,"return;"),d=typeof c[b]=="function"),c=null,d};b.support.submitBubbles=m("submit"),b.support.changeBubbles=m("change"),c=d=e=g=h=null})();var c={},d=/^(?:\{.*\}|\[.*\])$/;b.extend({cache:{},uuid:0,expando:"jQuery"+b.now(),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},data:function(a,d,e){if(!b.acceptData(a))return;a=a==window?c:a;var f=a.nodeType,g=f?a[b.expando]:null,h=b.cache,i;if(f&&!g&&typeof d=="string"&&e===undefined)return;return f?g||(a[b.expando]=g=++b.uuid):h=a,typeof d=="object"?f?h[g]=b.extend(h[g],d):b.extend(h,d):f&&!h[g]&&(h[g]={}),i=f?h[g]:h,e!==undefined&&(i[d]=e),typeof d=="string"?i[d]:i},removeData:function(a,d){if(!b.acceptData(a))return;a=a==window?c:a;var e=a.nodeType,f=e?a[b.expando]:a,g=b.cache,h=e?g[f]:f;if(d)h&&(delete h[d],e&&b.isEmptyObject(h)&&b.removeData(a));else if(e&&b.support.deleteExpando)delete a[b.expando];else if(a.removeAttribute)a.removeAttribute(b.expando);else if(e)delete g[f];else for(var i in a)delete a[i]},acceptData:function(a){if(a.nodeName){var c=b.noData[a.nodeName.toLowerCase()];if(c)return c!==!0&&a.getAttribute("classid")===c}return!0}}),b.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){var f=this[0].attributes,g;d=b.data(this[0]);for(var h=0,i=f.length;h<i;h++)g=f[h].name,g.indexOf("data-")===0&&(g=g.substr(5),e(this[0],g,d[g]))}return d}if(typeof a=="object")return this.each(function(){b.data(this,a)});var j=a.split(".");return j[1]=j[1]?"."+j[1]:"",c===undefined?(d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===undefined&&this.length&&(d=b.data(this[0],a),d=e(this[0],a,d)),d===undefined&&j[1]?this.data(j[0]):d):this.each(function(){var d=b(this),e=[j[0],c];d.triggerHandler("setData"+j[1]+"!",e),b.data(this,a,c),d.triggerHandler("changeData"+j[1]+"!",e)})},removeData:function(a){return this.each(function(){b.removeData(this,a)})}}),b.extend({queue:function(a,c,d){if(!a)return;c=(c||"fx")+"queue";var e=b.data(a,c);return d?(!e||b.isArray(d)?e=b.data(a,c,b.makeArray(d)):e.push(d),e):e||[]},dequeue:function(a,c){c=c||"fx";var d=b.queue(a,c),e=d.shift();e==="inprogress"&&(e=d.shift()),e&&(c==="fx"&&d.unshift("inprogress"),e.call(a,function(){b.dequeue(a,c)}))}}),b.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===undefined?b.queue(this[0],a):this.each(function(d){var e=b.queue(this,a,c);a==="fx"&&e[0]!=="inprogress"&&b.dequeue(this,a)})},dequeue:function(a){return this.each(function(){b.dequeue(this,a)})},delay:function(a,c){return a=b.fx?b.fx.speeds[a]||a:a,c=c||"fx",this.queue(c,function(){var d=this;setTimeout(function(){b.dequeue(d,c)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var f=/[\n\t]/g,g=/\s+/,h=/\r/g,i=/^(?:href|src|style)$/,j=/^(?:button|input)$/i,k=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,m=/^(?:radio|checkbox)$/i;b.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"},b.fn.extend({attr:function(a,c){return b.access(this,a,c,!0,b.attr)},removeAttr:function(a,c){return this.each(function(){b.attr(this,a,""),this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(b.isFunction(a))return this.each(function(c){var d=b(this);d.addClass(a.call(this,c,d.attr("class")))});if(a&&typeof a=="string"){var c=(a||"").split(g);for(var d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1)if(!f.className)f.className=a;else{var h=" "+f.className+" ",i=f.className;for(var j=0,k=c.length;j<k;j++)h.indexOf(" "+c[j]+" ")<0&&(i+=" "+c[j]);f.className=b.trim(i)}}}return this},removeClass:function(a){if(b.isFunction(a))return this.each(function(c){var d=b(this);d.removeClass(a.call(this,c,d.attr("class")))});if(a&&typeof a=="string"||a===undefined){var c=(a||"").split(g);for(var d=0,e=this.length;d<e;d++){var h=this[d];if(h.nodeType===1&&h.className)if(a){var i=(" "+h.className+" ").replace(f," ");for(var j=0,k=c.length;j<k;j++)i=i.replace(" "+c[j]+" "," ");h.className=b.trim(i)}else h.className=""}}return this},toggleClass:function(a,c){var d=typeof a,e=typeof c=="boolean";return b.isFunction(a)?this.each(function(d){var e=b(this);e.toggleClass(a.call(this,d,e.attr("class"),c),c)}):this.each(function(){if(d==="string"){var f,h=0,i=b(this),j=c,k=a.split(g);while(f=k[h++])j=e?j:!i.hasClass(f),i[j?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean")this.className&&b.data(this,"__className__",this.className),this.className=this.className||a===!1?"":b.data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(f," ").indexOf(b)>-1)return!0;return!1},val:function(a){if(!arguments.length){var c=this[0];if(c){if(b.nodeName(c,"option")){var d=c.attributes.value;return!d||d.specified?c.value:c.text}if(b.nodeName(c,"select")){var e=c.selectedIndex,f=[],g=c.options,i=c.type==="select-one";if(e<0)return null;for(var j=i?e:0,k=i?e+1:g.length;j<k;j++){var l=g[j];if(l.selected&&(b.support.optDisabled?!l.disabled:l.getAttribute("disabled")===null)&&(!l.parentNode.disabled||!b.nodeName(l.parentNode,"optgroup"))){a=b(l).val();if(i)return a;f.push(a)}}return f}return m.test(c.type)&&!b.support.checkOn?c.getAttribute("value")===null?"on":c.value:(c.value||"").replace(h,"")}return undefined}var n=b.isFunction(a);return this.each(function(c){var d=b(this),e=a;if(this.nodeType!==1)return;n&&(e=a.call(this,c,d.val())),e==null?e="":typeof e=="number"?e+="":b.isArray(e)&&(e=b.map(e,function(a){return a==null?"":a+""}));if(b.isArray(e)&&m.test(this.type))this.checked=b.inArray(d.val(),e)>=0;else if(b.nodeName(this,"select")){var f=b.makeArray(e);b("option",this).each(function(){this.selected=b.inArray(b(this).val(),f)>=0}),f.length||(this.selectedIndex=-1)}else this.value=e})}}),b.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8)return undefined;if(e&&c in b.attrFn)return b(a)[c](d);var f=a.nodeType!==1||!b.isXMLDoc(a),g=d!==undefined;c=f&&b.props[c]||c;var h=i.test(c);if(c==="selected"&&!b.support.optSelected){var m=a.parentNode;m&&(m.selectedIndex,m.parentNode&&m.parentNode.selectedIndex)}if((c in a||a[c]!==undefined)&&f&&!h){g&&(c==="type"&&j.test(a.nodeName)&&a.parentNode&&b.error("type property can't be changed"),d===null?a.nodeType===1&&a.removeAttribute(c):a[c]=d);if(b.nodeName(a,"form")&&a.getAttributeNode(c))return a.getAttributeNode(c).nodeValue;if(c==="tabIndex"){var n=a.getAttributeNode("tabIndex");return n&&n.specified?n.value:k.test(a.nodeName)||l.test(a.nodeName)&&a.href?0:undefined}return a[c]}if(!b.support.style&&f&&c==="style")return g&&(a.style.cssText=""+d),a.style.cssText;g&&a.setAttribute(c,""+d);if(!a.attributes[c]&&a.hasAttribute&&!a.hasAttribute(c))return undefined;var o=!b.support.hrefNormalized&&f&&h?a.getAttribute(c,2):a.getAttribute(c);return o===null?undefined:o}});var n=/\.(.*)$/,o=/^(?:textarea|input|select)$/i,p=/\./g,q=/ /g,r=/[^\w\s.|`]/g,s=function(a){return a.replace(r,"\\$&")},t={focusin:0,focusout:0};b.event={add:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;b.isWindow(a)&&a!==window&&!a.frameElement&&(a=window);if(d===!1)d=u;else if(!d)return;var f,g;d.handler&&(f=d,d=f.handler),d.guid||(d.guid=b.guid++);var h=b.data(a);if(!h)return;var i=a.nodeType?"events":"__events__",j=h[i],k=h.handle;typeof j=="function"?(k=j.handle,j=j.events):j||(a.nodeType||(h[i]=h=function(){}),h.events=j={}),k||(h.handle=k=function(){return typeof b!="undefined"&&!b.event.triggered?b.event.handle.apply(k.elem,arguments):undefined}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){g=f?b.extend({},f):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),g.namespace=n.slice(0).sort().join(".")):(n=[],g.namespace=""),g.type=l,g.guid||(g.guid=d.guid);var o=j[l],p=b.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,g),g.handler.guid||(g.handler.guid=d.guid)),o.push(g),b.event.global[l]=!0}a=null},global:{},remove:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;d===!1&&(d=u);var f,g,h,i,j=0,k,l,m,n,o,p,q,r=a.nodeType?"events":"__events__",t=b.data(a),v=t&&t[r];if(!t||!v)return;typeof v=="function"&&(t=v,v=v.events),c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(g in v)b.event.remove(a,g+c);return}c=c.split(" ");while(g=c[j++]){q=g,p=null,k=g.indexOf(".")<0,l=[],k||(l=g.split("."),g=l.shift(),m=new RegExp("(^|\\.)"+b.map(l.slice(0).sort(),s).join("\\.(?:.*\\.)?")+"(\\.|$)")),o=v[g];if(!o)continue;if(!d){for(i=0;i<o.length;i++){p=o[i];if(k||m.test(p.namespace))b.event.remove(a,q,p.handler,i),o.splice(i--,1)}continue}n=b.event.special[g]||{};for(i=e||0;i<o.length;i++){p=o[i];if(d.guid===p.guid){if(k||m.test(p.namespace))e==null&&o.splice(i--,1),n.remove&&n.remove.call(a,p);if(e!=null)break}}if(o.length===0||e!=null&&o.length===1)(!n.teardown||n.teardown.call(a,l)===!1)&&b.removeEvent(a,g,t.handle),f=null,delete v[g]}if(b.isEmptyObject(v)){var w=t.handle;w&&(w.elem=null),delete t.events,delete t.handle,typeof t=="function"?b.removeData(a,r):b.isEmptyObject(t)&&b.removeData(a)}},trigger:function(a,c,d){var e=a.type||a,f=arguments[3];if(!f){a=typeof a=="object"?a[b.expando]?a:b.extend(b.Event(e),a):b.Event(e),e.indexOf("!")>=0&&(a.type=e=e.slice(0,-1),a.exclusive=!0),d||(a.stopPropagation(),b.event.global[e]&&b.each(b.cache,function(){this.events&&this.events[e]&&b.event.trigger(a,c,this.handle.elem)}));if(!d||d.nodeType===3||d.nodeType===8)return undefined;a.result=undefined,a.target=d,c=b.makeArray(c),c.unshift(a)}a.currentTarget=d;var g=d.nodeType?b.data(d,"handle"):(b.data(d,"__events__")||{}).handle;g&&g.apply(d,c);var h=d.parentNode||d.ownerDocument;try{d&&d.nodeName&&b.noData[d.nodeName.toLowerCase()]||d["on"+e]&&d["on"+e].apply(d,c)===!1&&(a.result=!1,a.preventDefault())}catch(i){}if(!a.isPropagationStopped()&&h)b.event.trigger(a,c,h,!0);else if(!a.isDefaultPrevented()){var j,k=a.target,l=e.replace(n,""),m=b.nodeName(k,"a")&&l==="click",o=b.event.special[l]||{};if((!o._default||o._default.call(d,a)===!1)&&!m&&!(k&&k.nodeName&&b.noData[k.nodeName.toLowerCase()])){try{k[l]&&(j=k["on"+l],j&&(k["on"+l]=null),b.event.triggered=!0,k[l]())}catch(p){}j&&(k["on"+l]=j),b.event.triggered=!1}}},handle:function(a){var c,d,e,f,g,h=[],i=b.makeArray(arguments);a=i[0]=b.event.fix(a||window.event),a.currentTarget=this,c=a.type.indexOf(".")<0&&!a.exclusive,c||(e=a.type.split("."),a.type=e.shift(),h=e.slice(0).sort(),f=new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)")),a.namespace=a.namespace||h.join("."),g=b.data(this,this.nodeType?"events":"__events__"),typeof g=="function"&&(g=g.events),d=(g||{})[a.type];if(g&&d){d=d.slice(0);for(var j=0,k=d.length;j<k;j++){var l=d[j];if(c||f.test(l.namespace)){a.handler=l.handler,a.data=l.data,a.handleObj=l;var m=l.handler.apply(this,i);m!==undefined&&(a.result=m,m===!1&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(c){if(c[b.expando])return c;var d=c;c=b.Event(d);for(var e=this.props.length,f;e;)f=this.props[--e],c[f]=d[f];c.target||(c.target=c.srcElement||a),c.target.nodeType===3&&(c.target=c.target.parentNode),!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);if(c.pageX==null&&c.clientX!=null){var g=a.documentElement,h=a.body;c.pageX=c.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0),c.pageY=c.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}return c.which==null&&(c.charCode!=null||c.keyCode!=null)&&(c.which=c.charCode!=null?c.charCode:c.keyCode),!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey),!c.which&&c.button!==undefined&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0),c},guid:1e8,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(a){b.event.add(this,E(a.origType,a.selector),b.extend({},a,{handler:D,guid:a.handler.guid}))},remove:function(a){b.event.remove(this,E(a.origType,a.selector),a)}},beforeunload:{setup:function(a,c,d){b.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},b.removeEvent=a.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},b.Event=function(a){if(!this.preventDefault)return new b.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type):this.type=a,this.timeStamp=b.now(),this[b.expando]=!0},b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=v;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=v;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=v,this.stopPropagation()},isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u};var w=function(a){var c=a.relatedTarget;try{while(c&&c!==this)c=c.parentNode;c!==this&&(a.type=a.data,b.event.handle.apply(this,arguments))}catch(d){}},x=function(a){a.type=a.data,b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,c){b.event.special[a]={setup:function(d){b.event.add(this,c,d&&d.selector?x:w,a)},teardown:function(a){b.event.remove(this,c,a&&a.selector?x:w)}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(a,c){if(this.nodeName.toLowerCase()!=="form")b.event.add(this,"click.specialSubmit",function(a){var c=a.target,d=c.type;if((d==="submit"||d==="image")&&b(c).closest("form").length)return a.liveFired=undefined,B("submit",this,arguments)}),b.event.add(this,"keypress.specialSubmit",function(a){var c=a.target,d=c.type;if((d==="text"||d==="password")&&b(c).closest("form").length&&a.keyCode===13)return a.liveFired=undefined,B("submit",this,arguments)});else return!1},teardown:function(a){b.event.remove(this,".specialSubmit")}});if(!b.support.changeBubbles){var y,z=function(a){var c=a.type,d=a.value;return c==="radio"||c==="checkbox"?d=a.checked:c==="select-multiple"?d=a.selectedIndex>-1?b.map(a.options,function(a){return a.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(d=a.selectedIndex),d},A=function(c){var d=c.target,e,f;if(!o.test(d.nodeName)||d.readOnly)return;e=b.data(d,"_change_data"),f=z(d),(c.type!=="focusout"||d.type!=="radio")&&b.data(d,"_change_data",f);if(e===undefined||f===e)return;if(e!=null||f)return c.type="change",c.liveFired=undefined,b.event.trigger(c,arguments[1],d)};b.event.special.change={filters:{focusout:A,beforedeactivate:A,click:function(a){var b=a.target,c=b.type;if(c==="radio"||c==="checkbox"||b.nodeName.toLowerCase()==="select")return A.call(this,a)},keydown:function(a){var b=a.target,c=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")return A.call(this,a)},beforeactivate:function(a){var c=a.target;b.data(c,"_change_data",z(c))}},setup:function(a,c){if(this.type==="file")return!1;for(var d in y)b.event.add(this,d+".specialChange",y[d]);return o.test(this.nodeName)},teardown:function(a){return b.event.remove(this,".specialChange"),o.test(this.nodeName)}},y=b.event.special.change.filters,y.focus=y.beforeactivate}a.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(c,d){function e(a){return a=b.event.fix(a),a.type=d,b.event.trigger(a,null,a.target)}b.event.special[d]={setup:function(){t[d]++===0&&a.addEventListener(c,e,!0)},teardown:function(){--t[d]===0&&a.removeEventListener(c,e,!0)}}}),b.each(["bind","one"],function(a,c){b.fn[c]=function(a,d,e){if(typeof a=="object"){for(var f in a)this[c](f,d,a[f],e);return this}if(b.isFunction(d)||d===!1)e=d,d=undefined;var g=c==="one"?b.proxy(e,function(a){return b(this).unbind(a,g),e.apply(this,arguments)}):e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var h=0,i=this.length;h<i;h++)b.event.add(this[h],a,g,d);return this}}),b.fn.extend({unbind:function(a,c){if(typeof a=="object"&&!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else for(var e=0,f=this.length;e<f;e++)b.event.remove(this[e],a,c);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,c){return this.each(function(){b.event.trigger(a,c,this)})},triggerHandler:function(a,c){if(this[0]){var d=b.Event(a);return d.preventDefault(),d.stopPropagation(),b.event.trigger(d,c,this[0]),d.result}},toggle:function(a){var c=arguments,d=1;while(d<c.length)b.proxy(a,c[d++]);return this.click(b.proxy(a,function(e){var f=(b.data(this,"lastToggle"+a.guid)||0)%d;return b.data(this,"lastToggle"+a.guid,f+1),e.preventDefault(),c[f].apply(this,arguments)||!1}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var C={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(a,c){b.fn[c]=function(a,d,e,f){var g,h=0,i,j,k,l=f||this.selector,m=f?this:b(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)m[c](o,d,a[o],l);return this}b.isFunction(d)&&(e=d,d=undefined),a=(a||"").split(" ");while((g=a[h++])!=null){i=n.exec(g),j="",i&&(j=i[0],g=g.replace(n,""));if(g==="hover"){a.push("mouseenter"+j,"mouseleave"+j);continue}k=g,g==="focus"||g==="blur"?(a.push(C[g]+j),g+=j):g=(C[g]||g)+j;if(c==="live")for(var p=0,q=m.length;p<q;p++)b.event.add(m[p],"live."+E(g,l),{data:d,selector:l,handler:e,origType:g,origHandler:e,preType:k});else m.unbind("live."+E(g,l),e)}return this}}),b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,c){b.fn[c]=function(a,b){return b==null&&(b=a,a=null),arguments.length>0?this.bind(c,a,b):this.trigger(c)},b.attrFn&&(b.attrFn[c]=!0)}),window.attachEvent&&!window.addEventListener&&b(window).bind("unload",function(){for(var a in b.cache)if(b.cache[a].handle)try{b.event.remove(b.cache[a].handle.elem)}catch(c){}}),function(){function q(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function r(a,b,c,d,e,f){for(var g=0,i=d.length;g<i;g++){var j=d[g];if(j){var k=!1;j=j[a];while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){f||(j.sizcache=c,j.sizset=g);if(typeof b!="string"){if(j===b){k=!0;break}}else if(h.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[g]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0;[0,0].sort(function(){return g=!1,0});var h=function(b,d,f,g){f=f||[],d=d||a;var k=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var l,n,o,p,q,r,t,u,v=!0,w=h.isXML(d),x=[],y=b;do{c.exec(""),l=c.exec(y);if(l){y=l[3],x.push(l[1]);if(l[2]){p=l[3];break}}}while(l);if(x.length>1&&j.exec(b))if(x.length===2&&i.relative[x[0]])n=s(x[0]+x[1],d);else{n=i.relative[x[0]]?[d]:h(x.shift(),d);while(x.length)b=x.shift(),i.relative[b]&&(b+=x.shift()),n=s(b,n)}else{!g&&x.length>1&&d.nodeType===9&&!w&&i.match.ID.test(x[0])&&!i.match.ID.test(x[x.length-1])&&(q=h.find(x.shift(),d,w),d=q.expr?h.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:m(g)}:h.find(x.pop(),x.length!==1||x[0]!=="~"&&x[0]!=="+"||!d.parentNode?d:d.parentNode,w),n=q.expr?h.filter(q.expr,q.set):q.set,x.length>0?o=m(n):v=!1;while(x.length)r=x.pop(),t=r,i.relative[r]?t=x.pop():r="",t==null&&(t=d),i.relative[r](o,t,w)}else o=x=[]}o||(o=n),o||h.error(r||b);if(e.call(o)==="[object Array]")if(!v)f.push.apply(f,o);else if(d&&d.nodeType===1)for(u=0;o[u]!=null;u++)o[u]&&(o[u]===!0||o[u].nodeType===1&&h.contains(d,o[u]))&&f.push(n[u]);else for(u=0;o[u]!=null;u++)o[u]&&o[u].nodeType===1&&f.push(n[u]);else m(o,f);return p&&(h(p,k,f,g),h.uniqueSort(f)),f};h.uniqueSort=function(a){if(o){f=g,a.sort(o);if(f)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},h.matches=function(a,b){return h(a,null,null,b)},h.matchesSelector=function(a,b){return h(b,null,null,[a]).length>0},h.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=i.order.length;e<f;e++){var g,h=i.order[e];if(g=i.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(/\\/g,""),d=i.find[h](g,b,c);if(d!=null){a=a.replace(i.match[h],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},h.filter=function(a,b,c,d){var e,f,g=a,j=[],k=b,l=b&&b[0]&&h.isXML(b[0]);while(a&&b.length){for(var m in i.filter)if((e=i.leftMatch[m].exec(a))!=null&&e[2]){var n,o,p=i.filter[m],q=e[1];f=!1,e.splice(1,1);if(q.substr(q.length-1)==="\\")continue;k===j&&(j=[]);if(i.preFilter[m]){e=i.preFilter[m](e,k,c,j,d,l);if(!e)f=n=!0;else if(e===!0)continue}if(e)for(var r=0;(o=k[r])!=null;r++)if(o){n=p(o,e,r,k);var s=d^!!n;c&&n!=null?s?f=!0:k[r]=!1:s&&(j.push(o),f=!0)}if(n!==undefined){c||(k=j),a=a.replace(i.match[m],"");if(!f)return[];break}}if(a===g)if(f==null)h.error(a);else break;g=a}return k},h.error=function(a){throw"Syntax error, unrecognized expression: "+a};var i=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,i;f<g;f++)if(i=a[f]){while((i=i.previousSibling)&&i.nodeType!==1);a[f]=e||i&&i.nodeName.toLowerCase()===b?i||!1:i===b}e&&h.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!/\W/.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&h.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=r;typeof b=="string"&&!/\W/.test(b)&&(b=b.toLowerCase(),e=b,g=q),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=r;typeof b=="string"&&!/\W/.test(b)&&(b=b.toLowerCase(),e=b,g=q),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&i.attrMap[g]&&(a[1]=i.attrMap[g]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if(a[1]==="not")if((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=h(a[3],null,null,b);else{var g=h.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||h.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var j=0,k=g.length;j<k;j++)if(g[j]===a)return!1;return!0}h.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];if(f)return f(a,c,b,d)}}},j=i.match.POS,k=function(a,b){return"\\"+(b-0+1)};for(var l in i.match)i.match[l]=new RegExp(i.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[l].source.replace(/\\(\d+)/g,k));var m=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(a.documentElement.childNodes,0)[0].nodeType}catch(n){m=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var o,p;a.documentElement.compareDocumentPosition?o=function(a,b){return a===b?(f=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(o=function(a,b){var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(a===b)return f=!0,0;if(h===i)return p(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==g[k])return p(e[k],g[k]);return k===c?p(a,g[k],-1):p(e[k],b,1)},p=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),h.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=h.getText(c.childNodes));return b},function(){var b=a.createElement("div"),c="script"+(new Date).getTime(),d=a.documentElement;b.innerHTML="<a name='"+c+"'/>",d.insertBefore(b,d.firstChild),a.getElementById(c)&&(i.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},i.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(b),d=b=null}(),function(){var b=a.createElement("div");b.appendChild(a.createComment("")),b.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),b.innerHTML="<a href='#'></a>",b.firstChild&&typeof b.firstChild.getAttribute!="undefined"&&b.firstChild.getAttribute("href")!=="#"&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),b=null}(),a.querySelectorAll&&function(){var b=h,c=a.createElement("div"),d="__sizzle__";c.innerHTML="<p class='TEST'></p>";if(c.querySelectorAll&&c.querySelectorAll(".TEST").length===0)return;h=function(c,e,f,g){e=e||a,c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!g&&!h.isXML(e))if(e.nodeType===9)try{return m(e.querySelectorAll(c),f)}catch(i){}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var j=e.getAttribute("id"),k=j||d;j||e.setAttribute("id",k);try{return m(e.querySelectorAll("#"+k+" "+c),f)}catch(l){}finally{j||e.removeAttribute("id")}}return b(c,e,f,g)};for(var e in b)h[e]=b[e];c=null}(),function(){var b=a.documentElement,c=b.matchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.msMatchesSelector,d=!1;try{c.call(a.documentElement,"[test!='']:sizzle")}catch(e){d=!0}c&&(h.matchesSelector=function(a,b){b=b.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(a))try{if(d||!i.match.PSEUDO.test(b)&&!/!=/.test(b))return c.call(a,b)}catch(e){}return h(b,null,null,[a]).length>0})}(),function(){var b=a.createElement("div");b.innerHTML="<div class='test e'></div><div class='test'></div>";if(!b.getElementsByClassName||b.getElementsByClassName("e").length===0)return;b.lastChild.className="e";if(b.getElementsByClassName("e").length===1)return;i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},b=null}(),a.documentElement.contains?h.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:a.documentElement.compareDocumentPosition?h.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:h.contains=function(){return!1},h.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var s=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=i.match.PSEUDO.exec(a))e+=c[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;g<j;g++)h(a,f[g],d);return h.filter(e,d)};b.find=h,b.expr=h.selectors,b.expr[":"]=b.expr.filters,b.unique=h.uniqueSort,b.text=h.getText,b.isXMLDoc=h.isXML,b.contains=h.contains}();var F=/Until$/,H=/^(?:parents|prevUntil|prevAll)/,I=/,/,J=/^.[^:#\[\.,]*$/,K=Array.prototype.slice,L=b.expr.match.POS;b.fn.extend({find:function(a){var c=this.pushStack("","find",a),d=0;for(var e=0,f=this.length;e<f;e++){d=c.length,b.find(a,this[e],c);if(e>0)for(var g=d;g<c.length;g++)for(var h=0;h<d;h++)if(c[h]===c[g]){c.splice(g--,1);break}}return c},has:function(a){var c=b(a);return this.filter(function(){for(var a=0,d=c.length;a<d;a++)if(b.contains(this,c[a]))return!0})},not:function(a){return this.pushStack(N(this,a,!1),"not",a)},filter:function(a){return this.pushStack(N(this,a,!0),"filter",a)},is:function(a){return!!a&&b.filter(a,this).length>0},closest:function(a,c){var d=[],e,f,g=this[0];if(b.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(e=0,f=a.length;e<f;e++)i=a[e],j[i]||(j[i]=b.expr.match.POS.test(i)?b(i,c||this.context):i);while(g&&g.ownerDocument&&g!==c){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:b(g).is(h))&&d.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return d}var l=L.test(a)?b(a,c||this.context):null;for(e=0,f=this.length;e<f;e++){g=this[e];while(g){if(l?l.index(g)>-1:b.find.matchesSelector(g,a)){d.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===c)break}}return d=d.length>1?b.unique(d):d,this.pushStack(d,"closest",a)},index:function(a){return!a||typeof a=="string"?b.inArray(this[0],a?b(a):this.parent().children()):b.inArray(a.jquery?a[0]:a,this)},add:function(a,c){var d=typeof a=="string"?b(a,c||this.context):b.makeArray(a),e=b.merge(this.get(),d);return this.pushStack(M(d[0])||M(e[0])?e:b.unique(e))},andSelf:function(){return this.add(this.prevObject)}}),b.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return b.dir(a,"parentNode")},parentsUntil:function(a,c,d){return b.dir(a,"parentNode",d)},next:function(a){return b.nth(a,2,"nextSibling")},prev:function(a){return b.nth(a,2,"previousSibling")},nextAll:function(a){return b.dir(a,"nextSibling")},prevAll:function(a){return b.dir(a,"previousSibling")},nextUntil:function(a,c,d){return b.dir(a,"nextSibling",d)},prevUntil:function(a,c,d){return b.dir(a,"previousSibling",d)},siblings:function(a){return b.sibling(a.parentNode.firstChild,a)},children:function(a){return b.sibling(a.firstChild)},contents:function(a){return b.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:b.makeArray(a.childNodes)}},function(a,c){b.fn[a]=function(d,e){var f=b.map(this,c,d);return F.test(a)||(e=d),e&&typeof e=="string"&&(f=b.filter(e,f)),f=this.length>1?b.unique(f):f,(this.length>1||I.test(e))&&H.test(a)&&(f=f.reverse()),this.pushStack(f,a,K.call(arguments).join(","))}}),b.extend({filter:function(a,c,d){return d&&(a=":not("+a+")"),c.length===1?b.find.matchesSelector(c[0],a)?[c[0]]:[]:b.find.matches(a,c)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===undefined||f.nodeType!==1||!b(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var O=/ jQuery\d+="(?:\d+|null)"/g,P=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,R=/<([\w:]+)/,S=/<tbody/i,T=/<|&#?\w+;/,U=/<(?:script|object|embed|option|style)/i,V=/checked\s*(?:[^=]|=\s*.checked.)/i,W=/\=([^="'>\s]+\/)>/g,X={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td,b.support.htmlSerialize||(X._default=[1,"div<div>","</div>"]),b.fn.extend({text:function(c){return b.isFunction(c)?this.each(function(a){var d=b(this);d.text(c.call(this,a,d.text()))}):typeof c!="object"&&c!==undefined?this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(c)):b.text(this)},wrapAll:function(a){if(b.isFunction(a))return this.each(function(c){b(this).wrapAll(a.call(this,c))});if(this[0]){var c=b(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return b.isFunction(a)?this.each(function(c){b(this).wrapInner(a.call(this,c))}):this.each(function(){var c=b(this),d=c.contents();d.length?d.wrapAll(a):c.append(a)})},wrap:function(a){return this.each(function(){b(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=b(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,b(arguments[0]).toArray()),a}},remove:function(a,c){for(var d=0,e;(e=this[d])!=null;d++)if(!a||b.filter(a,[e]).length)!c&&e.nodeType===1&&(b.cleanData(e.getElementsByTagName("*")),b.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,c;(c=this[a])!=null;a++){c.nodeType===1&&b.cleanData(c.getElementsByTagName("*"));while(c.firstChild)c.removeChild(c.firstChild)}return this},clone:function(a){var c=this.map(function(){if(!b.support.noCloneEvent&&!b.isXMLDoc(this)){var a=this.outerHTML,c=this.ownerDocument;if(!a){var d=c.createElement("div");d.appendChild(this.cloneNode(!0)),a=d.innerHTML}return b.clean([a.replace(O,"").replace(W,'="$1">').replace(P,"")],c)[0]}return this.cloneNode(!0)});return a===!0&&(Z(this,c),Z(this.find("*"),c.find("*"))),c},html:function(a){if(a===undefined)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(O,""):null;if(typeof a=="string"&&!U.test(a)&&(b.support.leadingWhitespace||!P.test(a))&&!X[(R.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Q,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(b.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else b.isFunction(a)?this.each(function(c){var d=b(this);d.html(a.call(this,c,d.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?b.isFunction(a)?this.each(function(c){var d=b(this),e=d.html();d.replaceWith(a.call(this,c,e))}):(typeof a!="string"&&(a=b(a).detach()),this.each(function(){var c=this.nextSibling,d=this.parentNode;b(this).remove(),c?b(c).before(a):b(d).append(a)})):this.pushStack(b(b.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!b.support.checkClone&&arguments.length===3&&typeof i=="string"&&V.test(i))return this.each(function(){b(this).domManip(a,c,d,!0)});if(b.isFunction(i))return this.each(function(e){var f=b(this);a[0]=i.call(this,e,c?f.html():undefined),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,b.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=b.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&b.nodeName(f,"tr");for(var k=0,l=this.length;k<l;k++)d.call(c?Y(this[k],f):this[k],k>0||e.cacheable||this.length>1?g.cloneNode(!0):g)}j.length&&b.each(j,_)}return this}}),b.buildFragment=function(c,d,e){var f,g,h,i=d&&d[0]?d[0].ownerDocument||d[0]:a;return c.length===1&&typeof c[0]=="string"&&c[0].length<512&&i===a&&!U.test(c[0])&&(b.support.checkClone||!V.test(c[0]))&&(g=!0,h=b.fragments[c[0]],h&&h!==1&&(f=h)),f||(f=i.createDocumentFragment(),b.clean(c,i,f,e)),g&&(b.fragments[c[0]]=h?f:1),{fragment:f,cacheable:g}},b.fragments={},b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){b.fn[a]=function(d){var e=[],f=b(d),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&f.length===1)return f[c](this[0]),this;for(var h=0,i=f.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();b(f[h])[c](j),e=e.concat(j)}return this.pushStack(e,a,f.selector)}}),b.extend({clean:function(c,d,e,f){d=d||a,typeof d.createElement=="undefined"&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||a);var g=[];for(var h=0,i;(i=c[h])!=null;h++){typeof i=="number"&&(i+="");if(!i)continue;if(typeof i=="string"&&!T.test(i))i=d.createTextNode(i);else if(typeof i=="string"){i=i.replace(Q,"<$1></$2>");var j=(R.exec(i)||["",""])[1].toLowerCase(),k=X[j]||X._default,l=k[0],m=d.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!b.support.tbody){var n=S.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(var p=o.length-1;p>=0;--p)b.nodeName(o[p],"tbody")&&!o[p].childNodes.length&&o[p].parentNode.removeChild(o[p])}!b.support.leadingWhitespace&&P.test(i)&&m.insertBefore(d.createTextNode(P.exec(i)[0]),m.firstChild),i=m.childNodes}i.nodeType?g.push(i):g=b.merge(g,i)}if(e)for(h=0;g[h];h++)f&&b.nodeName(g[h],"script")&&(!g[h].type||g[h].type.toLowerCase()==="text/javascript")?f.push(g[h].parentNode?g[h].parentNode.removeChild(g[h]):g[h]):(g[h].nodeType===1&&g.splice.apply(g,[h+1,0].concat(b.makeArray(g[h].getElementsByTagName("script")))),e.appendChild(g[h]));return g},cleanData:function(a){var c,d,e=b.cache,f=b.event.special,g=b.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&b.noData[i.nodeName.toLowerCase()])continue;d=i[b.expando];if(d){c=e[d];if(c&&c.events)for(var j in c.events)f[j]?b.event.remove(i,j):b.removeEvent(i,j,c.handle);g?delete i[b.expando]:i.removeAttribute&&i.removeAttribute(b.expando),delete e[d]}}}});var ba=/alpha\([^)]*\)/i,bb=/opacity=([^)]*)/,bc=/-([a-z])/ig,bd=/([A-Z])/g,be=/^-?\d+(?:px)?$/i,bf=/^-?\d/,bg={position:"absolute",visibility:"hidden",display:"block"},bh=["Left","Right"],bi=["Top","Bottom"],bj,bk,bl,bm=function(a,b){return b.toUpperCase()};b.fn.css=function(a,c){return arguments.length===2&&c===undefined?this:b.access(this,a,c,!0,function(a,c,d){return d!==undefined?b.style(a,c,d):b.css(a,c)})},b.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bj(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g=b.camelCase(c),h=a.style,i=b.cssHooks[g];c=b.cssProps[g]||g;if(d===undefined)return i&&"get"in i&&(f=i.get(a,!1,e))!==undefined?f:h[c];if(typeof d=="number"&&isNaN(d)||d==null)return;typeof d=="number"&&!b.cssNumber[g]&&(d+="px");if(!i||!("set"in i)||(d=i.set(a,d))!==undefined)try{h[c]=d}catch(j){}},css:function(a,c,d){var e,f=b.camelCase(c),g=b.cssHooks[f];c=b.cssProps[f]||f;if(g&&"get"in g&&(e=g.get(a,!0,d))!==undefined)return e;if(bj)return bj(a,c,f)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]},camelCase:function(a){return a.replace(bc,bm)}}),b.curCSS=b.css,b.each(["height","width"],function(a,c){b.cssHooks[c]={get:function(a,d,e){var f;if(d){a.offsetWidth!==0?f=bn(a,c,e):b.swap(a,bg,function(){f=bn(a,c,e)});if(f<=0){f=bj(a,c,c),f==="0px"&&bl&&(f=bl(a,c,c));if(f!=null)return f===""||f==="auto"?"0px":f}return f<0||f==null?(f=a.style[c],f===""||f==="auto"?"0px":f):typeof f=="string"?f:f+"px"}},set:function(a,b){if(!be.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),b.support.opacity||(b.cssHooks.opacity={get:function(a,b){return bb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,c){var d=a.style;d.zoom=1;var e=b.isNaN(c)?"":"alpha(opacity="+c*100+")",f=d.filter||"";d.filter=ba.test(f)?f.replace(ba,e):d.filter+" "+e}}),a.defaultView&&a.defaultView.getComputedStyle&&(bk=function(a,c,d){var e,f,g;d=d.replace(bd,"-$1").toLowerCase();if(!(f=a.ownerDocument.defaultView))return undefined;if(g=f.getComputedStyle(a,null))e=g.getPropertyValue(d),e===""&&!b.contains(a.ownerDocument.documentElement,a)&&(e=b.style(a,d));return e}),a.documentElement.currentStyle&&(bl=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return!be.test(e)&&bf.test(e)&&(c=f.left,d=a.runtimeStyle.left,a.runtimeStyle.left=a.currentStyle.left,f.left=b==="fontSize"?"1em":e||0,e=f.pixelLeft+"px",f.left=c,a.runtimeStyle.left=d),e===""?"auto":e}),bj=bk||bl,b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(a){var c=a.offsetWidth,d=a.offsetHeight;return c===0&&d===0||!b.support.reliableHiddenOffsets&&(a.style.display||b.css(a,"display"))==="none"},b.expr.filters.visible=function(a){return!b.expr.filters.hidden(a)});var bo=b.now(),bp=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bq=/^(?:select|textarea)/i,br=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bs=/^(?:GET|HEAD|DELETE)$/,bt=/\[\]$/,bu=/\=\?(&|$)/,bv=/\?/,bw=/([?&])_=[^&]*/,bx=/^(\w+:)?\/\/([^\/?#]+)/,by=/%20/g,bz=/#.*$/,bA=b.fn.load;b.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bA)return bA.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(b.isFunction(c)?(d=c,c=null):typeof c=="object"&&(c=b.param(c,b.ajaxSettings.traditional),g="POST"));var h=this;return b.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,c){(c==="success"||c==="notmodified")&&h.html(f?b("<div>").append(a.responseText.replace(bp,"")).find(f):a.responseText),d&&h.each(d,[a.responseText,c,a])}}),this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bq.test(this.nodeName)||br.test(this.type))}).map(function(a,c){var d=b(this).val();return d==null?null:b.isArray(d)?b.map(d,function(a,b){return{name:c.name,value:a}}):{name:c.name,value:d}}).get()}}),b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){b.fn[c]=function(a){return this.bind(c,a)}}),b.extend({get:function(a,c,d,e){return b.isFunction(c)&&(e=e||d,d=c,c=null),b.ajax({type:"GET",url:a,data:c,success:d,dataType:e})},getScript:function(a,c){return b.get(a,null,c,"script")},getJSON:function(a,c,d){return b.get(a,c,d,"json")},post:function(a,c,d,e){return b.isFunction(c)&&(e=e||d,d=c,c={}),b.ajax({type:"POST",url:a,data:c,success:d,dataType:e})},ajaxSetup:function(a){b.extend(b.ajaxSettings,a)},ajaxSettings:{url:location.href,global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(c){var d=b.extend(!0,{},b.ajaxSettings,c),e,f,g,h=d.type.toUpperCase(),i=bs.test(h);d.url=d.url.replace(bz,""),d.context=c&&c.context!=null?c.context:d,d.data&&d.processData&&typeof d.data!="string"&&(d.data=b.param(d.data,d.traditional));if(d.dataType==="jsonp"){if(h==="GET")bu.test(d.url)||(d.url+=(bv.test(d.url)?"&":"?")+(d.jsonp||"callback")+"=?");else if(!d.data||!bu.test(d.data))d.data=(d.data?d.data+"&":"")+(d.jsonp||"callback")+"=?";d.dataType="json"}if(d.dataType==="json"&&(d.data&&bu.test(d.data)||bu.test(d.url))){e=d.jsonpCallback||"jsonp"+bo++,d.data&&(d.data=(d.data+"").replace(bu,"="+e+"$1")),d.url=d.url.replace(bu,"="+e+"$1"),d.dataType="script";var j=window[e];window[e]=function(a){if(b.isFunction(j))j(a);else{window[e]=undefined;try{delete window[e]}catch(c){}}g=a,b.handleSuccess(d,s,f,g),b.handleComplete(d,s,f,g),o&&o.removeChild(p)}}d.dataType==="script"&&d.cache===null&&(d.cache=!1);if(d.cache===!1&&i){var k=b.now(),l=d.url.replace(bw,"$1_="+k);d.url=l+(l===d.url?(bv.test(d.url)?"&":"?")+"_="+k:"")}d.data&&i&&(d.url+=(bv.test(d.url)?"&":"?")+d.data),d.global&&b.active++===0&&b.event.trigger("ajaxStart");var m=bx.exec(d.url),n=m&&(m[1]&&m[1].toLowerCase()!==location.protocol||m[2].toLowerCase()!==location.host);if(d.dataType==="script"&&h==="GET"&&n){var o=a.getElementsByTagName("head")[0]||a.documentElement,p=a.createElement("script");d.scriptCharset&&(p.charset=d.scriptCharset),p.src=d.url;if(!e){var q=!1;p.onload=p.onreadystatechange=function(){!q&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(q=!0,b.handleSuccess(d,s,f,g),b.handleComplete(d,s,f,g),p.onload=p.onreadystatechange=null,o&&p.parentNode&&o.removeChild(p))}}return o.insertBefore(p,o.firstChild),undefined}var r=!1,s=d.xhr();if(!s)return;d.username?s.open(h,d.url,d.async,d.username,d.password):s.open(h,d.url,d.async);try{(d.data!=null&&!i||c&&c.contentType)&&s.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(b.lastModified[d.url]&&s.setRequestHeader("If-Modified-Since",b.lastModified[d.url]),b.etag[d.url]&&s.setRequestHeader("If-None-Match",b.etag[d.url])),n||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Accept",d.dataType&&d.accepts[d.dataType]?d.accepts[d.dataType]+", */*; q=0.01":d.accepts._default)}catch(t){}if(d.beforeSend&&d.beforeSend.call(d.context,s,d)===!1)return d.global&&b.active--===1&&b.event.trigger("ajaxStop"),s.abort(),!1;d.global&&b.triggerGlobal(d,"ajaxSend",[s,d]);var u=s.onreadystatechange=function(a){if(!s||s.readyState===0||a==="abort")r||b.handleComplete(d,s,f,g),r=!0,s&&(s.onreadystatechange=b.noop);else if(!r&&s&&(s.readyState===4||a==="timeout")){r=!0,s.onreadystatechange=b.noop,f=a==="timeout"?"timeout":b.httpSuccess(s)?d.ifModified&&b.httpNotModified(s,d.url)?"notmodified":"success":"error";var c;if(f==="success")try{g=b.httpData(s,d.dataType,d)}catch(h){f="parsererror",c=h}f==="success"||f==="notmodified"?e||b.handleSuccess(d,s,f,g):b.handleError(d,s,f,c),e||b.handleComplete(d,s,f,g),a==="timeout"&&s.abort(),d.async&&(s=null)}};try{var v=s.abort;s.abort=function(){s&&Function.prototype.call.call(v,s),u("abort")}}catch(w){}d.async&&d.timeout>0&&setTimeout(function(){s&&!r&&u("timeout")},d.timeout);try{s.send(i||d.data==null?null:d.data)}catch(x){b.handleError(d,s,null,x),b.handleComplete(d,s,f,g)}return d.async||u(),s},param:function(a,c){var d=[],e=function(a,c){c=b.isFunction(c)?c():c,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};c===undefined&&(c=b.ajaxSettings.traditional);if(b.isArray(a)||a.jquery)b.each(a,function(){e(this.name,this.value)});else for(var f in a)bB(f,a[f],c,e);return d.join("&").replace(by,"+")}}),b.extend({active:0,lastModified:{},etag:{},handleError:function(a,c,d,e){a.error&&a.error.call(a.context,c,d,e),a.global&&b.triggerGlobal(a,"ajaxError",[c,a,e])},handleSuccess:function(a,c,d,e){a.success&&a.success.call(a.context,e,d,c),a.global&&b.triggerGlobal(a,"ajaxSuccess",[c,a])},handleComplete:function(a,c,d){a.complete&&a.complete.call(a.context,c,d),a.global&&b.triggerGlobal(a,"ajaxComplete",[c,a]),a.global&&b.active--===1&&b.event.trigger("ajaxStop")},triggerGlobal:function(a,c,d){(a.context&&a.context.url==null?b(a.context):b.event).trigger(c,d)},httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223}catch(b){}return!1},httpNotModified:function(a,c){var d=a.getResponseHeader("Last-Modified"),e=a.getResponseHeader("Etag");return d&&(b.lastModified[c]=d),e&&(b.etag[c]=e),a.status===304},httpData:function(a,c,d){var e=a.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?a.responseXML:a.responseText;return f&&g.documentElement.nodeName==="parsererror"&&b.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),typeof g=="string"&&(c==="json"||!c&&e.indexOf("json")>=0?g=b.parseJSON(g):(c==="script"||!c&&e.indexOf("javascript")>=0)&&b.globalEval(g)),g}}),window.ActiveXObject&&(b.ajaxSettings.xhr=function(){if(window.location.protocol!=="file:")try{return new window.XMLHttpRequest}catch(a){}try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}),b.support.ajax=!!b.ajaxSettings.xhr();var bC={},bD=/^(?:toggle|show|hide)$/,bE=/^([+\-]=)?([\d+.\-]+)(.*)$/,bF,bG=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];b.fn.extend({show:function(a,c,d){var e,f;if(a||a===0)return this.animate(bH("show",3),a,c,d);for(var g=0,h=this.length;g<h;g++)e=this[g],f=e.style.display,!b.data(e,"olddisplay")&&f==="none"&&(f=e.style.display=""),f===""&&b.css(e,"display")==="none"&&b.data(e,"olddisplay",bI(e.nodeName));for(g=0;g<h;g++){e=this[g],f=e.style.display;if(f===""||f==="none")e.style.display=b.data(e,"olddisplay")||""}return this},hide:function(a,c,d){if(a||a===0)return this.animate(bH("hide",3),a,c,d);for(var e=0,f=this.length;e<f;e++){var g=b.css(this[e],"display");g!=="none"&&b.data(this[e],"olddisplay",g)}for(e=0;e<f;e++)this[e].style.display="none";return this},_toggle:b.fn.toggle,toggle:function(a,c,d){var e=typeof a=="boolean";return b.isFunction(a)&&b.isFunction(c)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var c=e?a:b(this).is(":hidden");b(this)[c?"show":"hide"]()}):this.animate(bH("toggle",3),a,c,d),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,c,d,e){var f=b.speed(c,d,e);return b.isEmptyObject(a)?this.each(f.complete):this[f.queue===!1?"each":"queue"](function(){var c=b.extend({},f),d,e=this.nodeType===1,g=e&&b(this).is(":hidden"),h=this;for(d in a){var i=b.camelCase(d);d!==i&&(a[i]=a[d],delete a[d],d=i);if(a[d]==="hide"&&g||a[d]==="show"&&!g)return c.complete.call(this);if(e&&(d==="height"||d==="width")){c.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none")if(!b.support.inlineBlockNeedsLayout)this.style.display="inline-block";else{var j=bI(this.nodeName);j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)}}b.isArray(a[d])&&((c.specialEasing=c.specialEasing||{})[d]=a[d][1],a[d]=a[d][0])}return c.overflow!=null&&(this.style.overflow="hidden"),c.curAnim=b.extend({},a),b.each(a,function(d,e){var f=new b.fx(h,c,d);if(bD.test(e))f[e==="toggle"?g?"show":"hide":e](a);else{var i=bE.exec(e),j=f.cur()||0;if(i){var k=parseFloat(i[2]),l=i[3]||"px";l!=="px"&&(b.style(h,d,(k||1)+l),j=(k||1)/f.cur()*j,b.style(h,d,j+l)),i[1]&&(k=(i[1]==="-="?-1:1)*k+j),f.custom(j,k,l)}else f.custom(j,e,"")}}),!0})},stop:function(a,c){var d=b.timers;return a&&this.queue([]),this.each(function(){for(var a=d.length-1;a>=0;a--)d[a].elem===this&&(c&&d[a](!0),d.splice(a,1))}),c||this.dequeue(),this}}),b.each({slideDown:bH("show",1),slideUp:bH("hide",1),slideToggle:bH("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){b.fn[a]=function(a,b,d){return this.animate(c,a,b,d)}}),b.extend({speed:function(a,c,d){var e=a&&typeof a=="object"?b.extend({},a):{complete:d||!d&&c||b.isFunction(a)&&a,duration:a,easing:d&&c||c&&!b.isFunction(c)&&c};return e.duration=b.fx.off?0:typeof e.duration=="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default,e.old=e.complete,e.complete=function(){e.queue!==!1&&b(this).dequeue(),b.isFunction(e.old)&&e.old.call(this)},e},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),b.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a=parseFloat(b.css(this.elem,this.prop));return a&&a>-1e4?a:0}return this.elem[this.prop]},custom:function(a,c,d){function g(a){return e.step(a)}var e=this,f=b.fx;this.startTime=b.now(),this.start=a,this.end=c,this.unit=d||this.unit||"px",this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&b.timers.push(g)&&!bF&&(bF=setInterval(f.tick,f.interval))},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var c=b.now(),d=!0;if(a||c>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var e in this.options.curAnim)this.options.curAnim[e]!==!0&&(d=!1);if(d){if(this.options.overflow!=null&&!b.support.shrinkWrapBlocks){var f=this.elem,g=this.options;b.each(["","X","Y"],function(a,b){f.style["overflow"+b]=g.overflow[a]})}this.options.hide&&b(this.elem).hide();if(this.options.hide||this.options.show)for(var h in this.options.curAnim)b.style(this.elem,h,this.options.orig[h]);this.options.complete.call(this.elem)}return!1}var i=c-this.startTime;this.state=i/this.options.duration;var j=this.options.specialEasing&&this.options.specialEasing[this.prop],k=this.options.easing||(b.easing.swing?"swing":"linear");return this.pos=b.easing[j||k](this.state,i,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},b.extend(b.fx,{tick:function(){var a=b.timers;for(var c=0;c<a.length;c++)a[c]()||a.splice(c--,1);a.length||b.fx.stop()},interval:13,stop:function(){clearInterval(bF),bF=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){b.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),b.expr&&b.expr.filters&&(b.expr.filters.animated=function(a){return b.grep(b.timers,function(b){return a===b.elem}).length});var bJ=/^t(?:able|d|h)$/i,bK=/^(?:body|html)$/i;"getBoundingClientRect"in a.documentElement?b.fn.offset=function(a){var c=this[0],d;if(a)return this.each(function(c){b.offset.setOffset(this,a,c)});if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return b.offset.bodyOffset(c);try{d=c.getBoundingClientRect()}catch(e){}var f=c.ownerDocument,g=f.documentElement;if(!d||!b.contains(g,c))return d||{top:0,left:0};var h=f.body,i=bL(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||b.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||b.support.boxModel&&g.scrollLeft||h.scrollLeft,n=d.top+l-j,o=d.left+m-k;return{top:n,left:o}}:b.fn.offset=function(a){var c=this[0];if(a)return this.each(function(c){b.offset.setOffset(this,a,c)});if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return b.offset.bodyOffset(c);b.offset.initialize();var d,e=c.offsetParent,f=c,g=c.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(c,null):c.currentStyle,l=c.offsetTop,m=c.offsetLeft;while((c=c.parentNode)&&c!==i&&c!==h){if(b.offset.supportsFixedPosition&&k.position==="fixed")break;d=j?j.getComputedStyle(c,null):c.currentStyle,l-=c.scrollTop,m-=c.scrollLeft,c===e&&(l+=c.offsetTop,m+=c.offsetLeft,b.offset.doesNotAddBorder&&(!b.offset.doesAddBorderForTableAndCells||!bJ.test(c.nodeName))&&(l+=parseFloat(d.borderTopWidth)||0,m+=parseFloat(d.borderLeftWidth)||0),f=e,e=c.offsetParent),b.offset.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(l+=parseFloat(d.borderTopWidth)||0,m+=parseFloat(d.borderLeftWidth)||0),k=d}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return b.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},b.offset={initialize:function(){var c=a.body,d=a.createElement("div"),e,f,g,h,i=parseFloat(b.css(c,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(d.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),d.innerHTML=j,c.insertBefore(d,c.firstChild),e=d.firstChild,f=e.firstChild,h=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=f.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,f.style.position="fixed",f.style.top="20px",this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15,f.style.position=f.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=c.offsetTop!==i,c.removeChild(d),c=d=e=f=g=h=null,b.offset.initialize=b.noop},bodyOffset:function(a){var c=a.offsetTop,d=a.offsetLeft;return b.offset.initialize(),b.offset.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(b.css(a,"marginTop"))||0,d+=parseFloat(b.css(a,"marginLeft"))||0),{top:c,left:d}},setOffset:function(a,c,d){var e=b.css(a,"position");e==="static"&&(a.style.position="relative");var f=b(a),g=f.offset(),h=b.css(a,"top"),i=b.css(a,"left"),j=e==="absolute"&&b.inArray("auto",[h,i])>-1,k={},l={},m,n;j&&(l=f.position()),m=j?l.top:parseInt(h,10)||0,n=j?l.left:parseInt(i,10)||0,b.isFunction(c)&&(c=c.call(a,d,g)),c.top!=null&&(k.top=c.top-g.top+m),c.left!=null&&(k.left=c.left-g.left+n),"using"in c?c.using.call(a,k):f.css(k)}},b.fn.extend({position:function(){if(!this[0])return null;var a=this[0],c=this.offsetParent(),d=this.offset(),e=bK.test(c[0].nodeName)?{top:0,left:0}:c.offset();return d.top-=parseFloat(b.css(a,"marginTop"))||0,d.left-=parseFloat(b.css(a,"marginLeft"))||0,e.top+=parseFloat(b.css(c[0],"borderTopWidth"))||0,e.left+=parseFloat(b.css(c[0],"borderLeftWidth"))||0,{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){var c=this.offsetParent||a.body;while(c&&!bK.test(c.nodeName)&&b.css(c,"position")==="static")c=c.offsetParent;return c})}}),b.each(["Left","Top"],function(a,c){var d="scroll"+c;b.fn[d]=function(c){var e=this[0],f;return e?c!==undefined?this.each(function(){f=bL(this),f?f.scrollTo(a?b(f).scrollLeft():c,a?c:b(f).scrollTop()):this[d]=c}):(f=bL(e),f?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:b.support.boxModel&&f.document.documentElement[d]||f.document.body[d]:e[d]):null}}),b.each(["Height","Width"],function(a,c){var d=c.toLowerCase();b.fn["inner"+c]=function(){return this[0]?parseFloat(b.css(this[0],d,"padding")):null},b.fn["outer"+c]=function(a){return this[0]?parseFloat(b.css(this[0],d,a?"margin":"border")):null},b.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(b.isFunction(a))return this.each(function(c){var e=b(this);e[d](a.call(this,c,e[d]()))});if(b.isWindow(e))return e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+c]||e.document.body["client"+c];if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===undefined){var f=b.css(e,d),g=parseFloat(f);return b.isNaN(g)?f:g}return this.css(d,typeof a=="string"?a:a+"px")}}),window.jQuery=b,window.$=$;var bM=!1;return $(window).load(function(){bM=!0}),$.fn.windowLoaded=function(a){bM?a.call(this):this.load(a)},b.fn.doOnce=function(a,b){var c=this;return c.length&&(b?G.req(b,function(){a.apply(c,arguments)}):a.apply(c)),this},b}),G.def("cookies",{get:function(a){"use strict";if(document.cookie.length>0){var b,c=document.cookie.indexOf(a+"=");if(c!=-1)return c=c+a.length+1,b=document.cookie.indexOf(";",c),b==-1&&(b=document.cookie.length),unescape(document.cookie.substring(c,b))}return""},set:function(a,b,c,d){return"use strict",document.cookie=a+"="+escape(b)+(c==null?"":";expires="+c.toGMTString())+";path="+(d||"/"),this},remove:function(a,b){"use strict";var c=new Date;c.setTime(c.getTime()-1);var d=this.get(a);d!=null&&(document.cookie=a+"="+d+";expires="+c.toGMTString()+";path="+(b||"/"))}}),G.def("api",["jQuery","cookies"],function(a,b){"use strict",a.ajaxSettings.traditional=!0;var c,d=window.location.host,e=window.url_re_signin||"",f=window.client_id||32353;c=b.get("_"+f+"_access_token");var g=Array.prototype.slice,h=function(a){return g.call(a,0)},i=function(a,b){return function(){return a.apply(this,b.apply(this,arguments)||arguments)}},j=function(a){if(c){a=a||{};try{a.access_token=c}catch(b){return a}}return a};return a.ajax=i(a.ajax,function(a){a.data=j(a.data)}),a(document).ajaxError(function(b,c,d,f){var g=a.parseJSON(c.responseText);c.status===401&&g.error_code===200004&&e&&(location=e)}),{checkToken:function(){d=window.location.host,c=b.get("_"+f+"_access_token")},getToken:function(){return c}}}),G.def("tab",function(){return"use strict",function(a,b,c,d,e,f,g){var h=$(c).children(d),i=$(a),j=i.find(b),k=0;return j.eq(0).addClass(e),i.delegate(b,"click",function(a){a.preventDefault();var b=j.index(this);if(k===b)return;k=b;var c=$(this),d=h.eq(k);if(f&&!f(d,c))return;j.removeClass(e),c.addClass(e),h.hide(),d.show(),g&&g(d,c)}),{current:function(){return k},set:function(a){j.eq(a).click(),k=a}}}}),G.def("UEditor",["UBB","Overlay","UBBUtils","at","MultipleUploader","api","tab"],function(a,b,c,d,e,f,g){function q(a,b,c){var d;return b=b.toLowerCase(),(d=a.__allListeners||c&&(a.__allListeners={}))&&(d[b]||c&&(d[b]=[]))}function s(a,b,c,d,e,f){var g=d&&a[b],h;!g&&(g=a[c]);while(!g&&(h=(h||a).parentNode)){if(h.tagName=="BODY"||f&&!f(h))return null;g=h[c]}return g&&e&&!e(g)?s(g,b,c,!1,e):g}(function(){var a="/";window.UEDITOR_CONFIG={UEDITOR_HOME_URL:a,UEDITOR_CSSIMAGE_URL:a+"skin/imgs/UEditor/",lang:"zh-cn",langPath:a+"lang/",toolbars:[["Bold","Italic","Link","InsertImage","InsertVideo","blockquote","InsertUnorderedList","InsertOrderedList","insertMathJax","insertCode","FullScreen"]],labelMap:{fullscreen:"",insertunorderedlist:"",insertorderedlist:"",link:"",bold:"",italic:"",insertimage:"",insertvideo:"",insertcode:"",insertmathjax:""},paragraph:{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""},webAppKey:"",isShow:!0,initialContent:"",autoClearinitialContent:!1,iframeCssUrl:G.staticFile("/skin/lib/Editor-iframe.css"),textarea:"editorValue",focus:!1,minFrameHeight:"300",autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:900,imagePopup:!0,pasteplain:!1,customstyle:[{tag:"h1",name:"tc",label:"",style:"border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",label:"",style:"border-bottom:#ccc 2px solid;padding:0 4px 0 0;margin:0 0 10px 0;"},{tag:"span",name:"im",label:"",style:"font-style:italic;font-weight:bold;color:#000"},{tag:"span",name:"hi",label:"",style:"font-style:italic;font-weight:bold;color:rgb(51, 153, 204)"}],wordCount:!0,tabSize:"4",tabNode:"&nbsp;",elementPathEnabled:!0,maxUndoCount:"20",maxInputCount:"20",autoHeightEnabled:!0,autoFloatEnabled:!0}})(),UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var h=window.baidu||{};window.baidu=h,window.UE=h.editor={},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE.version="1.2.3.0";var i=UE.dom={},j=UE.browser=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!!window.ActiveXObject,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;var d=0;c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie9Compat=document.documentMode==9,c.ie8=!!document.documentMode,c.ie8Compat=document.documentMode==8,c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7,c.ie6Compat=d<7||c.quirks);if(c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),d=e[0]*1e4+(e[1]||0)*100+(e[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp.$1||RegExp.$2)),c.opera&&(d=parseFloat(b.version())),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c}(),k=j.ie,l=j.webkit,m=j.gecko,n=j.opera,o=UE.utils={each:function(a,b,c){if(a==null)return;if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!1)return!1}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!1)return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)if(!c||!a.hasOwnProperty(d))a[d]=b[d];return a},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isString:function(a){return typeof a=="string"||a.constructor==String},inherits:function(a,b){var c=a.prototype,d=o.makeInstance(b.prototype);return o.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){for(var d=c||0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},findNode:function(a,b,c){for(var d=0,e;e=a[d++];)if(c?c(e):this.indexOf(b,e.tagName.toLowerCase())!=-1)return e},removeItem:function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=o.isArray(a)?a:a.split(",");for(var b=0,c,d={};c=a[b++];)d[c.toUpperCase()]=d[c]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">]/g,function(a){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">"}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={"float":a.cssFloat!=undefined?"cssFloat":a.styleFloat!=undefined?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){var a={};return function(b,c,d){var e=a[c.src||c.href];if(e){o.isArray(e.funs)&&(e.ready?d():a[c.src||c.href].funs.push(d));return}a[c.src||c.href]=d?{funs:[d]}:1;if(!b.body){b.write('<script src="'+c.src+'"></script>');return}if(c.id&&b.getElementById(c.id))return;var f=b.createElement(c.tag);delete c.tag;for(var g in c)f.setAttribute(g,c[g]);f.onload=f.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){e=a[c.src||c.href];if(e.funs){e.ready=1;for(var b;b=e.funs.pop();)b()}f.onload=f.onreadystatechange=null}},b.getElementsByTagName("head")[0].appendChild(f)}}(),isEmptyObject:function(a){for(var b in a)return!1;return!0},isFunction:function(a){return"[object Function]"==Object.prototype.toString.call(a)},fixColor:function(a,b){if(/color/i.test(a)&&/rgba?/.test(b)){var c=b.split(",");if(c.length>3)return"";b="#";for(var d=0,e;e=c[d++];)e=parseInt(e.replace(/[^\d]/gi,""),10).toString(16),b+=e.length==1?"0"+e:e;b=b.toUpperCase()}return b},optCss:function(a){function e(a,b){if(!a)return"";var c=a.top,d=a.bottom,e=a.left,f=a.right,g="";if(!c||!e||!d||!f)for(var h in a)g+=";"+b+"-"+h+":"+a[h]+";";else g+=";"+b+":"+(c==d&&d==e&&e==f?c:c==d&&e==f?c+" "+e:e==f?c+" "+e+" "+d:c+" "+f+" "+d+" "+e)+";";return g}var b,c,d;return a=a.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,d,e,f){if(f.split(" ").length==1)switch(d){case"padding":return!b&&(b={}),b[e]=f,"";case"margin":return!c&&(c={}),c[e]=f,"";case"border":return f=="initial"?"":a}return a}),a+=e(b,"padding")+e(c,"margin"),a.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},domReady:function(){function c(){a=!0;for(var c;c=b.pop();)c()}var a=!1,b=[];return function(d){if(document.readyState==="complete")return d&&setTimeout(d,1);d&&b.push(d),a&&c(),j.ie?(function(){if(a)return;try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}c()}(),window.attachEvent("onload",c)):(document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),c()},!1),window.addEventListener("load",c,!1))}}()};o.domReady();var p=UE.EventBase=function(){};p.prototype={addListener:function(a,b){a=o.trim(a).split(" ");for(var c=0,d;d=a[c++];)q(this,d,!0).push(b)},removeListener:function(a,b){a=o.trim(a).split(" ");for(var c=0,d;d=a[c++];)o.removeItem(q(this,d)||[],b)},fireEvent:function(a){a=o.trim(a).split(" ");for(var b=0,c;c=a[b++];){var d=q(this,c),e,f,g;if(d){g=d.length;while(g--)f=d[g].apply(this,arguments),f!==undefined&&(e=f)}if(f=this["on"+c.toLowerCase()])e=f.apply(this,arguments)}return e}};var r=i.dtd=function(){function a(a){for(var b in a)a[b.toUpperCase()]=a[b];return a}function b(a){var b=arguments;for(var c=1;c<b.length;c++){var d=b[c];for(var e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a}var c=a({isindex:1,fieldset:1}),d=a({input:1,button:1,select:1,textarea:1,label:1}),e=b(a({a:1}),d),f=b({iframe:1},e),g=a({hr:1,ul:1,menu:1,div:1,blockquote:1,blockindent:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),h=a({ins:1,del:1,script:1,style:1}),i=b(a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),h),j=b(a({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),i),k=b(a({p:1}),j),l=b(a({iframe:1}),j,d),m=a({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,blockindent:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),n=b(a({a:0}),l),o=a({tr:1}),p=a({"#":1}),q=b(a({param:1}),m),r=b(a({form:1}),c,f,g,k),s=a({li:1}),t=a({style:1,script:1}),u=a({base:1,link:1,meta:1,title:1}),v=b(u,t),w=a({head:1,body:1}),x=a({html:1}),y=a({address:1,blockquote:1,blockindent:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),z=a({area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,embed:1});return a({$nonBodyContent:b(x,w,u),$block:y,$inline:n,$body:b(a({script:1,style:1}),y),$cdata:a({script:1,style:1}),$empty:z,$nonChild:a({iframe:1,textarea:1}),$listItem:a({dd:1,dt:1,li:1}),$list:a({ul:1,ol:1,dl:1}),$isNotEmpty:a({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}),$removeEmpty:a({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:a({p:1,div:1}),$tableContent:a({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:a({pre:1,script:1,style:1,textarea:1}),html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:a({td:1,th:1}),img:{},embed:{},colgroup:a({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:b(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:b(c,f,g,k),select:a({optgroup:1,option:1}),font:n,ins:n,menu:s,abbr:n,label:n,table:a({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:a({"#":1,br:1}),hr:n,dt:n,sub:n,optgroup:a({option:1}),param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:b(a({area:1,form:1,p:1}),c,h,g),applet:q,dl:a({dt:1,dd:1}),del:n,isindex:{},fieldset:b(a({legend:1}),m),thead:o,ul:s,acronym:n,b:n,a:b(a({a:1}),l),blockquote:b(a({td:1,tr:1,tbody:1,li:1}),r),blockindent:b(a({td:1,tr:1,tbody:1,li:1}),r),caption:n,i:n,u:n,tbody:o,s:n,address:b(f,k),tt:n,legend:n,q:n,pre:b(i,e),p:b(a({a:1}),n),em:n,dfn:n})}(),t=k&&j.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},u=o.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),v=i.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:k&&j.version=="6"?"﻿":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},filterNodeList:function(a,b,c){var d=[];if(!o.isFunction(b)){var e=b;b=function(a){return o.indexOf(o.isArray(e)?e:e.split(" "),a.tagName.toLowerCase())!=-1}}return o.each(a,function(a){b(a)&&d.push(a)}),d.length==0?null:d.length==1||!c?d[0]:d},getPosition:function(a,b){if(a===b)return 0;var c,d=[a],e=[b];c=a;while(c=c.parentNode){if(c===b)return 10;d.push(c)}c=b;while(c=c.parentNode){if(c===a)return 20;e.push(c)}d.reverse(),e.reverse();if(d[0]!==e[0])return 1;var f=-1;while(f++,d[f]===e[f]);a=d[f],b=e[f];while(a=a.nextSibling)if(a===b)return 4;return 2},getNodeIndex:function(a,b){var c=a,d=0;while(c=c.previousSibling){if(b&&c.nodeType==3)continue;d++}return d},inDoc:function(a,b){while(a=a.parentNode)if(a===b)return!0;return!1},findParent:function(a,b,c){if(!v.isBody(a)){a=c?a:a.parentNode;while(a){if(!b||b(a)||this.isBody(a))return b&&!b(a)&&this.isBody(a)?null:a;a=a.parentNode}}return null},findParentByTagName:function(a,b,c,d){if(a&&a.nodeType&&!this.isBody(a)&&(a.nodeType==1||a.nodeType)){b=o.listToMap(o.isArray(b)?b:[b]),a=a.nodeType==3||!c?a.parentNode:a;while(a&&a.tagName&&a.nodeType!=9){if(d&&d(a))break;if(b[a.tagName])return a;a=a.parentNode}}return null},findParents:function(a,b,c,d){var e=b&&(c&&c(a)||!c)?[a]:[];while(a=v.findParent(a,c))e.push(a);return d?e:e.reverse()},insertAfter:function(a,b){return a.parentNode.insertBefore(b,a.nextSibling)},remove:function(a,b){var c=a.parentNode,d;if(c){if(b&&a.hasChildNodes())while(d=a.firstChild)c.insertBefore(d,a);c.removeChild(a)}return a},getNextDomNode:function(a,b,c,d){return s(a,"firstChild","nextSibling",b,c,d)},isBookmarkNode:function(a){return a.nodeType==1&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(a,b){if(a===b)return a;var c=[a],d=[b],e=a,f=-1;while(e=e.parentNode){if(e===b)return e;c.push(e)}e=b;while(e=e.parentNode){if(e===a)return e;d.push(e)}c.reverse(),d.reverse();while(f++,c[f]===d[f]);return f==0?null:c[f-1]},clearEmptySibling:function(a,b,c){function d(a,b){var c;while(a&&!v.isBookmarkNode(a)&&(v.isEmptyInlineElement(a)||!(new RegExp("[^\t\n\r"+v.fillChar+"]")).test(a.nodeValue)))c=a[b],v.remove(a),a=c}!b&&d(a.nextSibling,"nextSibling"),!c&&d(a.previousSibling,"previousSibling")},split:function(a,b){var c=a.ownerDocument;if(j.ie&&b==a.nodeValue.length){var d=c.createTextNode("");return v.insertAfter(a,d)}var e=a.splitText(b);if(j.ie8){var f=c.createTextNode("");v.insertAfter(e,f),v.remove(f)}return e},isWhitespace:function(a){return!(new RegExp("[^ \t\n\r"+v.fillChar+"]")).test(a.nodeValue)},getXY:function(a){var b=0,c=0;while(a.offsetParent)c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{x:b,y:c}},on:function(a,b,c){var d=o.isArray(b)?b:[b],e=d.length;if(e)while(e--){b=d[e];if(a.addEventListener)a.addEventListener(b,c,!1);else{c._d||(c._d={});var f=b+c.toString();c._d[f]||(c._d[f]=function(a){return c.call(a.srcElement,a||window.event)},a.attachEvent("on"+b,c._d[f]))}}a=null},un:function(a,b,c){var d=o.isArray(b)?b:[b],e=d.length;if(e)while(e--){b=d[e];if(a.removeEventListener)a.removeEventListener(b,c,!1);else{var f=b+c.toString();a.detachEvent("on"+b,c._d?c._d[f]:c),c._d&&c._d[f]&&delete c._d[f]}}},isSameElement:function(a,b){if(a.tagName!=b.tagName)return 0;var c=a.attributes,d=b.attributes;if(!k&&c.length!=d.length)return 0;var e,f,g=0,h=0;for(var i=0;e=c[i++];){if(e.nodeName=="style"){e.specified&&g++;if(v.isSameStyle(a,b))continue;return 0}if(k)if(e.specified)g++,f=d.getNamedItem(e.nodeName);else continue;else f=b.attributes[e.nodeName];if(!f.specified||e.nodeValue!=f.nodeValue)return 0}if(k){for(i=0;f=d[i++];)f.specified&&h++;if(g!=h)return 0}return 1},isSameStyle:function(a,b){var c=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),d=b.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(j.opera){c=a.style,d=b.style;if(c.length!=d.length)return 0;for(var e in c){if(/^(\d+|csstext)$/i.test(e))continue;if(c[e]!=d[e])return 0}return 1}if(!c||!d)return c==d?1:0;c=c.split(";"),d=d.split(";");if(c.length!=d.length)return 0;for(var f=0,g;g=c[f++];)if(o.indexOf(d,g)==-1)return 0;return 1},isBlockElm:function(a){return a.nodeType==1&&(r.$block[a.tagName]||u[v.getComputedStyle(a,"display")])&&!r.$nonChild[a.tagName]},isBody:function(a){return a&&a.nodeType==1&&a.tagName.toLowerCase()=="body"},breakParent:function(a,b){var c,d=a,e=a,f,g;do{d=d.parentNode,f?(c=d.cloneNode(!1),c.appendChild(f),f=c,c=d.cloneNode(!1),c.appendChild(g),g=c):(f=d.cloneNode(!1),g=f.cloneNode(!1));while(c=e.previousSibling)f.insertBefore(c,f.firstChild);while(c=e.nextSibling)g.appendChild(c);e=d}while(b!==d);return c=b.parentNode,c.insertBefore(f,b),c.insertBefore(g,b),c.insertBefore(a,g),v.remove(b),a},isEmptyInlineElement:function(a){if(a.nodeType!=1||!r.$removeEmpty[a.tagName])return 0;a=a.firstChild;while(a){if(v.isBookmarkNode(a))return 0;if(a.nodeType==1&&!v.isEmptyInlineElement(a)||a.nodeType==3&&!v.isWhitespace(a))return 0;a=a.nextSibling}return 1},trimWhiteTextNode:function(a){function b(b){var c;while((c=a[b])&&c.nodeType==3&&v.isWhitespace(c))a.removeChild(c)}b("firstChild"),b("lastChild")},mergChild:function(a,b,c){var d=v.getElementsByTagName(a,a.tagName.toLowerCase());for(var e=0,f;f=d[e++];){if(!f.parentNode||v.isBookmarkNode(f))continue;if(f.tagName.toLowerCase()=="span"){if(a===f.parentNode){v.trimWhiteTextNode(a);if(a.childNodes.length==1){a.style.cssText=f.style.cssText+";"+a.style.cssText,v.remove(f,!0);continue}}f.style.cssText=a.style.cssText+";"+f.style.cssText;if(c){var g=c.style;if(g){g=g.split(";");for(var h=0,i;i=g[h++];)f.style[o.cssStyleToDomStyle(i.split(":")[0])]=i.split(":")[1]}}v.isSameStyle(f,a)&&v.remove(f,!0);continue}v.isSameElement(a,f)&&v.remove(f,!0)}if(b=="span"){var j=v.getElementsByTagName(a,"a");for(var e=0,k;k=j[e++];)k.style.cssText=";"+a.style.cssText,k.style.textDecoration="underline"}},getElementsByTagName:function(a,b){var c=a.getElementsByTagName(b),d=[];for(var e=0,f;f=c[e++];)d.push(f);return d},mergToParent:function(a){var b=a.parentNode;while(b&&r.$removeEmpty[b.tagName]){if(b.tagName==a.tagName||b.tagName=="A"){v.trimWhiteTextNode(b);if(b.tagName=="SPAN"&&!v.isSameStyle(b,a)||b.tagName=="A"&&a.tagName=="SPAN"){if(b.childNodes.length>1||b!==a.parentNode){a.style.cssText=b.style.cssText+";"+a.style.cssText,b=b.parentNode;continue}b.style.cssText+=";"+a.style.cssText,b.tagName=="A"&&(b.style.textDecoration="underline")}if(b.tagName!="A"){b===a.parentNode&&v.remove(a,!0);break}}b=b.parentNode}},mergSibling:function(a,b,c){function d(a,b,c){var d;if((d=c[a])&&!v.isBookmarkNode(d)&&d.nodeType==1&&v.isSameElement(c,d)){while(d.firstChild)b=="firstChild"?c.insertBefore(d.lastChild,c.firstChild):c.appendChild(d.firstChild);v.remove(d)}}!b&&d("previousSibling","firstChild",a),!c&&d("nextSibling","lastChild",a)},unselectable:k||j.opera?function(a){a.onselectstart=function(){return!1},a.onclick=a.onkeyup=a.onkeydown=function(){return!1},a.unselectable="on",a.setAttribute("unselectable","on");for(var b=0,c;c=a.all[b++];)switch(c.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:c.unselectable="on",a.setAttribute("unselectable","on")}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(a,b){for(var c=0,d;d=b[c++];){d=t[d]||d;switch(d){case"className":a[d]="";break;case"style":a.style.cssText="",!j.ie&&a.removeAttributeNode(a.getAttributeNode("style"))}a.removeAttribute(d)}},creElm:function(a,b,c){return this.setAttributes(a.createElement(b),c)},setAttributes:function(a,b){for(var c in b){var d=b[c];switch(c){case"class":a.className=d;break;case"style":a.style.cssText=a.style.cssText+";"+d;break;case"innerHTML":a[c]=d;break;case"value":a.value=d;break;default:a.setAttribute(t[c]||c,d)}}return a},getComputedStyle:function(a,b){function c(a,b){return a=="font-size"&&/pt$/.test(b)&&(b=Math.round(parseFloat(b)/.75)+"px"),b}a.nodeType==3&&(a=a.parentNode);if(j.ie&&j.version<9&&b=="font-size"&&!a.style.fontSize&&!r.$empty[a.tagName]&&!r.$nonChild[a.tagName]){var d=a.ownerDocument.createElement("span");d.style.cssText="padding:0;border:0;font-family:simsun;",d.innerHTML=".",a.appendChild(d);var e=d.offsetHeight;return a.removeChild(d),d=null,e+"px"}try{var f=v.getStyle(a,b)||(window.getComputedStyle?v.getWindow(a).getComputedStyle(a,"").getPropertyValue(b):(a.currentStyle||a.style)[o.cssStyleToDomStyle(b)])}catch(g){return null}return c(b,o.fixColor(b,f))},removeClasses:function(a,b){b=o.isArray(b)?b:[b],a.className=(" "+a.className+" ").replace(new RegExp("(?:\\s+(?:"+b.join("|")+"))+\\s+","g")," ")},addClass:function(a,b){this.hasClass(a,b)||(a.className+=" "+b)},removeStyle:function(a,b){a.style[o.cssStyleToDomStyle(b)]="",a.style.cssText||v.removeAttributes(a,["style"])},hasClass:function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},getStyle:function(a,b){var c=a.style[o.cssStyleToDomStyle(b)];return o.fixColor(b,c)},setStyle:function(a,b,c){a.style[o.cssStyleToDomStyle(b)]=c},setStyles:function(a,b){for(var c in b)b.hasOwnProperty(c)&&v.setStyle(a,c,b[c])},removeDirtyAttr:function(a){for(var b=0,c,d=a.getElementsByTagName("*");c=d[b++];)c.removeAttribute("_moz_dirty");a.removeAttribute("_moz_dirty")},getChildCount:function(a,b){var c=0,d=a.firstChild;b=b||function(){return 1};while(d)b(d)&&c++,d=d.nextSibling;return c},isEmptyNode:function(a){return!a.firstChild||v.getChildCount(a,function(a){return!v.isBr(a)&&!v.isBookmarkNode(a)&&!v.isWhitespace(a)})==0},clearSelectedArr:function(a){var b;while(b=a.pop())v.removeAttributes(b,["class"])},scrollToView:function(a,b,c){var d=function(){var a=b.document,c=a.compatMode=="CSS1Compat";return{width:(c?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(c?a.documentElement.clientHeight:a.body.clientHeight)||0}},e=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},f=d().height,g=f*-1+c;g+=a.offsetHeight||0;var h=v.getXY(a);g+=h.y;var i=e(b).y;(g>i||g<i-f)&&b.scrollTo(0,g+(g<0?-20:20))},isBr:function(a){return a.nodeType==1&&a.tagName=="BR"},isFillChar:function(a){return a.nodeType==3&&!a.nodeValue.replace(new RegExp(v.fillChar),"").length},isStartInblock:function(a){var b=a.cloneRange(),c=0,d=b.startContainer,e;while(d&&v.isFillChar(d))e=d,d=d.previousSibling;e&&(b.setStartBefore(e),d=b.startContainer),d.nodeType==1&&v.isEmptyNode(d)&&b.startOffset==1&&b.setStart(d,0).collapse(!0);while(!b.startOffset){d=b.startContainer;if(v.isBlockElm(d)||v.isBody(d)){c=1;break}var f=b.startContainer.previousSibling,g;if(!f)b.setStartBefore(b.startContainer);else{while(f&&v.isFillChar(f))g=f,f=f.previousSibling;g?b.setStartBefore(g):b.setStartBefore(b.startContainer)}}return c&&!v.isBody(b.startContainer)?1:0},isEmptyBlock:function(a){var b=new RegExp("[ \t\r\n"+v.fillChar+"]","g");if(a[j.ie?"innerText":"textContent"].replace(b,"").length>0)return 0;for(var c in r.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(a,b){var c=parseInt(a.style.left)|0,d=parseInt(a.style.top)|0,e=a.getBoundingClientRect(),f=b.left-e.left,g=b.top-e.top;f&&(a.style.left=c+f+"px"),g&&(a.style.top=d+g+"px")},fillNode:function(a,b){var c=j.ie?a.createTextNode(v.fillChar):a.createElement("br");b.innerHTML="",b.appendChild(c)},moveChild:function(a,b,c){while(a.firstChild)c&&b.firstChild?b.insertBefore(a.lastChild,b.firstChild):b.appendChild(a.firstChild)},hasNoAttributes:function(a){return j.ie?/^<\w+\s*?>/.test(a.outerHTML):a.attributes.length==0},isCustomeNode:function(a){return a.nodeType==1&&a.getAttribute("_ue_custom_node_")},isTagNode:function(a,b){return a.nodeType==1&&a.tagName.toLowerCase()==b}},w=new RegExp(v.fillChar,"g");(function(){function d(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function e(a,b,c,e){return b.nodeType==1&&(r.$empty[b.tagName]||r.$nonChild[b.tagName])&&(c=v.getNodeIndex(b)+(a?0:1),b=b.parentNode),a?(e.startContainer=b,e.startOffset=c,e.endContainer||e.collapse(!0)):(e.endContainer=b,e.endOffset=c,e.startContainer||e.collapse(!1)),d(e),e}function f(a,b){var c=a.startContainer,d=a.endContainer,e=a.startOffset,f=a.endOffset,g=a.document,h=g.createDocumentFragment(),i,j;c.nodeType==1&&(c=c.childNodes[e]||(i=c.appendChild(g.createTextNode("")))),d.nodeType==1&&(d=d.childNodes[f]||(j=d.appendChild(g.createTextNode(""))));if(c===d&&c.nodeType==3)return h.appendChild(g.createTextNode(c.substringData(e,f-e))),b&&(c.deleteData(e,f-e),a.collapse(!0)),h;var k,l,m=h,n=v.findParents(c,!0),o=v.findParents(d,!0);for(var p=0;n[p]==o[p];)p++;for(var q=p,r;r=n[q];q++){k=r.nextSibling,r==c?i||(a.startContainer.nodeType==3?(m.appendChild(g.createTextNode(c.nodeValue.slice(e))),b&&c.deleteData(e,c.nodeValue.length-e)):m.appendChild(b?c:c.cloneNode(!0))):(l=r.cloneNode(!1),m.appendChild(l));while(k){if(k===d||k===o[q])break;r=k.nextSibling,m.appendChild(b?k:k.cloneNode(!0)),k=r}m=l}m=h,n[p]||(m.appendChild(n[p-1].cloneNode(!1)),m=m.firstChild);for(var q=p,s;s=o[q];q++){k=s.previousSibling,s==d?!j&&a.endContainer.nodeType==3&&(m.appendChild(g.createTextNode(d.substringData(0,f))),b&&d.deleteData(0,f)):(l=s.cloneNode(!1),m.appendChild(l));if(q!=p||!n[p])while(k){if(k===c)break;s=k.previousSibling,m.insertBefore(b?k:k.cloneNode(!0),m.firstChild),k=s}m=l}return b&&a.setStartBefore(o[p]?n[p]?o[p]:n[p-1]:o[p-1]).collapse(!0),i&&v.remove(i),j&&v.remove(j),h}function h(a,b){try{if(c&&v.inDoc(c,a))if(!c.nodeValue.replace(w,"").length){var d=c.parentNode;v.remove(c);while(d&&v.isEmptyInlineElement(d)&&!d.contains(b))c=d.parentNode,v.remove(d),d=c}else c.nodeValue=c.nodeValue.replace(w,"")}catch(e){}}function k(a,b){var c;a=a[b];while(a&&v.isFillChar(a))c=a[b],v.remove(a),a=c}var a=0,b=v.fillChar,c,g=i.Range=function(a){var b=this;b.startContainer=b.startOffset=b.endContainer=b.endOffset=null,b.document=a,b.collapsed=!0};g.prototype={cloneContents:function(){return this.collapsed?null:f(this,0)},deleteContents:function(){var a;return this.collapsed||f(this,1),j.webkit&&(a=this.startContainer,a.nodeType==3&&!a.nodeValue.length&&(this.setStartBefore(a).collapse(!0),v.remove(a))),this},extractContents:function(){return this.collapsed?null:f(this,2)},setStart:function(a,b){return e(!0,a,b,this)},setEnd:function(a,b){return e(!1,a,b,this)},setStartAfter:function(a){return this.setStart(a.parentNode,v.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,v.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,v.getNodeIndex(a)+1)},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},setEndBefore:function(a){return this.setEnd(a.parentNode,v.getNodeIndex(a))},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEnd(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},cloneRange:function(){var a=this,b=new g(a.document);return b.setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(a){var b=this;return a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0,b},shrinkBoundary:function(a){var b=this,c,d=b.collapsed;while(b.startContainer.nodeType==1&&(c=b.startContainer.childNodes[b.startOffset])&&c.nodeType==1&&!v.isBookmarkNode(c)&&!r.$empty[c.tagName]&&!r.$nonChild[c.tagName])b.setStart(c,0);if(d)return b.collapse(!0);if(!a)while(b.endContainer.nodeType==1&&b.endOffset>0&&(c=b.endContainer.childNodes[b.endOffset-1])&&c.nodeType==1&&!v.isBookmarkNode(c)&&!r.$empty[c.tagName]&&!r.$nonChild[c.tagName])b.setEnd(c,c.childNodes.length);return b},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer;return c===d?a&&c.nodeType==1&&this.startOffset==this.endOffset-1?c.childNodes[this.startOffset]:b&&c.nodeType==3?c.parentNode:c:v.getCommonAncestor(c,d)},trimBoundary:function(a){this.txtToElmBoundary();var b=this.startContainer,c=this.startOffset,d=this.collapsed,e=this.endContainer;if(b.nodeType==3){if(c==0)this.setStartBefore(b);else if(c>=b.nodeValue.length)this.setStartAfter(b);else{var f=v.split(b,c);b===e?this.setEnd(f,this.endOffset-c):b.parentNode===e&&(this.endOffset+=1),this.setStartBefore(f)}if(d)return this.collapse(!0)}return a||(c=this.endOffset,e=this.endContainer,e.nodeType==3&&(c==0?this.setEndBefore(e):c>=e.nodeValue.length?this.setEndAfter(e):(v.split(e,c),this.setEndAfter(e)))),this},txtToElmBoundary:function(){function a(a,b){var c=a[b+"Container"],d=a[b+"Offset"];c.nodeType==3&&(d?d>=c.nodeValue.length&&a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c):a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c))}return this.collapsed||(a(this,"start"),a(this,"end")),this},insertNode:function(a){var b=a,c=1;a.nodeType==11&&(b=a.firstChild,c=a.childNodes.length),this.trimBoundary(!0);var d=this.startContainer,e=this.startOffset,f=d.childNodes[e];return f?d.insertBefore(a,f):d.appendChild(a),b.parentNode===this.endContainer&&(this.endOffset=this.endOffset+c),this.setStartBefore(b)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(b,c){var d,e=this.document.createElement("span");return e.style.cssText="display:none;line-height:0px;",e.appendChild(this.document.createTextNode("﻿")),e.id="_baidu_bookmark_start_"+(c?"":a++),this.collapsed||(d=e.cloneNode(!0),d.id="_baidu_bookmark_end_"+(c?"":a++)),this.insertNode(e),d&&(this.collapse(!1).insertNode(d),this.setEndBefore(d)),this.setStartAfter(e),{start:b?e.id:e,end:d?b?d.id:d:null,id:b}},moveToBookmark:function(a){var b=a.id?this.document.getElementById(a.start):a.start,c=a.end&&a.id?this.document.getElementById(a.end):a.end;return this.setStartBefore(b),v.remove(b),c?(this.setEndBefore(c),v.remove(c)):this.collapse(!0),this},enlarge:function(a,b){var c=v.isBody,d,e,f=this.document.createTextNode("");if(a){e=this.startContainer,e.nodeType==1?e.childNodes[this.startOffset]?d=e=e.childNodes[this.startOffset]:(e.appendChild(f),d=e=f):d=e;for(;;){if(v.isBlockElm(e)){e=d;while((d=e.previousSibling)&&!v.isBlockElm(d))e=d;this.setStartBefore(e);break}d=e,e=e.parentNode}e=this.endContainer,e.nodeType==1?((d=e.childNodes[this.endOffset])?e.insertBefore(f,d):e.appendChild(f),d=e=f):d=e;for(;;){if(v.isBlockElm(e)){e=d;while((d=e.nextSibling)&&!v.isBlockElm(d))e=d;this.setEndAfter(e);break}d=e,e=e.parentNode}f.parentNode===this.endContainer&&this.endOffset--,v.remove(f)}if(!this.collapsed){while(this.startOffset==0){if(b&&b(this.startContainer))break;if(c(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(b&&b(this.endContainer))break;if(c(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!v.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!v.isBody(this.endContainer)&&!this.endOffset)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,b,c){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(a){return a.nodeType==1&&v.isBlockElm(a)}).adjustmentBoundary();var d=this.createBookmark(),e=d.end,f=function(a){return a.nodeType==1?a.tagName.toLowerCase()!="br":!v.isWhitespace(a)},g=v.getNextDomNode(d.start,!1,f),h,i,j=this.cloneRange();while(g&&v.getPosition(g,e)&v.POSITION_PRECEDING)if(g.nodeType==3||r[a][g.tagName]){j.setStartBefore(g),h=g;while(h&&(h.nodeType==3||r[a][h.tagName])&&h!==e)i=h,h=v.getNextDomNode(h,h.nodeType==1,null,function(b){return r[a][b.tagName]});var k=j.setEndAfter(i).extractContents(),l;if(c&&c.length>0){var m,n;n=m=c[0].cloneNode(!1);for(var o=1,p;p=c[o++];)m.appendChild(p.cloneNode(!1)),m=m.firstChild;l=m}else l=j.document.createElement(a);b&&v.setAttributes(l,b),l.appendChild(k),j.insertNode(c?n:l);var q;a=="span"&&b.style&&/text\-decoration/.test(b.style)&&(q=v.findParentByTagName(l,"a",!0))?(v.setAttributes(q,b),v.remove(l,!0),l=q):(v.mergSibling(l),v.clearEmptySibling(l)),v.mergChild(l,a,b),g=v.getNextDomNode(l,!1,f),v.mergToParent(l);if(h===e)break}else g=v.getNextDomNode(g,!0,f);return this.moveToBookmark(d)},removeInlineStyle:function(a){if(this.collapsed)return this;a=o.isArray(a)?a:[a],this.shrinkBoundary().adjustmentBoundary();var b=this.startContainer,c=this.endContainer;for(;;){if(b.nodeType==1){if(o.indexOf(a,b.tagName.toLowerCase())>-1)break;if(b.tagName.toLowerCase()=="body"){b=null;break}}b=b.parentNode}for(;;){if(c.nodeType==1){if(o.indexOf(a,c.tagName.toLowerCase())>-1)break;if(c.tagName.toLowerCase()=="body"){c=null;break}}c=c.parentNode}var d=this.createBookmark(),e,f;b&&(f=this.cloneRange().setEndBefore(d.start).setStartBefore(b),e=f.extractContents(),f.insertNode(e),v.clearEmptySibling(b,!0),b.parentNode.insertBefore(d.start,b)),c&&(f=this.cloneRange().setStartAfter(d.end).setEndAfter(c),e=f.extractContents(),f.insertNode(e),v.clearEmptySibling(c,!1,!0),c.parentNode.insertBefore(d.end,c.nextSibling));var g=v.getNextDomNode(d.start,!1,function(a){return a.nodeType==1}),h;while(g&&g!==d.end)h=v.getNextDomNode(g,!0,function(a){return a.nodeType==1}),o.indexOf(a,g.tagName.toLowerCase())>-1&&v.remove(g,!0),g=h;return this.moveToBookmark(d)},getClosedNode:function(){var a;if(!this.collapsed){var b=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(b.startContainer.nodeType==1&&b.startContainer===b.endContainer&&b.endOffset-b.startOffset==1){var c=b.startContainer.childNodes[b.startOffset];c&&c.nodeType==1&&(r.$empty[c.tagName]||r.$nonChild[c.tagName])&&(a=c)}}return a},select:j.ie?function(a,d){var e;this.collapsed||this.shrinkBoundary();var f=this.getClosedNode();if(f&&!d){try{e=this.document.body.createControlRange(),e.addElement(f),e.select()}catch(g){}return this}var i=this.createBookmark(),j=i.start,l;e=this.document.body.createTextRange(),e.moveToElementText(j),e.moveStart("character",1);if(!this.collapsed){var m=this.document.body.createTextRange();l=i.end,m.moveToElementText(l),e.setEndPoint("EndToEnd",m)}else if(!a&&this.startContainer.nodeType!=3){var n=this.document.createTextNode(b),o=this.document.createElement("span");o.appendChild(this.document.createTextNode(b)),j.parentNode.insertBefore(o,j),j.parentNode.insertBefore(n,j),h(this.document,n),c=n,k(o,"previousSibling"),k(j,"nextSibling"),e.moveStart("character",-1),e.collapse(!0)}this.moveToBookmark(i),o&&v.remove(o);try{e.select()}catch(g){}return this}:function(a){var d=v.getWindow(this.document),e=d.getSelection(),f;j.gecko?this.document.body.focus():d.focus();if(e){e.removeAllRanges();if(this.collapsed){if(a&&j.opera&&!v.isBody(this.startContainer)&&this.startContainer.nodeType==1){var g=this.document.createTextNode("");this.insertNode(g).setStart(g,0).collapse(!0)}a||(f=this.document.createTextNode(b),this.insertNode(f),h(this.document,f),k(f,"previousSibling"),k(f,"nextSibling"),c=f,this.setStart(f,j.webkit?1:0).collapse(!0))}var i=this.document.createRange();i.setStart(this.startContainer,this.startOffset),i.setEnd(this.endContainer,this.endOffset),e.addRange(i)}return this},scrollToView:function(a,b){a=a?window:v.getWindow(this.document);var c=this.document.createElement("span");c.innerHTML="&nbsp;";var d=this.cloneRange();return d.insertNode(c),v.scrollToView(c,a,b),v.remove(c),this}}})(),function(){function a(a,b){var c=v.getNodeIndex;a=a.duplicate(),a.collapse(b);var d=a.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};var e=d.children,f,g=a.duplicate(),h=0,i=e.length-1,j=-1,k;while(h<=i){j=Math.floor((h+i)/2),f=e[j],g.moveToElementText(f);var l=g.compareEndPoints("StartToStart",a);if(l>0)i=j-1;else if(l<0)h=j+1;else return{container:d,offset:c(f)}}if(j==-1){g.moveToElementText(d),g.setEndPoint("StartToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes;if(!k)return f=e[e.length-1],{container:f,offset:f.nodeValue.length};var m=e.length;while(k>0)k-=e[--m].nodeValue.length;return{container:e[m],offset:-k}}g.collapse(l>0),g.setEndPoint(l>0?"StartToStart":"EndToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length;if(!k)return r.$empty[f.tagName]||r.$nonChild[f.tagName]?{container:d,offset:c(f)+(l>0?0:1)}:{container:f,offset:l>0?0:f.childNodes.length};while(k>0)try{var n=f;f=f[l>0?"previousSibling":"nextSibling"],k-=f.nodeValue.length}catch(o){return{container:d,offset:c(n)}}return{container:f,offset:l>0?-k:f.nodeValue.length+k}}function b(b,c){if(b.item)c.selectNode(b.item(0));else{var d=a(b,!0);c.setStart(d.container,d.offset),b.compareEndPoints("StartToEnd",b)!=0&&(d=a(b,!1),c.setEnd(d.container,d.offset))}return c}function c(a){var b;try{b=a.getNative().createRange()}catch(c){return null}var d=b.item?b.item(0):b.parentElement();return(d.ownerDocument||d)===a.document?b:null}var d=i.Selection=function(a){var b=this,d;b.document=a,k&&(d=v.getWindow(a).frameElement,v.on(d,"beforedeactivate",function(){b._bakIERange=b.getIERange()}),v.on(d,"activate",function(){try{!c(b)&&b._bakIERange&&b._bakIERange.select()}catch(a){}b._bakIERange=null})),d=a=null};d.prototype={getNative:function(){var a=this.document;try{return a?k?a.selection:v.getWindow(a).getSelection():null}catch(b){return null}},getIERange:function(){var a=c(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?v.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return j.ie&&c(this)||!j.ie&&this.getNative().rangeCount?!0:!1}catch(a){return!1}},getRange:function(){function c(b){var c=a.document.body.firstChild,d=b.collapsed;while(c&&c.firstChild)b.setStart(c,0),c=c.firstChild;b.startContainer||b.setStart(a.document.body,0),d&&b.collapse(!0)}var a=this;if(a._cachedRange!=null)return this._cachedRange;var d=new h.editor.dom.Range(a.document);if(k){var e=a.getIERange();e?b(e,d):c(d)}else{var f=a.getNative();if(f&&f.rangeCount){var g=f.getRangeAt(0),i=f.getRangeAt(f.rangeCount-1);d.setStart(g.startContainer,g.startOffset).setEnd(i.endContainer,i.endOffset),d.collapsed&&v.isBody(d.startContainer)&&!d.startOffset&&c(d)}else{if(this._bakRange&&v.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;c(d)}}return this._bakRange=d},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a=k?this.getIERange():this.getRange(),b,c,d,e;if(k){if(!a)return this.document.body.firstChild;if(a.item)return a.item(0);b=a.duplicate(),b.text.length>0&&b.moveStart("character",1),b.collapse(1),c=b.parentElement(),e=d=a.parentElement();while(d=d.parentNode)if(d==c){c=e;break}}else{a.shrinkBoundary(),c=a.startContainer,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[Math.min(c.childNodes.length-1,a.startOffset)]);if(c.nodeType==3)return c.parentNode}return c},getText:function(){var a,b;return this.isFocus()&&(a=this.getNative())?(b=j.ie?a.createRange():a.getRangeAt(0),j.ie?b.text:b.toString()):""}}}(),function(){function e(a){var b=a.getElementsByTagName("img"),c;for(var d=0,e;e=b[d++];)if(c=e.getAttribute("orgSrc"))e.src=c,e.removeAttribute("orgSrc");var f=a.getElementsByTagName("a");for(var d=0,g;g=f[d++];d++)g.getAttribute("data_ue_src")&&g.setAttribute("href",g.getAttribute("data_ue_src"))}function f(a,b){var c;if(b.textarea)if(o.isString(b.textarea)){for(var d=0,e,f=v.getElementsByTagName(a,"textarea");e=f[d++];)if(e.id=="ueditor_textarea_"+b.options.textarea){c=e;break}}else c=b.textarea;c||a.appendChild(c=v.creElm(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"})),c.value=b.options.allHtmlEnabled?b.getAllHtml():b.getUBB()}var c=0,d,g=UE.Editor=function(d){var e=this;e.uid=c++,p.call(e),e.commands={},e.options=o.extend(d||{},UEDITOR_CONFIG,!0),e.setOpt({isShow:!0,initialContent:"欢迎使用ueditor!",autoClearinitialContent:!1,iframeCssUrl:e.options.UEDITOR_HOME_URL+"/themes/default/iframe.css",textarea:"editorValue",focus:!1,minFrameHeight:300,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",pageBreakTag:"_baidu_page_break_tag_",customDomain:!1,lang:"zh-cn",langPath:e.options.UEDITOR_HOME_URL+"lang/",allHtmlEnabled:!1});for(var f in UE.plugins)UE.plugins[f].call(e);e.langIsReady=!0,e.ubbparser=new a,e.block=new b,$("#blockWindow").css("z-index",1002),e.fireEvent("langReady"),UE.instants["ueditorInstant"+e.uid]=e};g.prototype={ready:function(a){var b=this;a&&(b.isReady?a.apply(b):b.addListener("ready",a))},setOpt:function(a,b){var c={};o.isString(a)?c[a]=b:c=a,o.extend(this.options,c,!0)},destroy:function(){var a=this;a.fireEvent("destroy"),a.container.innerHTML="",v.remove(a.container);for(var b in a)a.hasOwnProperty(b)&&delete this[b]},render:function(a){var b=this,c=b.options;a.constructor===String&&(a=document.getElementById(a));if(a){var d=k&&j.version<9,e=(k&&j.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml'"+(d?"":" class='view'")+"><head>"+(c.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+o.unhtml(c.iframeCssUrl)+"'/>":"")+"<style type='text/css'>"+".selectTdClass{background-color:#3399FF !important;}"+"table.noBorderTable td{border:1px dashed #ddd !important}"+"table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}"+".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}"+".anchorclass{background: url('"+b.options.UEDITOR_CSSIMAGE_URL+"anchor.gif') no-repeat scroll left center transparent;border: 1px dotted #0000FF;cursor: auto;display: inline-block;height: 16px;width: 15px;}"+".view{padding:0;word-wrap:break-word;cursor:text;height:100%;}\n"+"body{margin:8px;font-family:'宋体';font-size:16px;}"+"li{clear:both}"+"p{margin:0px 0;}"+(c.initialStyle||"")+"</style></head><body"+(d?" class='view'":"")+"></body>";if(c.customDomain&&document.domain!=location.hostname)e+="<script>window.parent.UE.instants['ueditorInstant"+b.uid+"']._setup(document);</script></html>",a.appendChild(v.creElm(document,"iframe",{id:"baidu_editor_"+b.uid,width:"100%",height:"100%",frameborder:"0",src:'javascript:void(function(){document.open();document.domain="'+document.domain+'";'+'document.write("'+e+'");document.close();}())'}));else{a.innerHTML='<iframe id="baidu_editor_'+this.uid+'"'+'width="100%" height="100%" scroll="no" frameborder="0" ></iframe>';var f=a.firstChild.contentWindow.document;!j.webkit&&f.open(),f.write(e+"</html>"),!j.webkit&&f.close(),b._setup(f)}a.style.overflow="hidden"}},_setup:function(a){var b=this,c=b.options;k?(a.body.disabled=!0,a.body.contentEditable=!0,a.body.disabled=!1):(a.body.contentEditable=!0,a.body.spellcheck=!1),b.document=a,b.window=a.defaultView||a.parentWindow,b.iframe=b.window.frameElement,b.body=a.body,b.setHeight(c.minFrameHeight),b.selection=new i.Selection(a);var d;j.gecko&&(d=this.selection.getNative())&&d.removeAllRanges(),this._initEvents();if(c.initialContent)if(c.autoClearinitialContent){var e=b.execCommand;b.execCommand=function(){b.fireEvent("firstBeforeExecCommand"),e.apply(b,arguments)},this.setDefaultContent(c.initialContent)}else this.setContent(c.initialContent,!0);for(var g=this.iframe.parentNode;!v.isBody(g);g=g.parentNode)if(g.tagName=="FORM"){v.on(g,"submit",function(){f(this,b)});break}v.isEmptyNode(b.body)&&(b.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>"),c.focus&&setTimeout(function(){b.focus(),!b.options.autoClearinitialContent&&b._selectionChange()}),b.container||(b.container=this.iframe.parentNode),c.fullscreen&&b.ui&&b.ui.setFullScreen(!0),b.isReady=1,b.fireEvent("ready"),j.ie||v.on(b.window,["blur","focus"],function(a){if(a.type=="blur"){b._bakRange=b.selection.getRange();try{b.selection.getNative().removeAllRanges()}catch(a){}}else try{b._bakRange&&b._bakRange.select()}catch(a){}}),j.gecko&&j.version<=10902&&(b.body.contentEditable=!1,setTimeout(function(){b.body.contentEditable=!0},100),setInterval(function(){b.body.style.height=b.iframe.offsetHeight-20+"px"},100)),!c.isShow&&b.setHide(),c.readonly&&b.setDisabled()},sync:function(a){var b=this,c=a?document.getElementById(a):v.findParent(b.iframe.parentNode,function(a){return a.tagName=="FORM"},!0);c&&f(c,b)},setHeight:function(a){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px"),this.document.body.style.height=a-20+"px"},getContent:function(a,b,c){var d=this;a&&o.isFunction(a)&&(b=a,a="");if(b?!b():!this.hasContents())return"";d.fireEvent("beforegetcontent",a);var e=new RegExp(v.fillChar,"g"),f=d.body.innerHTML.replace(e,"").replace(/>[\t\r\n]*?</g,"><");d.fireEvent("aftergetcontent",a);if(d.serialize){var g=d.serialize.parseHTML(f);g=d.serialize.transformOutput(g),f=d.serialize.toHTML(g)}return k&&c?f=f.replace(/<p>\s*?<\/p>/g,"<p>&nbsp;</p>"):f=f.replace(/(&nbsp;)+/g,function(a){for(var b=0,c=[],d=a.split(";").length-1;b<d;b++)c.push(b%2==0?" ":"&nbsp;");return c.join("")}),f},getUBB:function(){var a=this;return a.ubbparser.HTMLtoUBB(a.body)},getAllHtml:function(){var a=this,b={html:""},c="";return a.fireEvent("getAllHtml",b),"<html><head>"+(a.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+a.options.charset+'"/>':"")+a.document.getElementsByTagName("head")[0].innerHTML+b.html+"</head>"+"<body "+(k&&j.version<9?'class="view"':"")+">"+a.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(v.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,"");return b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return r.$block[c]?"\n":b?b:""}),b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var a=new RegExp(v.fillChar,"g");return this.body[j.ie?"innerText":"textContent"].replace(a,"").replace(/\u00a0/g," ")},setContent:function(a,b){var c=this,d=o.extend({a:1,A:1},r.$inline,!0),f;a=a.replace(/^[ \t\r\n]*?</,"<").replace(/>[ \t\r\n]*?$/,">").replace(/>[\t\r\n]*?</g,"><").replace(/[\s\/]?(\w+)?>[ \t\r\n]*?<\/?(\w+)/gi,function(a,b,c){return b?f=c:b=f,!d[b]&&!d[c]?a.replace(/>[ \t\r\n]*?</,"><"):a}),c.fireEvent("beforesetcontent");var g=this.serialize;if(g){var h=g.parseHTML(a);h=g.transformInput(h),h=g.filter(h),a=g.toHTML(h)}this.body.innerHTML=a.replace(new RegExp("[\r"+v.fillChar+"]*","g"),""),j.ie&&j.version<7&&e(this.document.body);if(c.options.enterTag=="p"){var i=this.body.firstChild,k;if(!i||i.nodeType==1&&(r.$cdata[i.tagName]||v.isCustomeNode(i))&&i===this.body.lastChild)this.body.innerHTML="<p>"+(j.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var l=c.document.createElement("p");while(i){while(i&&(i.nodeType==3||i.nodeType==1&&r.p[i.tagName]&&!r.$cdata[i.tagName]))k=i.nextSibling,l.appendChild(i),i=k;if(l.firstChild){if(!i){c.body.appendChild(l);break}c.body.insertBefore(l,i),l=c.document.createElement("p")}i=i.nextSibling}}}c.adjustTable&&c.adjustTable(c.body),c.fireEvent("aftersetcontent"),c.fireEvent("contentchange"),!b&&c._selectionChange(),c._bakRange=c._bakIERange=null;var m;j.gecko&&(m=this.selection.getNative())&&m.removeAllRanges()},focus:function(a){try{var b=this,c=b.selection.getRange();a?c.setStartAtLast(b.body.lastChild).setCursor(!1,!0):c.select(!0)}catch(d){}},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=o.bind(a._proxyDomEvent,a),v.on(b,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],a._proxyDomEvent),v.on(c,["focus","blur"],a._proxyDomEvent),v.on(b,["mouseup","keydown"],function(b){if(b.type=="keydown"&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey))return;if(b.button==2)return;a._selectionChange(250,b)});var d=0,e=j.ie?a.body:a.document,f;v.on(e,"dragstart",function(){d=1}),v.on(e,j.webkit?"dragover":"drop",function(){return j.webkit?function(){clearTimeout(f),f=setTimeout(function(){if(!d){var b=a.selection,c=b.getRange();if(c){var e=c.getCommonAncestor();if(e&&a.serialize){var f=a.serialize,g=f.filter(f.transformInput(f.parseHTML(f.word(e.innerHTML))));e.innerHTML=f.toHTML(g)}}}d=0},200)}:function(a){d||(a.preventDefault?a.preventDefault():a.returnValue=!1),d=0}}())},_proxyDomEvent:function(a){return this.fireEvent(a.type.replace(/^on/,""),a)},_selectionChange:function(a,b){var c=this,e=!1,f,g;if(j.ie&&j.version<9&&b&&b.type=="mouseup"){var h=this.selection.getRange();h.collapsed||(e=!0,f=b.clientX,g=b.clientY)}clearTimeout(d),d=setTimeout(function(){if(!c.selection.getNative())return;var a;if(e&&c.selection.getNative().type=="None"){a=c.document.body.createTextRange();try{a.moveToPoint(f,g)}catch(d){a=null}}var h;a&&(h=c.selection.getIERange,c.selection.getIERange=function(){return a}),c.selection.cache(),h&&(c.selection.getIERange=h),c.selection._cachedRange&&c.selection._cachedStartElement&&(c.fireEvent("beforeselectionchange"),c.fireEvent("selectionchange",!!b),c.fireEvent("afterselectionchange"),c.selection.clear())},a||50)},_callCmdFn:function(a,b){var c=b[0].toLowerCase(),d,e;d=this.commands[c]||UE.commands[c],e=d&&d[a];if((!d||!e)&&a=="queryCommandState")return 0;if(e)return e.apply(this,b)},execCommand:function(a){a=a.toLowerCase();var b=this,c,d=b.commands[a]||UE.commands[a];if(!d||!d.execCommand)return;return!d.notNeedUndo&&!b.__hasEnterExecCommand?(b.__hasEnterExecCommand=!0,b.queryCommandState(a)!=-1&&(b.fireEvent("beforeexeccommand",a),c=this._callCmdFn("execCommand",arguments),b.fireEvent("afterexeccommand",a)),b.__hasEnterExecCommand=!1):c=this._callCmdFn("execCommand",arguments),b._selectionChange(),c},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){if(a)for(var b=0,c;c=a[b++];)if(this.document.getElementsByTagName(c).length>0)return!0;if(!v.isEmptyBlock(this.body))return!0;a=["div"];for(b=0;c=a[b++];){var d=v.getElementsByTagName(this.document,c);for(var e=0,f;f=d[e++];)if(v.isCustomeNode(f))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var a=this,b;if(a.body.contentEditable=="false"){a.body.contentEditable=!0,b=a.selection.getRange();try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}b.select(!0),a.bkqueryCommandState&&(a.queryCommandState=a.bkqueryCommandState,delete a.bkqueryCommandState),a.fireEvent("selectionchange")}},setDisabled:function(a){var b=this;a=a?o.isArray(a)?a:[a]:[],b.body.contentEditable=="true"&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.queryCommandState=function(c){return o.indexOf(a,c)!=-1?b.bkqueryCommandState.apply(b,arguments):-1},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},setDefaultContent:function(){function a(){var b=this;if(b.document.getElementById("initContent")){b.document.body.innerHTML="<p>"+(k?"":"<br/>")+"</p>";var c=b.selection.getRange();b.removeListener("firstBeforeExecCommand",a),b.removeListener("focus",a),setTimeout(function(){c.setStart(b.document.body.firstChild,0).collapse(!0).select(!0),b._selectionChange()})}}return function(b){var c=this;c.document.body.innerHTML='<p id="initContent">'+b+"</p>",j.ie&&j.version<7&&e(c.document.body),c.addListener("firstBeforeExecCommand",a),c.addListener("focus",a)}}(),setShow:function(){var a=this,b=a.selection.getRange();if(a.container.style.display=="none"){try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}b.select(!0),a.container.style.display=""}},setHide:function(){var a=this;a.lastBk||(a.lastBk=a.selection.getRange().createBookmark(!0)),a.container.style.display="none"},getLang:function(a){var b=UE.I18N[this.options.lang];a=(a||"").split(".");for(var c=0,d;d=a[c++];){b=b[d];if(!b)break}return b}},o.inherits(g,p)}(),UE.ajax=function(){function a(a){var b=[];for(var c in a){if(c=="method"||c=="timeout"||c=="async")continue;(typeof a[c]).toLowerCase()!="function"&&(typeof a[c]).toLowerCase()!="object"&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]))}return b.join("&")}function b(){var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest;else try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return a}return{request:function(c,d){var e=b(),f=!1,g={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};typeof c=="object"&&(d=c,c=d.url);if(!e||!c)return;var h=d?o.extend(g,d):g,i=a(h);o.isEmptyObject(h.data)||(i+=(i?"&":"")+a(h.data));var j=setTimeout(function(){e.readyState!=4&&(f=!0,e.abort(),clearTimeout(j))},h.timeout),k=h.method.toUpperCase(),l=c+(c.indexOf("?")==-1?"?":"&")+(k=="POST"?"":i+"&noCache="+ +(new Date));e.open(k,l,h.async),e.onreadystatechange=function(){e.readyState==4&&(!f&&e.status==200?h.onsuccess(e):h.onerror(e))},k=="POST"?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(i)):e.send(null)}}}();var h=h||{};return h.editor=h.editor||{},h.editor.ui={},function(){function i(){var a=document.getElementById("edui_fixedlayer");g.setViewportOffset(a,{left:0,top:0})}function j(a){b.on(window,"scroll",i),b.on(window,"resize",h.editor.utils.defer(i,0,!0))}var a=h.editor.browser,b=h.editor.dom.domUtils,c="$EDITORUI",d=window[c]={},e="ID"+c,f=0,g=h.editor.ui.uiUtils={uid:function(a){return a?a[e]||(a[e]=++f):++f},hook:function(a,b){var c;return a&&a._callbacks?c=a:(c=function(){var b;a&&(b=a.apply(this,arguments));var d=c._callbacks,e=d.length;while(e--){var f=d[e].apply(this,arguments);b===undefined&&(b=f)}return b},c._callbacks=[]),c._callbacks.push(b),c},createElementByHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b=b.firstChild,b.parentNode.removeChild(b),b},getViewportElement:function(){return a.ie&&a.quirks?document.body:document.documentElement},getClientRect:function(a){var c;try{c=a.getBoundingClientRect()}catch(d){c={left:0,top:0,height:0,width:0}}var e={left:Math.round(c.left),top:Math.round(c.top),height:Math.round(c.bottom-c.top),width:Math.round(c.right-c.left)},f;while((f=a.ownerDocument)!==document&&(a=b.getWindow(f).frameElement))c=a.getBoundingClientRect(),e.left+=c.left,e.top+=c.top;return e.bottom=e.top+e.height,e.right=e.left+e.width,e},getViewportRect:function(){var a=g.getViewportElement(),b=(window.innerWidth||a.clientWidth)|0,c=(window.innerHeight||a.clientHeight)|0;return{left:0,top:0,height:c,width:b,bottom:c,right:b}},setViewportOffset:function(a,c){var d,e=g.getFixedLayer();a.parentNode===e?(a.style.left=c.left+"px",a.style.top=c.top+"px"):b.setViewportOffset(a,c)},getEventOffset:function(a){var b=a.target||a.srcElement,c=g.getClientRect(b),d=g.getViewportOffsetByEvent(a);return{left:d.left-c.left,top:d.top-c.top}},getViewportOffsetByEvent:function(a){var c=a.target||a.srcElement,d=b.getWindow(c).frameElement,e={left:a.clientX,top:a.clientY};if(d&&c.ownerDocument!==document){var f=g.getClientRect(d);e.left+=f.left,e.top+=f.top}return e},setGlobal:function(a,b){return d[a]=b,c+'["'+a+'"]'},unsetGlobal:function(a){delete d[a]},copyAttributes:function(b,c){var d=c.attributes,e=d.length;while(e--){var f=d[e];f.nodeName!="style"&&f.nodeName!="class"&&(!a.ie||f.specified)&&b.setAttribute(f.nodeName,f.nodeValue)}c.className&&(b.className+=" "+c.className),c.style.cssText&&(b.style.cssText+=";"+c.style.cssText)},removeStyle:function(a,b){if(a.style.removeProperty)a.style.removeProperty(b);else if(a.style.removeAttribute)a.style.removeAttribute(b);else throw""},contains:function(a,b){return a&&b&&(a===b?!1:a.contains?a.contains(b):a.compareDocumentPosition(b)&16)},startDrag:function(a,b,c){function f(a){var c=a.clientX-d,f=a.clientY-e;b.ondragmove(c,f),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}var c=c||document,d=a.clientX,e=a.clientY;if(c.addEventListener){function g(a){c.removeEventListener("mousemove",f,!0),c.removeEventListener("mouseup",f,!0),window.removeEventListener("mouseup",g,!0),b.ondragstop()}c.addEventListener("mousemove",f,!0),c.addEventListener("mouseup",g,!0),window.addEventListener("mouseup",g,!0),a.preventDefault()}else{var h=a.srcElement;h.setCapture();function i(){h.releaseCapture(),h.detachEvent("onmousemove",f),h.detachEvent("onmouseup",i),h.detachEvent("onlosecaptrue",i),b.ondragstop()}h.attachEvent("onmousemove",f),h.attachEvent("onmouseup",i),h.attachEvent("onlosecaptrue",i),a.returnValue=!1}b.ondragstart()},getFixedLayer:function(){var b=document.getElementById("edui_fixedlayer");return b==null&&(b=document.createElement("div"),b.id="edui_fixedlayer",document.body.appendChild(b),a.ie&&a.version<=8?(b.style.position="absolute",j(),setTimeout(i)):b.style.position="fixed",b.style.left="0",b.style.top="0",b.style.width="0",b.style.height="0"),b},makeUnselectable:function(b){if(a.opera||a.ie&&a.version<9){b.unselectable="on";if(b.hasChildNodes())for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].nodeType==1&&g.makeUnselectable(b.childNodes[c])}else b.style.MozUserSelect!==undefined?b.style.MozUserSelect="none":b.style.WebkitUserSelect!==undefined?b.style.WebkitUserSelect="none":b.style.KhtmlUserSelect!==undefined&&(b.style.KhtmlUserSelect="none")}}}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.EventBase,d=h.editor.ui.UIBase=function(){};d.prototype={className:"",uiName:"",initOptions:function(a){var c=this;for(var d in a)c[d]=a[d];this.id=this.id||"edui"+b.uid()},initUIBase:function(){this._globalKey=a.unhtml(b.setGlobal(this.id,this))},render:function(a){var c=this.renderHtml(),d=b.createElementByHtml(c),e=this.getDom();e!=null?(e.parentNode.replaceChild(d,e),b.copyAttributes(d,e)):(typeof a=="string"&&(a=document.getElementById(a)),a=a||b.getFixedLayer(),a.appendChild(d)),this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();a&&h.editor.dom.domUtils.remove(a),b.unsetGlobal(this.id)}},a.inherits(d,c)}(),function(){var a=h.editor.utils,b=h.editor.ui.UIBase,c=h.editor.ui.Separator=function(a){this.initOptions(a),this.initSeparator()};c.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},a.inherits(c,b)}(),function(){var a=h.editor.utils,b=h.editor.dom.domUtils,c=h.editor.ui.UIBase,d=h.editor.ui.uiUtils,e=h.editor.ui.Mask=function(a){this.initOptions(a),this.initUIBase()};e.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var a=this;b.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a._fill()})})},show:function(a){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return!1},_fill:function(){var a=this.getDom(),b=d.getViewportRect();a.style.width=b.width+"px",a.style.height=b.height+"px"}},a.inherits(e,c)}(),function(){function g(a){var b=[];for(var c=0;c<f.length;c++){var d=f[c];d.isHidden()||d.queryAutoHide(a)!==!1&&d.hide()}}var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.dom.domUtils,d=h.editor.ui.UIBase,e=h.editor.ui.Popup=function(a){this.initOptions(a),this.initPopup()},f=[];e.postHide=g;var i=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];e.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),f.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: white;" frameborder="0" width="100%" height="100%" src="javascript:"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){return this.content?typeof this.content=="string"?this.content:this.content.renderHtml():""},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.content instanceof d&&this.content.postRender(),this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var a=this.getDom("content");return b.getClientRect(a)},fitSize:function(){var a=this.getDom("body");a.style.width="",a.style.height="";var b=this.mesureSize();return a.style.width=b.width+"px",a.style.height=b.height+"px",b},showAnchor:function(a,c){this.showAnchorRect(b.getClientRect(a),c)},showAnchorRect:function(a,d,e){this._doAutoRender();var f=b.getViewportRect();this._show();var g=this.fitSize(),j,k,l,m;d?(j=this.canSideLeft&&a.right+g.width>f.right&&a.left>g.width,k=this.canSideUp&&a.top+g.height>f.bottom&&a.bottom>g.height,l=j?a.left-g.width:a.right,m=k?a.bottom-g.height:a.top):(j=this.canSideLeft&&a.right+g.width>f.right&&a.left>g.width,k=this.canSideUp&&a.top+g.height>f.bottom&&a.bottom>g.height,l=j?a.right-g.width:a.left,m=k?a.top-g.height:a.bottom);var n=this.getDom();b.setViewportOffset(n,{left:l,top:m}),c.removeClasses(n,i),n.className+=" "+i[(k?1:0)*2+(j?1:0)],this.editor&&(n.style.zIndex=this.editor.container.style.zIndex*1+10,h.editor.ui.uiUtils.getFixedLayer().style.zIndex=n.style.zIndex-1)},showAt:function(a){var b=a.left,c=a.top,d={left:b,top:c,right:b,bottom:c,height:0,width:0};this.showAnchorRect(d,!1,!0)},_show:function(){if(this._hidden){var a=this.getDom();a.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(a){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,a||this.fireEvent("hide"))},queryAutoHide:function(a){return!a||!b.contains(this.getDom(),a)}},a.inherits(e,d),c.on(document,"mousedown",function(a){var b=a.target||a.srcElement;g(b)}),c.on(window,"scroll",function(){g()})}(),function(){function e(a,b){var c='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+a+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#366092;padding-top: 2px"><td colspan="10">'+b.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var e=0;e<d.length;e++)e&&e%10===0&&(c+="</tr>"+(e==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#366092;"><td colspan="10">'+b.getLang("standardColor")+"</td></tr>":"")+"<tr"+(e==60?' class="edui-colorpicker-tablefirstrow"':"")+">"),c+=e<70?'<td style="padding: 0 2px;"><a hidefocus title="'+d[e]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+d[e]+'"'+' style="background-color:#'+d[e]+";border:solid #ccc;"+(e<10||e>=60?"border-width:1px;":e>=10&&e<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":"";return c+="</tr></table></div>",c}var a=h.editor.utils,b=h.editor.ui.UIBase,c=h.editor.ui.ColorPicker=function(a){this.initOptions(a),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};c.prototype={getHtmlTpl:function(){return e(this.noColorText,this.editor)},_onTableClick:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&this.fireEvent("pickcolor",c)},_onTableOver:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&(this.getDom("preview").style.backgroundColor=c)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},a.inherits(c,b);var d="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.ui.UIBase,d=h.editor.ui.TablePicker=function(a){this.initOptions(a),this.initTablePicker()};d.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span><span class="edui-clickable" onclick="$$._onMore();">'+a.editor.getLang("more")+"</span>"+"</div>"+'<div class="edui-pickarea"'+' onmousemove="$$._onMouseMove(event, this);"'+' onmouseover="$$._onMouseOver(event, this);"'+' onmouseout="$$._onMouseOut(event, this);"'+' onclick="$$._onClick(event, this);"'+">"+'<div id="##_overlay" class="edui-overlay"></div>'+"</div>"+"</div>"+"</div>"},_UIBase_render:c.prototype.render,render:function(a){this._UIBase_render(a),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var c=this.getDom("overlay").style,d=this.lengthOfCellSide;c.width=a*d+"px",c.height=b*d+"px";var e=this.getDom("label");e.innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row"),this.numCols=a,this.numRows=b},_onMouseOver:function(a,c){var d=a.relatedTarget||a.fromElement;!b.contains(c,d)&&c!==d&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(a,c){var d=a.relatedTarget||a.toElement;!b.contains(c,d)&&c!==d&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(a,c){var d=this.getDom("overlay").style,e=b.getEventOffset(a),f=this.lengthOfCellSide,g=Math.ceil(e.left/f),h=Math.ceil(e.top/f);this._track(g,h)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)},_onMore:function(){this.fireEvent("more")}},a.inherits(d,c)}(),function(){var a=h.editor.browser,b=h.editor.dom.domUtils,c=h.editor.ui.uiUtils,d='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(a.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');h.editor.ui.Stateful={alwalysHoverable:!1,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var a=this._Stateful_dGetHtmlTpl();return a.replace(/stateful/g,function(){return d})},Stateful_onMouseEnter:function(a,b){if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(a,b){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(a,b){var d=a.relatedTarget;!c.contains(b,d)&&b!==d&&this.Stateful_onMouseEnter(a,b)},Stateful_onMouseOut:function(a,b){var d=a.relatedTarget;!c.contains(b,d)&&b!==d&&this.Stateful_onMouseLeave(a,b)},Stateful_onMouseDown:function(a,b){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,b){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(a){return b.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&b.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var a=h.editor.utils,b=h.editor.ui.UIBase,c=h.editor.ui.Stateful,d=h.editor.ui.Button=function(a){this.initOptions(a),this.initButton()};d.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,initButton:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return false;" onclick="return $$._onClick();">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onClick:function(){this.isDisabled()||this.fireEvent("click")}},a.inherits(d,b),a.extend(d.prototype,c)}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.dom.domUtils,d=h.editor.ui.UIBase,e=h.editor.ui.Stateful,f=h.editor.ui.SplitButton=function(a){this.initOptions(a),this.initSplitButton()};f.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase(),this.Stateful_init();var a=this;if(this.popup!=null){var b=this.popup;this.popup=null,this.setPopup(b)}},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(c){if(this.popup===c)return;this.popup!=null&&this.popup.dispose(),c.addListener("show",a.bind(this._onPopupShow,this)),c.addListener("hide",a.bind(this._onPopupHide,this)),c.addListener("postrender",a.bind(function(){c.getDom("body").appendChild(b.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(b.getClientRect(this.getDom()).width-2)+'px"></div>')),c.getDom().className+=" "+this.className},this)),this.popup=c},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var a=b.getClientRect(this.getDom());a.top-=this.popup.SHADOW_RADIUS,a.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(a)},_onArrowClick:function(a,b){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},a.inherits(f,d),a.extend(f.prototype,e,!0)}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.ui.ColorPicker,d=h.editor.ui.Popup,e=h.editor.ui.SplitButton,f=h.editor.ui.ColorButton=function(a){this.initOptions(a),this.initColorButton()};f.prototype={initColorButton:function(){var a=this;this.popup=new d({content:new c({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,c){a._onPickColor(c)},onpicknocolor:function(b,c){a._onPickNoColor(c)}}),editor:a.editor}),this.initSplitButton()},_SplitButton_postRender:e.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(b.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(a){this.getDom("colorlump").style.backgroundColor=a,this.color=a},_onPickColor:function(a){this.fireEvent("pickcolor",a)!==!1&&(this.setColor(a),this.popup.hide())},_onPickNoColor:function(a){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},a.inherits(f,e)}(),function(){var a=h.editor.utils,b=h.editor.ui.Popup,c=h.editor.ui.TablePicker,d=h.editor.ui.SplitButton,e=h.editor.ui.TableButton=function(a){this.initOptions(a),this.initTableButton()};e.prototype={initTableButton:function(){var a=this;this.popup=new b({content:new c({editor:a.editor,onpicktable:function(b,c,d){a._onPickTable(c,d)},onmore:function(){a.popup.hide(),a.fireEvent("more")}}),editor:a.editor}),this.initSplitButton()},_onPickTable:function(a,b){this.fireEvent("picktable",a,b)!==!1&&this.popup.hide()}},a.inherits(e,d)}(),function(){var a=h.editor.utils,b=h.editor.ui.UIBase,c=h.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a),this.initAutoTypeSetPicker()};c.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this.editor,b=a.options.autotypeset,c=a.getLang("autoTypeSet");return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td colspan="2"><input type="checkbox" name="mergeEmptyline" '+(b.mergeEmptyline?"checked":"")+">"+c.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(b.removeEmptyline?"checked":"")+">"+c.delLine+"</td></tr>"+'<tr><td colspan="2"><input type="checkbox" name="removeClass" '+(b.removeClass?"checked":"")+">"+c.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(b.indent?"checked":"")+">"+c.indent+"</td></tr>"+'<tr><td colspan="2"><input type="checkbox" name="textAlign" '+(b.textAlign?"checked":"")+">"+c.alignment+'</td><td colspan="2" id="textAlignValue"><input type="radio" name="textAlignValue" value="left" '+(b.textAlign&&b["textAlign"]=="left"?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="textAlignValue" value="center" '+(b.textAlign&&b["textAlign"]=="center"?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="textAlignValue" value="right" '+(b.textAlign&&b["textAlign"]=="right"?"checked":"")+">"+a.getLang("justifyright")+" </tr>"+'<tr><td colspan="2"><input type="checkbox" name="imageBlockLine" '+(b.imageBlockLine?"checked":"")+">"+c.imageFloat+"</td>"+'<td colspan="2" id="imageBlockLineValue">'+'<input type="radio" name="imageBlockLineValue" value="none" '+(b.imageBlockLine&&b["imageBlockLine"]=="none"?"checked":"")+">"+a.getLang("default")+'<input type="radio" name="imageBlockLineValue" value="left" '+(b.imageBlockLine&&b["imageBlockLine"]=="left"?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="imageBlockLineValue" value="center" '+(b.imageBlockLine&&b["imageBlockLine"]=="center"?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="imageBlockLineValue" value="right" '+(b.imageBlockLine&&b["imageBlockLine"]=="right"?"checked":"")+">"+a.getLang("justifyright")+"</tr>"+'<tr><td colspan="2"><input type="checkbox" name="clearFontSize" '+(b.clearFontSize?"checked":"")+">"+c.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(b.clearFontFamily?"checked":"")+">"+c.removeFontFamily+"</td></tr>"+'<tr><td colspan="4"><input type="checkbox" name="removeEmptyNode" '+(b.removeEmptyNode?"checked":"")+">"+c.removeHtml+"</td></tr>"+'<tr><td colspan="4"><input type="checkbox" name="pasteFilter" '+(b.pasteFilter?"checked":"")+">"+c.pasteFilter+"</td></tr>"+'<tr><td colspan="4" align="right"><button >'+c.run+"</button></td></tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:b.prototype.render},a.inherits(c,b)}(),function(){function f(a){var b=a.editor.options.autotypeset,c=a.getDom(),d=v.getElementsByTagName(c,"input");for(var e=d.length-1,f;f=d[e--];)if(f.getAttribute("type")=="checkbox"){var g=f.getAttribute("name");b[g]&&delete b[g];if(f.checked){var h=document.getElementById(g+"Value");if(h)if(/input/ig.test(h.tagName))b[g]=h.value;else{var i=h.getElementsByTagName("input");for(var j=i.length-1,k;k=i[j--];)if(k.checked){b[g]=k.value;break}}else b[g]=!0}}var l=v.getElementsByTagName(c,"select");for(var e=0,m;m=l[e++];){var n=m.getAttribute("name");b[n]=b[n]?m.value:""}a.editor.options.autotypeset=b}var a=h.editor.utils,b=h.editor.ui.Popup,c=h.editor.ui.AutoTypeSetPicker,d=h.editor.ui.SplitButton,e=h.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a),this.initAutoTypeSetButton()};e.prototype={initAutoTypeSetButton:function(){var a=this;this.popup=new b({content:new c({editor:a.editor}),editor:a.editor,hide:function(){!this._hidden&&this.getDom()&&(f(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var d=0;this.popup.addListener("postRenderAfter",function(){var b=this;if(d)return;var c=this.getDom(),e=c.getElementsByTagName("button")[0];e.onclick=function(){f(b),a.editor.execCommand("autotypeset")},d=1}),this.initSplitButton()}},a.inherits(e,d)}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.ui.UIBase,d=h.editor.ui.Toolbar=function(a){this.initOptions(a),this.initToolbar()};d.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(a){this.items.push(a)},getHtmlTpl:function(){var a=[];for(var b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){var a=this.getDom();for(var c=0;c<this.items.length;c++)this.items[c].postRender();b.makeUnselectable(a)},_onMouseDown:function(){return!1}},a.inherits(d,c)}(),function(){var a=h.editor.utils,b=h.editor.dom.domUtils,c=h.editor.ui.uiUtils,d=h.editor.ui.UIBase,e=h.editor.ui.Popup,f=h.editor.ui.Stateful,g=h.editor.ui.Menu=function(a){this.initOptions(a),this.initMenu()},i={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};g.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];b=="-"?this.items[a]=this.getSeparator():b instanceof j||(this.items[a]=this.createItem(b))}},getSeparator:function(){return i},createItem:function(a){return new j(a)},_Popup_getContentHtmlTpl:e.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0)return this._Popup_getContentHtmlTpl();var a=[];for(var b=0;b<this.items.length;b++){var c=this.items[b];a[b]=c.renderHtml()}return'<div class="%%-body">'+a.join("")+"</div>"},_Popup_postRender:e.prototype.postRender,postRender:function(){var a=this;for(var d=0;d<this.items.length;d++){var e=this.items[d];e.ownerMenu=this,e.postRender()}b.on(this.getDom(),"mouseover",function(b){b=b||event;var d=b.relatedTarget||b.fromElement,e=a.getDom();!c.contains(e,d)&&e!==d&&a.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(a){if(a){if(c.contains(this.getDom(),a))return!1;for(var b=0;b<this.items.length;b++){var d=this.items[b];if(d.queryAutoHide(a)===!1)return!1}}},clearItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];clearTimeout(b._showingTimer),clearTimeout(b._closingTimer),b.subMenu&&b.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&b.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},a.inherits(g,e);var j=h.editor.ui.MenuItem=function(a){this.initOptions(a),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof g)&&(this.subMenu=new g(this.subMenu))};j.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a),a.subMenu&&a.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){a.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer),a._closingTimer=null,a.addState("opened")}),this.ownerMenu.addListener("hide",function(){a.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(b,c){c!==a&&a.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(b){return b&&c.contains(a.getDom(),b)?!1:this._bakQueryAutoHide(b)}),this.getDom().style.tabIndex="-1",c.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;a.isDisabled()||(a.addState("opened"),clearTimeout(a._showingTimer),clearTimeout(a._closingTimer),a._closingTimer=null,a._showingTimer=setTimeout(function(){a.showSubMenu()},250))},delayHideSubMenu:function(){var a=this;a.isDisabled()||(a.removeState("opened"),clearTimeout(a._showingTimer),a._closingTimer||(a._closingTimer=setTimeout(function(){a.hasState("opened")||a.hideSubMenu(),a._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(a)},_onClick:function(a,b){if(this.hasState("disabled"))return;this.fireEvent("click",a,b)!==!1&&(this.subMenu?this.showSubMenu():e.postHide())},showSubMenu:function(){var a=c.getClientRect(this.getDom());a.right-=5,a.left+=2,a.width-=7,a.top-=4,a.bottom+=4,a.height+=8,this.subMenu.showAnchorRect(a,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},a.inherits(j,d),a.extend(j.prototype,f,!0)}(),function(){var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.ui.Menu,d=h.editor.ui.SplitButton,e=h.editor.ui.Combox=function(a){this.initOptions(a),this.initCombox()};e.prototype={uiName:"combox",initCombox:function(){var a=this;this.items=this.items||[];for(var b=0;b<this.items.length;b++){var d=this.items[b];d.uiName="listitem",d.index=b,d.onclick=function(){a.selectByIndex(this.index)}}this.popup=new c({items:this.items,uiName:"list",editor:this.editor}),this.initSplitButton()},_SplitButton_postRender:d.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var a=b.getClientRect(this.getDom());a.top+=1,a.bottom-=1,a.height-=2,this.popup.showAnchorRect(a)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);b!=-1?(this.selectedIndex=b,this.setLabel(this.items[b].label),this.value=this.items[b].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(a)),this.value=a)},setLabel:function(a){this.getDom("button_body").innerHTML=a,this.label=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++)if(a==this.items[b].value)return b;return-1},getItem:function(a){return this.items[a]},selectByIndex:function(a){a<this.items.length&&this.fireEvent("select",a)!==!1&&(this.selectedIndex=a,this.value=this.items[a].value,this.setLabel(this.items[a].label))}},a.inherits(e,d)}(),function(){var a=h.editor.utils,b=h.editor.dom.domUtils,c=h.editor.ui.uiUtils,d=h.editor.ui.Mask,e=h.editor.ui.UIBase,f=h.editor.ui.Button,g=h.editor.ui.Dialog=function(b){this.initOptions(a.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(a,b){return b?this.onok():this.oncancel()}},b)),this.initDialog()},i,j;g.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var a=this;this.initUIBase(),this.modalMask=i||(i=new d({className:"edui-dialog-modalmask"})),this.dragMask=j||(j=new d({className:"edui-dialog-dragmask"})),this.closeButton=new f({className:"edui-dialog-closebutton",title:a.closeDialog,onclick:function(){a.close(!1)}});if(this.buttons)for(var b=0;b<this.buttons.length;b++)this.buttons[b]instanceof f||(this.buttons[b]=new f(this.buttons[b]))},fitSize:function(){var a=this.getDom("body"),b=this.mesureSize();return a.style.width=b.width+"px",a.style.height=b.height+"px",b},safeSetOffset:function(a){var b=this,d=b.getDom(),e=c.getViewportRect(),f=c.getClientRect(d),g=a.left;g+f.width>e.right&&(g=e.right-f.width);var h=a.top;h+f.height>e.bottom&&(h=e.bottom-f.height),d.style.left=Math.max(g,0)+"px",d.style.top=Math.max(h,0)+"px"},showAtCenter:function(){this.getDom().style.display="";var a=c.getViewportRect(),d=this.fitSize(),e=this.getDom("titlebar").offsetHeight|0,f=a.width/2-d.width/2,g=a.height/2-(d.height-e)/2-e,h=this.getDom();this.safeSetOffset({left:Math.max(f|0,0),top:Math.max(g|0,0)}),b.hasClass(h,"edui-state-centered")||(h.className+=" edui-state-centered"),this._show()},getContentHtml:function(){var a="";return typeof this.content=="string"?a=this.content:this.iframeUrl&&(a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),a},getHtmlTpl:function(){var a="";if(this.buttons){var b=[];for(var c=0;c<this.buttons.length;c++)b[c]=this.buttons[c].renderHtml();a='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+b.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div class="%%-wrap"><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+a+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var a=this;this.addListener("show",function(){a.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){a.modalMask.hide()});if(this.buttons)for(var d=0;d<this.buttons.length;d++)this.buttons[d].postRender();b.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a.safeSetOffset(c.getClientRect(a.getDom()))})}),this._hide()},mesureSize:function(){var a=this.getDom("body"),b=c.getClientRect(this.getDom("content")).width,d=a.style;return d.width=b,c.getClientRect(a)},_onTitlebarMouseDown:function(a,d){if(this.draggable){var e,f=c.getViewportRect(),g=this;c.startDrag(a,{ondragstart:function(){e=c.getClientRect(g.getDom()),g.getDom("contmask").style.visibility="visible",g.dragMask.show(g.getDom().style.zIndex-1)},ondragmove:function(a,b){var c=e.left+a,d=e.top+b;g.safeSetOffset({left:c,top:d})},ondragstop:function(){g.getDom("contmask").style.visibility="hidden",b.removeClasses(g.getDom(),["edui-state-centered"]),g.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml()},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10),this._hidden=!1,this.fireEvent("show"),h.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){this._hidden||(this.getDom().style.display="none",this.getDom().style.zIndex="",this._hidden=!0,this.fireEvent("hide"))},open:function(){if(this.autoReset)try{this.reset()}catch(a){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(b){}},_onCloseButtonClick:function(a,b){this.close(!1)},close:function(a){this.fireEvent("close",a)!==!1&&this._hide()}},a.inherits(g,e)}(),function(){var a=h.editor.utils,b=h.editor.ui.Menu,c=h.editor.ui.SplitButton,d=h.editor.ui.MenuButton=function(a){this.initOptions(a),this.initMenuButton()};d.prototype={initMenuButton:function(){var a=this;this.uiName="menubutton",this.popup=new b({items:a.items,className:a.className,editor:a.editor}),this.popup.addListener("show",function(){var b=this;for(var c=0;c<b.items.length;c++)b.items[c].removeState("checked"),b.items[c].value==a._value&&(b.items[c].addState("checked"),this.value=a._value)}),this.initSplitButton()},setValue:function(a){this._value=a}},a.inherits(d,c)}(),function(){var a=h.editor.utils,b=h.editor.ui,d=b.Dialog;b.Dialog=function(a){var b=new d(a);return b.addListener("hide",function(){if(b.editor){var a=b.editor;try{if(j.gecko){var c=a.window.scrollY,d=a.window.scrollX;a.body.focus(),a.window.scrollTo(d,c)}else a.focus()}catch(e){}}}),b};var i={anchor:"~/dialogs/anchor/anchor.html",inserttable:"~/dialogs/table/table.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",help:"~/dialogs/help/help.html",highlightcode:"~/dialogs/highlightcode/highlightcode.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html"},k=["undo","redo","formatmatch","bold","italic","underline","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","blockindent","pasteplain","pagebreak","selectall","print","preview","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable"];for(var l=0,m;m=k[l++];)m=m.toLowerCase(),b[m]=function(a){return function(c){var d=new b.Button({className:"edui-for-"+a,title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",onclick:function(){c.execCommand(a)},showText:!1});return c.addListener("selectionchange",function(b,e,f){var g=c.queryCommandState(a);g==-1?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(g))}),d}}(m);b.link=function(a){var c=new b.Button({className:"edui-for-link",title:a.options.labelMap.link||a.getLang("labelMap.link")||"",onclick:function(){function h(a){return f.test(a)}function i(a,b){a.html(b)}function j(){var c={target:"_blank"};b=$("#editorBlockValue").val();if(h(b))c.href=b,c.title=b,c.data_ue_src=b,a.execCommand("link",c),a.block.close();else return i($("#editorBlockError"),e),!1}var b="http://",c="",d=a.selection.getRange(),e='你输入的网址不正确，请检查一下。有困难，<a href="/help/" target="_blank">联系客服</a>',f=/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,\@\?\^=%&:\/~\+#]*[\w\-\@\?\^=%&\/~\+#])?/,g=v.findParentByTagName(a.selection.getStart(),"a",!0);isEdit=!!g,a.queryCommandState("link")===1&&isEdit&&(b=g.getAttribute("data_ue_src")||g.getAttribute("href",2));var c='<input id="editorBlockValue" type="text" value="'+b+'" class="gbtxt"><p class="gui-block-bd-do"><a id="editorBlockClose1" data-operation="confirm" href="javascript: void 0;" class="gbtn-primary">确定</a><a class="blockClose" href="javascript: void 0;">取消</a></p><p id="editorBlockError" class="gui-block-error">&nbsp;</p>';if(a.block.isOpen())return!1;d.collapsed?a.queryCommandValue("link"):a.selection.getStart(),a.block.open(c,[{event:"click",selector:"[data-operation=confirm]",func:j},{event:"keyup",selector:"#editorBlockValue",func:function(a){a.keyCode===13&&j()}}],function(a){a.find("input").eq(0).focus().select()}).title("插入链接").showCover()}});return a.ui._dialogs.linkDialog=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("link")==-1)}),c},b.insertimage=function(a){var c=new b.Button({className:"edui-for-insertimage",title:a.options.labelMap.cleardoc||a.getLang("labelMap.insertimage")||"",onclick:function(){function o(a){return i.test(a)}function p(a,b){a.html(b)}function q(){b=$("#editorBlockValue").val();if(l.length)a.execCommand("insertimage",l),a.block.close();else if(o(b))l.push({src:b,url:b,height:"",width:""}),a.execCommand("insertimage",l),a.block.close();else return p($("#editorBlockError"),h),!1}function r(a,b){return a.hasClass("hide")&&$("#editorBlockValue").select(),!0}var b="http://",c=a.selection.getRange(),d=v.findParentByTagName(a.selection.getStart(),"img",!0),h="图片不对呀！",i=/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,\@\?\^=%&:\/~\+#]*[\w\-\@\?\^=%&\/~\+#])?/,j,k,l=[],m=!!d;a.queryCommandState("insertimage")===1&&m&&(b=d.getAttribute("src")||b);var n='<ul class="gui-block-tab" id="editorBlockTab"><li class="current"><a href="javascript:void 0;">上传</a></li><li class=""><a href="javascript:void 0;">外链</a></li></ul>                        <div id="editorBlockTarget">                            <div style="display: block; ">                                <form action="/apis/image.json?enable_watermark=true" id="uploaderForm" method="POST" enctype="multipart/form-data" class="uploader">                                    <input type="file" name="fileUploader" />                                    <input type="submit" class="gbtn" value="提交" />                                </form>                            </div>                            <div class="hide" style="display: none; "><p class="gui-block-bd-hd"><span class="gui-block-bd-hd-title">图片URL地址：</span></p><input id="editorBlockValue" type="text" value="'+b+'" class="gbtxt">                            </div>                        <p class="gui-block-bd-do"><a id="editorBlockClose1" data-operation="confirm" href="javascript: void 0;" class="gbtn-primary">确定</a><a class="blockClose" href="javascript: void 0;">取消</a></p><p id="editorBlockError" class="gui-block-error">&nbsp;</p>                        </div>';if(a.block.isOpen())return!1;a.block.open(n,[{event:"click",selector:"[data-operation=confirm]",func:q},{event:"keyup",selector:"#editorBlockValue",func:function(a){a.keyCode===13&&q()}}],function(a){k=g("#editorBlockTab","li","#editorBlockTarget","div","current",null,r),m&&k.set(1),a.find("input").eq(0).focus().select(),j=new e("#uploaderForm","/apis/image.json?enable_watermark=true",{maxCount:50,params:{access_token:f.getToken()}}),j.on("success",function(a,b){b.ok&&b.result&&(b.result.src=b.result.url,l.push(b.result))})}).title("插入图片").showCover()}});return a.ui._dialogs.insertimageDialog=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("insertimage")==-1)}),c},b.insertvideo=function(a){var d=new b.Button({className:"edui-for-insertvideo",title:a.options.labelMap.cleardoc||a.getLang("labelMap.insertvideo")||"",onclick:function(){function h(a){return g.test(a)}function i(a,b){a.html(b)}function j(){var d={target:"_blank"};b=$("#editorBlockValue").val();if(h(b)&&c.tValidateFlash(b))d.url=b,a.execCommand("insertvideo",d),a.block.close();else return i($("#editorBlockError"),f),!1}var b="",d='<input id="editorBlockValue" type="text" value="http://" class="gbtxt"><p class="gui-block-bd-do"><a id="editorBlockClose1" data-operation="confirm" href="javascript: void 0;" class="gbtn-primary">确定</a><a class="blockClose" href="javascript: void 0;">取消</a></p><p id="editorBlockError" class="gui-block-error">&nbsp;</p>',e=a.selection.getRange(),f="你输入的网址不正确，请检查一下。",g=/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,\@\?\^=%&:\/~\+#]*[\w\-\@\?\^=%&\/~\+#])?/;if(a.block.isOpen())return!1;a.block.open(d,[{event:"click",selector:"[data-operation=confirm]",func:j},{event:"keyup",selector:"#editorBlockValue",func:function(a){a.keyCode===13&&j()}}],function(a){a.find("input").eq(0).focus().select()}).title("插入视频").showCover()}});return a.ui._dialogs.insertvideoDialog=d,a.addListener("selectionchange",function(){d.setDisabled(a.queryCommandState("insertvideo")==-1)}),d},b.insertmathjax=function(a){var c="",d=new b.Button({className:"edui-for-insertmathjax",title:a.options.labelMap.insertmathjax||a.getLang("labelMap.insertmathjax")||"",onclick:function(){function k(){var b={};b.text=$("#editorBlockValue").val();if(!$.trim(b.text)){$("#previewTxt").text("").hide(),$("#previewImg").show();return}b.isBlock=!!$("#previewMathJax").find("div").length,pretext===$.trim($("#editorBlockValue").val())&&$("#previewTxt").text()===""?(b.url=c,i&&e.deleteContents(),a.execCommand("insertmathjax",b),a.block.close()):$.ajax({url:"/apis/formula.json",type:"post",data:{tex:b.text},success:function(c){c.ok&&(b.url=c.result.url,i&&e.deleteContents(),a.execCommand("insertmathjax",b),a.block.close())},error:function(a){var b=$.parseJSON(a.responseText),c=b.error_code;c===206010?($("#previewTxt").text("公式有误，请检查一下吧。").show(),$("#previewImg").hide()):($("#previewTxt").text("公式编辑有错误。").show(),$("#previewImg").hide())},dataType:"json"})}function l(){a.block.close()}var b="",d="",e=a.selection.getRange(),f=e.getClosedNode(),g=e.startContainer,h="edui-faked-insertmathjax",i=f&&!!UE.dom.domUtils.hasClass(f,h),j;a.queryCommandState("insertmathjax")===1&&i&&(b=f.getAttribute("data-code"),e.selectNode(f)),d='<textarea id="editorBlockValue" class="gttxt" cols="40" rows="5">'+b+'</textarea><div id="previewMathJax" style="margin-top:8px;"><p id="previewTxt" style="display:none;"></p><img src="" id="previewImg"/></div><p class="gui-block-bd-do"><a href="javascript:void 0;" data-operation="preview"  class="gbtn-primary">预览</a><a id="editorBlockClose1" data-operation="confirm" href="javascript: void 0;" class="gbtn-primary">确定</a><a class="blockClose" href="javascript: void 0;">取消</a><a href="http://www.guokr.com/question/436807/" target="_blank">如何插入公式？</a></p>',pretext="";if(a.block.isOpen())return!1;a.block.open(d,[{event:"click",selector:"[data-operation=confirm]",func:k},{event:"click",selector:"[data-operation=preview]",func:function(){if(pretext===$.trim($("#editorBlockValue").val()))return;if($.trim($("#editorBlockValue").val())===""){$("#previewTxt").text("").hide(),$("#previewImg").show();return}pretext=$.trim($("#editorBlockValue").val()),$.ajax({url:"/apis/formula.json",type:"post",data:{tex:pretext},success:function(a){a.ok&&($("#previewTxt").text("").hide(),$("#previewImg").attr("src",a.result.url).show(),c=a.result.url)},error:function(a){var b=$.parseJSON(a.responseText),c=b.error_code;c===206010?($("#previewTxt").text("公式有误，请检查一下吧。").show(),$("#previewImg").hide()):($("#previewTxt").text("公式编辑有错误。").show(),$("#previewImg").hide())},dataType:"json"})}}],function(a){a.find("textarea").eq(0).focus().select()}).title("插入公式").showCover()}});return a.ui._dialogs.insertmathjaxDialog=d,a.addListener("selectionchange",function(){d.setDisabled(a.queryCommandState("insertmathjax")==-1)}),d},b.insertcode=function(a){var c="",d=new b.Button({className:"edui-for-insertcode",title:a.options.labelMap.insertcode||a.getLang("labelMap.insertcode")||"",onclick:function(){function j(){var b={};b.text=$("#editorBlockValue").val();if(!$.trim(b.text)){alert("请输入代码");return}a.execCommand("insertcode",b),a.block.close()}var b="",c="",d=a.selection.getRange(),e=d.getClosedNode(),f=d.startContainer,g="edui-faked-insertcode",h=e&&!!UE.dom.domUtils.hasClass(e,g),i;a.queryCommandState("insertcode")===1&&h&&d.selectNode(e),c='<textarea id="editorBlockValue" class="gttxt" cols="40" rows="5">'+b+'</textarea><div id="previewMathJax" style="margin-top:8px;"><img src="" id="previewImg"/></div><p class="gui-block-bd-do"><a id="editorBlockClose1" data-operation="confirm" href="javascript: void 0;" class="gbtn-primary">确定</a><a class="blockClose" href="javascript: void 0;">取消</a></p>',pretext="";if(a.block.isOpen())return!1;a.block.open(c,[{event:"click",selector:"[data-operation=confirm]",func:j}],function(a){a.find("textarea").eq(0).focus().select()}).title("插入代码").showCover()}});return a.ui._dialogs.insertcodeDialog=d,a.addListener("selectionchange",function(){d.setChecked(a.queryCommandState("insertcode"))}),d},b.cleardoc=function(a){var c=new b.Button({className:"edui-for-cleardoc",title:a.options.labelMap.cleardoc||a.getLang("labelMap.cleardoc")||"",onclick:function(){confirm(a.getLang("confirmClear"))&&a.execCommand("cleardoc")}});return a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("cleardoc")==-1)}),c};var n={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var o in n)(function(a,c){for(var d=0,e;e=c[d++];)(function(c){b[a.replace("float","")+c]=function(d){var e=new b.Button({className:"edui-for-"+a.replace("float","")+c,title:d.options.labelMap[a.replace("float","")+c]||d.getLang("labelMap."+a.replace("float","")+c)||"",onclick:function(){d.execCommand(a,c)}});return d.addListener("selectionchange",function(b,f,g){e.setDisabled(d.queryCommandState(a)==-1),e.setChecked(d.queryCommandValue(a)==c&&!g)}),e}})(e)})(o,n[o]);for(var l=0,m;m=["backcolor","forecolor"][l++];)b[m]=function(a){return function(c){var d=new b.ColorButton({className:"edui-for-"+a,color:"default",title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",editor:c,onpickcolor:function(b,d){c.execCommand(a,d)},onpicknocolor:function(){c.execCommand(a,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){c.execCommand(a,this.color)}});return c.addListener("selectionchange",function(){d.setDisabled(c.queryCommandState(a)==-1)}),d}}(m);var p={noOk:["searchreplace","help","spechars","webapp"],ok:["attachment","anchor","map","gmap","insertframe","wordimage","highlightcode","insertframe","edittd","scrawl","template","background"]};for(var o in p)(function(c,d){for(var e=0,f;f=d[e++];){if(j.opera&&f==="searchreplace")continue;(function(d){b[d]=function(e,f,g){f=f||(e.options.iframeUrlMap||{})[d]||i[d],g=e.options.labelMap[d]||e.getLang("labelMap."+d)||"";var h;f&&(h=new b.Dialog(a.extend({iframeUrl:e.ui.mapUrl(f),editor:e,className:"edui-for-"+d,title:g,closeDialog:e.getLang("closeDialog")},c=="ok"?{buttons:[{className:"edui-okbutton",label:e.getLang("ok"),onclick:function(){h.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),onclick:function(){h.close(!1)}}]}:{})),e.ui._dialogs[d+"Dialog"]=h);var j=new b.Button({className:"edui-for-"+d,title:g,onclick:function(){if(h)switch(d){case"wordimage":e.execCommand("wordimage","word_img"),e.word_img&&(h.render(),h.open());break;case"scrawl":e.queryCommandState("scrawl")!=-1&&(h.render(),h.open());break;default:h.render(),h.open()}},disabled:d=="scrawl"&&e.queryCommandState("scrawl")==-1});return e.addListener("selectionchange",function(){var a={edittd:1,edittable:1};if(d in a)return;var b=e.queryCommandState(d);j.setDisabled(b==-1),j.setChecked(b)}),j}})(f.toLowerCase())}})(o,p[o]);b.snapscreen=function(a,c,d){d=a.options.labelMap.snapscreen||a.getLang("labelMap.snapscreen")||"";var e=new b.Button({className:"edui-for-snapscreen",title:d,onclick:function(){a.execCommand("snapscreen")},disabled:!j.ie});if(j.ie){c=c||(a.options.iframeUrlMap||{}).snapscreen||i.snapscreen;if(c){var f=new b.Dialog({iframeUrl:a.ui.mapUrl(c),editor:a,className:"edui-for-snapscreen",title:d,buttons:[{className:"edui-okbutton",label:a.getLang("ok"),onclick:function(){f.close(!0)}},{className:"edui-cancelbutton",label:a.getLang("cancel"),onclick:function(){f.close(!1)}}]});f.render(),a.ui._dialogs.snapscreenDialog=f}}return a.addListener("selectionchange",function(){e.setDisabled(a.queryCommandState("snapscreen")==-1)}),e},b.fontfamily=function(c,d,e){d=c.options.fontfamily||[],e=c.options.labelMap.fontfamily||c.getLang("labelMap.fontfamily")||"";for(var f=0,g,h=[];g=d[f];f++){var i=c.getLang("fontfamily")[g.name]||"";(function(b,c){h.push({label:b,value:c,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+a.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(g.label||i,g.val)}var j=new b.Combox({editor:c,items:h,onselect:function(a,b){c.execCommand("FontFamily",this.items[b].value)},onbuttonclick:function(){this.showPopup()},title:e,initValue:e,className:"edui-for-fontfamily",indexByValue:function(a){if(a)for(var b=0,c;c=this.items[b];b++)if(c.value.indexOf(a)!=-1)return b;return-1}});return c.addListener("selectionchange",function(a,b,d){if(!d){var e=c.queryCommandState("FontFamily");if(e==-1)j.setDisabled(!0);else{j.setDisabled(!1);var f=c.queryCommandValue("FontFamily");f&&(f=f.replace(/['"]/g,"").split(",")[0]),j.setValue(f)}}}),j},b.fontsize=function(a,c,d){d=a.options.labelMap.fontsize||a.getLang("labelMap.fontsize")||"",c=c||a.options.fontsize||[];var e=[];for(var f=0;f<c.length;f++){var g=c[f]+"px";e.push({label:g,value:g,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var h=new b.Combox({editor:a,items:e,title:d,initValue:d,onselect:function(b,c){a.execCommand("FontSize",this.items[c].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("FontSize");e==-1?h.setDisabled(!0):(h.setDisabled(!1),h.setValue(a.queryCommandValue("FontSize")))}}),h},b.paragraph=function(a,c,d){d=a.options.labelMap.paragraph||a.getLang("labelMap.paragraph")||"",c=a.options.paragraph||[];var e=[];for(var f in c)e.push({value:f,label:c[f]||a.getLang("paragraph")[f],renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var g=new b.Combox({editor:a,items:e,title:d,initValue:d,className:"edui-for-paragraph",onselect:function(b,c){a.execCommand("Paragraph",this.items[c].value)},onbuttonclick:function(){this.showPopup()}});return a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("Paragraph");if(e==-1)g.setDisabled(!0);else{g.setDisabled(!1);var f=a.queryCommandValue("Paragraph"),h=g.indexByValue(f);h!=-1?g.setValue(f):g.setValue(g.initValue)}}}),g},b.customstyle=function(a){var c=a.options.customstyle||[],d=a.options.labelMap.customstyle||a.getLang("labelMap.customstyle")||"";if(!c)return;var e=a.getLang("customstyle");for(var f=0,g=[],h;h=c[f++];)(function(a){var b={};b.label=a.label?a.label:e[a.name],b.style=a.style,b.className=a.className,b.tag=a.tag,g.push({label:b.label,value:b,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+b.tag+" "+(b.className?' class="'+b.className+'"':"")+(b.style?' style="'+b.style+'"':"")+">"+b.label+"</"+b.tag+">"+"</div>"}})})(h);var i=new b.Combox({editor:a,items:g,title:d,initValue:d,className:"edui-for-customstyle",onselect:function(b,c){a.execCommand("customstyle",this.items[c].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(a){for(var b=0,c;c=this.items[b++];)if(c.label==a)return b-1;return-1}});return a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("customstyle");if(e==-1)i.setDisabled(!0);else{i.setDisabled(!1);var f=a.queryCommandValue("customstyle"),g=i.indexByValue(f);g!=-1?i.setValue(f):i.setValue(i.initValue)}}}),i},b.inserttable=function(a,c,d){c=c||(a.options.iframeUrlMap||{}).inserttable||i.inserttable,d=a.options.labelMap.inserttable||a.getLang("labelMap.inserttable")||"";if(c){var e=new b.Dialog({iframeUrl:a.ui.mapUrl(c),editor:a,className:"edui-for-inserttable",title:d,buttons:[{className:"edui-okbutton",label:a.getLang("ok"),onclick:function(){e.close(!0)}},{className:"edui-cancelbutton",label:a.getLang("cancel"),onclick:function(){e.close(!1)}}]});e.render(),a.ui._dialogs.inserttableDialog=e}var f=function(){e&&(j.webkit&&(e.open(),e.close()),e.open())},g=new b.TableButton({editor:a,title:d,className:"edui-for-inserttable",onpicktable:function(b,c,d){a.execCommand("InsertTable",{numRows:d,numCols:c,border:1})},onmore:f,onbuttonclick:f});return a.addListener("selectionchange",function(){g.setDisabled(a.queryCommandState("inserttable")==-1)}),g},b.lineheight=function(a){var c=a.options.lineheight;for(var d=0,e,f=[];e=c[d++];)f.push({label:e,value:e,onclick:function(){a.execCommand("lineheight",this.value)}});var g=new b.MenuButton({editor:a,className:"edui-for-lineheight",title:a.options.labelMap.lineheight||a.getLang("labelMap.lineheight")||"",items:f,onbuttonclick:function(){var b=a.queryCommandValue("LineHeight")||this.value;a.execCommand("LineHeight",b)}});return a.addListener("selectionchange",function(){var b=a.queryCommandState("LineHeight");if(b==-1)g.setDisabled(!0);else{g.setDisabled(!1);var c=a.queryCommandValue("LineHeight");c&&g.setValue((c+"").replace(/cm/,"")),g.setChecked(b)}}),g};var q=["top","bottom"];for(var r=0,s;s=q[r++];)(function(a){b["rowspacing"+a]=function(c){var d=c.options["rowspacing"+a];for(var e=0,f,g=[];f=d[e++];)g.push({label:f,value:f,onclick:function(){c.execCommand("rowspacing",this.value,a)}});var h=new b.MenuButton({editor:c,className:"edui-for-rowspacing"+a,title:c.options.labelMap["rowspacing"+a]||c.getLang("labelMap.rowspacing"+a)||"",items:g,onbuttonclick:function(){var b=c.queryCommandValue("rowspacing",a)||this.value;c.execCommand("rowspacing",b,a)}});return c.addListener("selectionchange",function(){var b=c.queryCommandState("rowspacing",a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue("rowspacing",a);d&&h.setValue((d+"").replace(/%/,"")),h.setChecked(b)}}),h}})(s);var t=["insertorderedlist","insertunorderedlist"];for(var u=0,w;w=t[u++];)(function(a){b[a]=function(c){var d=c.options[a],e=function(){c.execCommand(a,this.value)},f=[];for(var g in d)f.push({label:d[g]||c.getLang()[a][g]||"",value:g,onclick:e});var h=new b.Button({className:"edui-for-"+a,title:c.getLang("labelMap."+a)||"",onclick:function(){var b=c.queryCommandValue(a)||this.value;c.execCommand(a,b)}});return c.addListener("selectionchange",function(){var b=c.queryCommandState(a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue(a);h.setChecked(b)}}),h}})(w);b.fullscreen=function(a,c){c=a.options.labelMap.fullscreen||a.getLang("labelMap.fullscreen")||"";var d=new b.Button({className:"edui-for-fullscreen",title:c,onclick:function(){a.ui&&a.ui.setFullScreen(!a.ui.isFullScreen()),this.setChecked(a.ui.isFullScreen())}});return a.addListener("selectionchange",function(){var b=a.queryCommandState("fullscreen");d.setDisabled(b==-1),d.setChecked(a.ui.isFullScreen())}),d},b.emotion=function(a,c){var d=new b.MultiMenuPop({title:a.options.labelMap.emotion||a.getLang("labelMap.emotion")||"",editor:a,className:"edui-for-emotion",iframeUrl:a.ui.mapUrl(c||(a.options.iframeUrlMap||{}).emotion||i.emotion)});return a.addListener("selectionchange",function(){d.setDisabled(a.queryCommandState("emotion")==-1)}),d},b.autotypeset=function(a){var c=new b.AutoTypeSetButton({editor:a,title:a.options.labelMap.autotypeset||a.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){a.execCommand("autotypeset")}});return a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("autotypeset")==-1)}),c}}(),function(){function e(a){this.initOptions(a),this.initEditorUI()}var a=h.editor.utils,b=h.editor.ui.uiUtils,c=h.editor.ui.UIBase,d=h.editor.dom.domUtils;e.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var a=this.editor,b=this;a.addListener("ready",function(){a.getDialog=function(b){return a.ui._dialogs[b+"Dialog"]},d.on(a.window,"scroll",function(){h.editor.ui.Popup.postHide()}),a.options.elementPathEnabled&&(a.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+a.getLang("elementPathTip")+":</div>"),a.options.wordCount&&(a.ui.getDom("wordcount").innerHTML=a.getLang("wordCountTip"),a.addListener("keyup",function(a,c){var d=c.keyCode||c.which;d==32&&b._wordCount()})),!a.options.elementPathEnabled&&!a.options.wordCount&&(a.ui.getDom("elementpath").style.display="none",a.ui.getDom("wordcount").style.display="none");if(!a.selection.isFocus())return;a.fireEvent("selectionchange",!1,!0)}),a.addListener("mousedown",function(a,b){var c=b.target||b.srcElement;h.editor.ui.Popup.postHide(c)}),a.addListener("contextmenu",function(a,b){h.editor.ui.Popup.postHide()}),a.addListener("selectionchange",function(){a.options.elementPathEnabled&&b[(a.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),a.options.wordCount&&b[(a.queryCommandState("wordcount")==-1?"dis":"en")+"ableWordCount"]()});var c=new h.editor.ui.Popup({editor:a,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),a.ui._dialogs.linkDialog._onClick()},_onImgEditButtonClick:function(b){this.hide(),a.ui._dialogs[b]&&a.ui._dialogs[b]._onClick()},_onEditMathJaxClick:function(){this.hide(),a.ui._dialogs.insertmathjaxDialog._onClick()},_onImgSetFloat:function(b){this.hide(),a.execCommand("imagefloat",b)},_setIframeAlign:function(a){var b=c.anchorEl,e=b.cloneNode(!0);switch(a){case-2:e.setAttribute("align","");break;case-1:e.setAttribute("align","left");break;case 1:e.setAttribute("align","right");break;case 2:e.setAttribute("align","middle")}b.parentNode.insertBefore(e,b),d.remove(b),c.anchorEl=e,c.showAnchor(c.anchorEl)},_updateIframe:function(){a._iframe=c.anchorEl,a.ui._dialogs.insertframeDialog.open(),c.hide()},_onRemoveButtonClick:function(b){a.execCommand(b),this.hide()},queryAutoHide:function(b){if(b&&b.ownerDocument==a.document)if(b.tagName.toLowerCase()=="img"||d.findParentByTagName(b,"a",!0))return b!==c.anchorEl;return h.editor.ui.Popup.prototype.queryAutoHide.call(this,b)}});c.render(),a.options.imagePopup&&(a.addListener("mouseover",function(b,d){d=d||window.event;var e=d.target||d.srcElement;if(a.ui._dialogs.insertframeDialog&&/iframe/ig.test(e.tagName)){var f=c.formatHtml("<nobr>"+a.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+a.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+a.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+a.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._setIframeAlign(2) class="edui-clickable">'+a.getLang("justifycenter")+"</span>"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+a.getLang("modify")+"</span></nobr>");f?(c.getDom("content").innerHTML=f,c.anchorEl=e,c.showAnchor(c.anchorEl)):c.hide()}}),a.addListener("selectionchange",function(b,e){if(!e)return;var f="",g=a.selection.getRange().getClosedNode(),i=a.ui._dialogs;if(g&&g.tagName=="IMG"){var j="insertimageDialog";g.className.indexOf("edui-faked-video")!=-1&&(j="insertvideoDialog"),g.className.indexOf("edui-faked-webapp")!=-1&&(j="webappDialog"),g.src.indexOf("http://api.map.baidu.com")!=-1&&(j="mapDialog"),g.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1&&(j="gmapDialog"),g.getAttribute("anchorname")&&(j="anchorDialog",f=c.formatHtml("<nobr>"+a.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+a.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+a.getLang("delete")+"</span></nobr>")),g.getAttribute("word_img")&&(a.word_img=[g.getAttribute("word_img")],j="wordimageDialog");if(!i[j])return;g.getAttribute("data-code")||!f&&(f=c.formatHtml("<nobr>"+a.getLang("anthorMsg")+': <a target="_blank" href="'+g.title+'" >'+g.title+"</a>"+"&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+j+'\');" class="edui-clickable">'+a.getLang("modify")+"</span></nobr>"))}if(a.ui._dialogs.linkDialog){var k=d.findParentByTagName(a.selection.getStart(),"a",!0),l;if(k&&(l=k.getAttribute("data_ue_src")||k.getAttribute("href",2))){var m=l;l.length>30&&(m=l.substring(0,20)+"..."),f&&(f+='<div style="height:5px;"></div>'),f+=c.formatHtml("<nobr>"+a.getLang("anthorMsg")+': <a target="_blank" href="'+l+'" title="'+l+'" >'+m+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+a.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+a.getLang("clear")+"</span></nobr>"),c.showAnchor(k)}}if(a.ui._dialogs.insertmathjaxDialog){var n=d.findParent(a.selection.getStart(),null,!0);n&&UE.dom.domUtils.hasClass(n,"edui-faked-insertmathjax")&&(f+=c.formatHtml('<nobr><span class="edui-clickable" onclick="$$._onEditMathJaxClick();">'+a.getLang("modify")+"</span></nobr>"))}if(f){c.getDom("content").innerHTML=f,c.anchorEl=g||k||n,c.showAnchor(c.anchorEl);if(n){var o=h.editor.ui.uiUtils.getClientRect(n);o.right=o.left,o.width=0,c.showAnchorRect(o)}}else c.hide()}))},_initToolbars:function(){var a=this.editor,b=this.toolbars||[],c=[];for(var d=0;d<b.length;d++){var e=b[d],f=new h.editor.ui.Toolbar;for(var g=0;g<e.length;g++){var i=e[g],j=null;if(typeof i=="string"){i=i.toLowerCase(),i=="|"&&(i="Separator"),h.editor.ui[i]&&(j=new h.editor.ui[i](a));if(i=="fullscreen"){c&&c[0]?c[0].items.splice(0,0,j):j&&f.items.splice(0,0,j);continue}}else j=i;j&&f.add(j)}c[d]=f}this.toolbars=c},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder"></div>'+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+"</tr></table></div>"+"</div>"},showWordImageDialog:function(){this.editor.execCommand("wordimage","word_img"),this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var a=[];for(var b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},setFullScreen:function(a){if(this._fullscreen!=a){this._fullscreen=a,this.editor.fireEvent("beforefullscreenchange",a);var b=this.editor;if(h.editor.browser.gecko)var c=b.selection.getRange().createBookmark();a?(this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakAutoHeight&&(b.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,this._updateFullScreen()):(this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(b.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,window.scrollTo(0,this._bakScrollTop));if(h.editor.browser.gecko){var d=document.createElement("input");document.body.appendChild(d),b.body.contentEditable=!1,setTimeout(function(){d.focus(),setTimeout(function(){b.body.contentEditable=!0,b.selection.getRange().moveToBookmark(c).select(!0),h.editor.dom.domUtils.remove(d),a&&window.scroll(0,0)})})}this.editor.fireEvent("fullscreenchanged",a),this.triggerLayout()}},_wordCount:function(){var a=this.getDom("wordcount");if(!this.editor.options.wordCount){a.style.display="none";return}a.innerHTML=this.editor.queryCommandValue("wordcount")},disableWordCount:function(){var a=this.getDom("wordcount");a.innerHTML="",a.style.display="none",this.wordcount=!1},enableWordCount:function(){var a=this.getDom("wordcount");a.style.display="",this.wordcount=!0,this._wordCount()},_updateFullScreen:function(){if(this._fullscreen){var a=b.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(this.getDom().style.zIndex*1+100),b.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0))}},_updateElementPath:function(){var a=this.getDom("elementpath"),b;if(this.elementPathEnabled&&(b=this.editor.queryCommandValue("elementpath"))){var c=[];for(var d=0,e;e=b[d];d++)c[d]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+d+'&quot;);">'+e+"</span>");a.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+c.join(" &gt; ")+"</div>"}else a.style.display="none"},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="",a.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var a=this.getDom("elementpath");a.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},isFullScreen:function(){return this._fullscreen},postRender:function(){c.prototype.postRender.call(this);for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].postRender();var b=this,d,e=h.editor.dom.domUtils,f=function(){clearTimeout(d),d=setTimeout(function(){b._updateFullScreen()})};e.on(window,"resize",f),b.addListener("destroy",function(){e.un(window,"resize",f),clearTimeout(d)})},showToolbarMsg:function(a,b){this.getDom("toolbarmsg_label").innerHTML=a,this.getDom("toolbarmsg").style.display="";if(!b){var c=this.getDom("upload_dialog");c.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();a.style.zoom=="1"?a.style.zoom="100%":a.style.zoom="1"}},a.inherits(e,h.editor.ui.UIBase),h.editor.ui.Editor=function(b){var c=new h.editor.Editor(b);c.options.editor=c;var d=c.render;return c.render=function(b){a.domReady(function(){function a(){c.setOpt({labelMap:c.options.labelMap||UE.I18N[c.options.lang].labelMap,paragraph:c.options.paragraph||UE.I18N[c.options.lang].paragraph}),new e(c.options);if(b){b.constructor===String&&(b=document.getElementById(b)),b&&b.getAttribute("name")&&(c.options.textarea=b.getAttribute("name"));if(b&&/script|textarea/ig.test(b.tagName)){var a=document.createElement("div");b.parentNode.insertBefore(a,b);var f=b.value||b.innerHTML;f=c.ubbparser.UBBtoHTML(f),c.options.initialContent=/^[\t\r\n ]*$/.test(f)?c.options.initialContent:f.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),b.id&&(a.id=b.id),b.className&&(a.className=b.className),b.style.cssText&&(a.style.cssText=b.style.cssText),/textarea/i.test(b.tagName)?(c.textarea=b,c.textarea.style.display="none"):b.parentNode.removeChild(b),b=a,b.innerHTML=""}}c.ui.render(b);var g=c.ui.getDom("iframeholder");c.container=c.ui.getDom(),c.container.style.zIndex=c.options.zIndex,d.call(c,g)}c.langIsReady?a():c.addListener("langReady",a)})},c}}(),function(){var a=h.editor.utils,b=h.editor.ui.Popup,c=h.editor.ui.SplitButton,d=h.editor.ui.MultiMenuPop=function(a){this.initOptions(a),this.initMultiMenu()};d.prototype={initMultiMenu:function(){var a=this;this.popup=new b({content:"",editor:a.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+a.id+'_iframe" src="'+a.iframeUrl+'" frameborder="0"></iframe>',a.editor.container.style.zIndex&&(this.getDom().style.zIndex=a.editor.container.style.zIndex*1+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},a.inherits(d,c)}(),UE.plugins.basestyle=function(){var a={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},b=function(a,b){var c=a.selection.getStartElementPath();return o.findNode(c,b)},c=this;for(var d in a)(function(a,d){c.commands[a]={execCommand:function(a){var e=new i.Range(c.document),f="";if(c.currentSelectedArr&&c.currentSelectedArr.length>0){for(var g=0,h;h=c.currentSelectedArr[g++];)h.style.display!="none"&&(e.selectNodeContents(h).select(),!f&&(f=b(this,d)),(a=="superscript"||a=="subscript")&&(!f||f.tagName.toLowerCase()!=a)&&e.removeInlineStyle(["sub","sup"]),f?e.removeInlineStyle(d):e.applyInlineStyle(d[0]));e.selectNodeContents(c.currentSelectedArr[0]).select()}else{e=c.selection.getRange(),f=b(this,d);if(e.collapsed){if(f){var j=c.document.createTextNode("");e.insertNode(j).removeInlineStyle(d),e.setStartBefore(j),v.remove(j)}else{var k=e.document.createElement(d[0]);if(a=="superscript"||a=="subscript")j=c.document.createTextNode(""),e.insertNode(j).removeInlineStyle(["sub","sup"]).setStartBefore(j).collapse(!0);e.insertNode(k).setStart(k,0)}e.collapse(!0)}else(a=="superscript"||a=="subscript")&&(!f||f.tagName.toLowerCase()!=a)&&e.removeInlineStyle(["sub","sup"]),f?e.removeInlineStyle(d):e.applyInlineStyle(d[0]);e.select()}return!0},queryCommandState:function(){return this.highlight?-1:b(this,d)?1:0}}})(d,a[d])},UE.plugins.paragraph=function(){var a=this,b=v.isBlockElm,c=["TD","LI","PRE"],d=function(a,d,e,f){var g=a.createBookmark(),h=function(a){return a.nodeType==1?a.tagName.toLowerCase()!="br"&&!v.isBookmarkNode(a):!v.isWhitespace(a)},i;a.enlarge(!0);var j=a.createBookmark(),k=v.getNextDomNode(j.start,!1,h),l=a.cloneRange(),m;while(k&&!(v.getPosition(k,j.end)&v.POSITION_FOLLOWING))if(k.nodeType==3||!b(k)){l.setStartBefore(k);while(k&&k!==j.end&&!b(k))m=k,k=v.getNextDomNode(k,!1,null,function(a){return!b(a)});l.setEndAfter(m),i=a.document.createElement(d),e&&(v.setAttributes(i,e),f&&f=="customstyle"&&e.style&&(i.style.cssText=e.style)),i.appendChild(l.extractContents()),v.isEmptyNode(i)&&v.fillChar(a.document,i),l.insertNode(i);var n=i.parentNode;if(b(n)&&!v.isBody(i.parentNode)&&o.indexOf(c,n.tagName)==-1){if(!f||f!="customstyle")n.getAttribute("dir")&&i.setAttribute("dir",n.getAttribute("dir")),n.style.cssText&&(i.style.cssText=n.style.cssText+";"+i.style.cssText),n.style.textAlign&&!i.style.textAlign&&(i.style.textAlign=n.style.textAlign),n.style.textIndent&&!i.style.textIndent&&(i.style.textIndent=n.style.textIndent),n.style.padding&&!i.style.padding&&(i.style.padding=n.style.padding);e&&/h\d/i.test(n.tagName)&&!/h\d/i.test(i.tagName)?(v.setAttributes(n,e),f&&f=="customstyle"&&e.style&&(n.style.cssText=e.style),v.remove(i,!0),i=n):v.remove(i.parentNode,!0)}o.indexOf(c,n.tagName)!=-1?k=n:k=i,k=v.getNextDomNode(k,!1,h)}else k=v.getNextDomNode(k,!0,h);return a.moveToBookmark(j).moveToBookmark(g)};a.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),a.commands.paragraph={execCommand:function(a,b,c,e){var f=this.selection.getRange();if(f.collapsed){var g=this.document.createTextNode("p");f.insertNode(g);if(j.ie){var h=g.previousSibling;h&&v.isWhitespace(h)&&v.remove(h),h=g.nextSibling,h&&v.isWhitespace(h)&&v.remove(h)}}f=d(f,b,c,e),g&&(f.setStartBefore(g).collapse(!0),pN=g.parentNode,v.remove(g),v.isBlockElm(pN)&&v.isEmptyNode(pN)&&v.fillNode(this.document,pN));if(j.gecko&&f.collapsed&&f.startContainer.nodeType==1){var i=f.startContainer.childNodes[f.startOffset];i&&i.nodeType==1&&i.tagName.toLowerCase()==b&&f.setStart(i,0).collapse(!0)}return f.select(),!0},queryCommandValue:function(){var a=v.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return a?a.tagName.toLowerCase():""}}},UE.plugins.list=function(){function c(a,b,c){var d=a.nextSibling;d&&d.nodeType==1&&d.tagName.toLowerCase()==b&&(v.getStyle(d,"list-style-type")||(b=="ol"?"decimal":"disc"))==c&&(v.moveChild(d,a),d.childNodes.length==0&&v.remove(d));var e=a.previousSibling;e&&e.nodeType==1&&e.tagName.toLowerCase()==b&&(v.getStyle(e,"list-style-type")||(b=="ol"?"decimal":"disc"))==c&&v.moveChild(a,e),a.childNodes.length==0&&v.remove(a)}var a=this,b={TD:1,PRE:1,BLOCKQUOTE:1,BLOCKINDENT:1};a.addListener("keydown",function(b,c){function d(){c.preventDefault?c.preventDefault():c.returnValue=!1,a.undoManger&&a.undoManger.save()}var e=c.keyCode||c.which;if(e==13){var f=a.selection.getRange(),g=v.findParentByTagName(f.startContainer,["ol","ul"],!0,function(a){return a.tagName=="TABLE"}),h=v.findParentByTagName(f.endContainer,["ol","ul"],!0,function(a){return a.tagName=="TABLE"});if(g&&h&&g===h){if(!f.collapsed){g=v.findParentByTagName(f.startContainer,"li",!0),h=v.findParentByTagName(f.endContainer,"li",!0);if(!g||!h||g!==h){var i=f.cloneRange(),j=i.collapse(!1).createBookmark();f.deleteContents(),i.moveToBookmark(j);var k=v.findParentByTagName(i.startContainer,"li",!0),l=k.previousSibling,m=k.nextSibling;l&&(k=l,l.firstChild&&v.isBlockElm(l.firstChild)&&(l=l.firstChild),v.isEmptyNode(l)&&v.remove(k)),m&&(k=m,m.firstChild&&v.isBlockElm(m.firstChild)&&(m=m.firstChild),v.isEmptyNode(m)&&v.remove(k)),i.select(),d();return}f.deleteContents(),k=v.findParentByTagName(f.startContainer,"li",!0);if(k&&v.isEmptyBlock(k)){l=k.previousSibling,m=k.nextSibling,p=a.document.createElement("p"),v.fillNode(a.document,p),n=k.parentNode,l&&m?(f.setStart(m,0).collapse(!0).select(!0),v.remove(k)):(!l&&!m||!l?n.parentNode.insertBefore(p,n):k.parentNode.parentNode.insertBefore(p,n.nextSibling),v.remove(k),n.firstChild||v.remove(n),f.setStart(p,0).setCursor()),d();return}}k=v.findParentByTagName(f.startContainer,"li",!0);if(k){if(v.isEmptyBlock(k)){j=f.createBookmark();var n=k.parentNode;k!==n.lastChild?v.breakParent(k,n):(n.parentNode.insertBefore(k,n.nextSibling),v.isEmptyNode(n)&&v.remove(n));if(!r.$list[k.parentNode.tagName])if(!v.isBlockElm(k.firstChild)){p=a.document.createElement("p"),k.parentNode.insertBefore(p,k);while(k.firstChild)p.appendChild(k.firstChild);v.remove(k)}else v.remove(k,!0);f.moveToBookmark(j).select()}else{var o=k.firstChild;if(!o||!v.isBlockElm(o)){var p=a.document.createElement("p");!k.firstChild&&v.fillNode(a.document,p);while(k.firstChild)p.appendChild(k.firstChild);k.appendChild(p),o=p}var q=a.document.createElement("span");f.insertNode(q),v.breakParent(q,k);var s=q.nextSibling;o=s.firstChild,o||(p=a.document.createElement("p"),v.fillNode(a.document,p),s.appendChild(p),o=p),v.isEmptyNode(o)&&(o.innerHTML="",v.fillNode(a.document,o)),f.setStart(o,0).collapse(!0).shrinkBoundary().select(),v.remove(q),l=s.previousSibling,l&&v.isEmptyBlock(l)&&(l.innerHTML="<p></p>",v.fillNode(a.document,l.firstChild))}d()}}}if(e==8){f=a.selection.getRange();if(f.collapsed&&v.isStartInblock(f)){i=f.cloneRange().trimBoundary(),k=v.findParentByTagName(f.startContainer,"li",!0);if(k&&v.isStartInblock(i)){if(k&&(l=k.previousSibling)){if(e==46&&k.childNodes.length)return;r.$list[l.tagName]&&(l=l.lastChild),a.undoManger&&a.undoManger.save(),o=k.firstChild;if(v.isBlockElm(o))if(v.isEmptyNode(o)){l.appendChild(o),f.setStart(o,0).setCursor(!1,!0);while(k.firstChild)l.appendChild(k.firstChild)}else{g=v.findParentByTagName(f.startContainer,"p",!0);if(g&&g!==o)return;q=a.document.createElement("span"),f.insertNode(q),v.isEmptyBlock(l)&&(l.innerHTML=""),v.moveChild(k,l),f.setStartBefore(q).collapse(!0).select(!0),v.remove(q)}else if(v.isEmptyNode(k)){var p=a.document.createElement("p");l.appendChild(p),f.setStart(p,0).setCursor()}else{f.setEnd(l,l.childNodes.length).collapse().select(!0);while(k.firstChild)l.appendChild(k.firstChild)}v.remove(k),a.undoManger&&a.undoManger.save(),v.preventDefault(c);return}if(k&&!k.previousSibling){o=k.firstChild;if(!o||k.lastChild===o&&v.isEmptyNode(v.isBlockElm(o)?o:k)){var p=a.document.createElement("p");k.parentNode.parentNode.insertBefore(p,k.parentNode),v.fillNode(a.document,p),f.setStart(p,0).setCursor(),v.remove(k.nextSibling?k:k.parentNode),a.undoManger&&a.undoManger.save(),v.preventDefault(c);return}}}}}}),a.commands.insertorderedlist=a.commands.insertunorderedlist={execCommand:function(a,d){d||(d=a.toLowerCase()=="insertorderedlist"?"decimal":"disc");var e=this,f=this.selection.getRange(),g=function(a){return a.nodeType==1?a.tagName.toLowerCase()!="br":!v.isWhitespace(a)},h=a.toLowerCase()=="insertorderedlist"?"ol":"ul",i=e.document.createDocumentFragment();f.adjustmentBoundary().shrinkBoundary();var j=f.createBookmark(!0),k=v.findParentByTagName(e.document.getElementById(j.start),"li"),l=0,m=v.findParentByTagName(e.document.getElementById(j.end),"li"),n=0,o,p,q,s;if(k||m){k&&(o=k.parentNode),j.end||(m=k),m&&(p=m.parentNode);if(o===p){while(k!==m){s=k,k=k.nextSibling;if(!v.isBlockElm(s.firstChild)){var t=e.document.createElement("p");while(s.firstChild)t.appendChild(s.firstChild);s.appendChild(t)}i.appendChild(s)}s=e.document.createElement("span"),o.insertBefore(s,m);if(!v.isBlockElm(m.firstChild)){t=e.document.createElement("p");while(m.firstChild)t.appendChild(m.firstChild);m.appendChild(t)}i.appendChild(m),v.breakParent(s,o),v.isEmptyNode(s.previousSibling)&&v.remove(s.previousSibling),v.isEmptyNode(s.nextSibling)&&v.remove(s.nextSibling);var u=v.getComputedStyle(o,"list-style-type")||(a.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(o.tagName.toLowerCase()==h&&u==d){for(var w=0,x,y=e.document.createDocumentFragment();x=i.childNodes[w++];)while(x.firstChild)y.appendChild(x.firstChild);s.parentNode.insertBefore(y,s)}else q=e.document.createElement(h),v.setStyle(q,"list-style-type",d),q.appendChild(i),s.parentNode.insertBefore(q,s);v.remove(s),q&&c(q,h,d),f.moveToBookmark(j).select();return}if(k){while(k){s=k.nextSibling;var z=e.document.createDocumentFragment(),A=0;while(k.firstChild)v.isBlockElm(k.firstChild)&&(A=1),z.appendChild(k.firstChild);if(!A){var B=e.document.createElement("p");B.appendChild(z),i.appendChild(B)}else i.appendChild(z);v.remove(k),k=s}o.parentNode.insertBefore(i,o.nextSibling),v.isEmptyNode(o)?(f.setStartBefore(o),v.remove(o)):f.setStartAfter(o),l=1}if(m){k=p.firstChild;while(k!==m){s=k.nextSibling,z=e.document.createDocumentFragment(),A=0;while(k.firstChild)v.isBlockElm(k.firstChild)&&(A=1),z.appendChild(k.firstChild);A?i.appendChild(z):(B=e.document.createElement("p"),B.appendChild(z),i.appendChild(B)),v.remove(k),k=s}i.appendChild(m.firstChild),v.remove(m),p.parentNode.insertBefore(i,p),f.setEndBefore(p),v.isEmptyNode(p)&&v.remove(p),n=1}}l||f.setStartBefore(e.document.getElementById(j.start)),j.end&&!n&&f.setEndAfter(e.document.getElementById(j.end)),f.enlarge(!0,function(a){return b[a.tagName]}),i=e.document.createDocumentFragment();var C=f.createBookmark(),D=v.getNextDomNode(C.start,!1,g),E=f.cloneRange(),F,G=v.isBlockElm;while(D&&D!==C.end&&v.getPosition(D,C.end)&v.POSITION_PRECEDING)if(D.nodeType==3||r.li[D.tagName]){if(D.nodeType==1&&r.$list[D.tagName]){while(D.firstChild)i.appendChild(D.firstChild);F=v.getNextDomNode(D,!1,g),v.remove(D),D=F;continue}F=D,E.setStartBefore(D);while(D&&D!==C.end&&(!G(D)||v.isBookmarkNode(D)))F=D,D=v.getNextDomNode(D,!1,null,function(a){return!b[a.tagName]});D&&G(D)&&(s=v.getNextDomNode(F,!1,g),s&&v.isBookmarkNode(s)&&(D=v.getNextDomNode(s,!1,g),F=s)),E.setEndAfter(F),D=v.getNextDomNode(F,!1,g);var H=f.document.createElement("li");H.appendChild(E.extractContents()),i.appendChild(H)}else D=v.getNextDomNode(D,!0,g);f.moveToBookmark(C).collapse(!0),q=e.document.createElement(h),v.setStyle(q,"list-style-type",d),q.appendChild(i),f.insertNode(q),c(q,h,d),f.moveToBookmark(j).select()},queryCommandState:function(a){return this.highlight?-1:o.findNode(this.selection.getStartElementPath(),[a.toLowerCase()=="insertorderedlist"?"ol":"ul"])?1:0},queryCommandValue:function(a){var b=o.findNode(this.selection.getStartElementPath(),[a.toLowerCase()=="insertorderedlist"?"ol":"ul"]);return b?v.getComputedStyle(b,"list-style-type"):null}}},function(){function a(a){var b=a.startContainer,c=a.endContainer;(b=v.findParentByTagName(b,"a",!0))&&a.setStartBefore(b),(c=v.findParentByTagName(c,"a",!0))&&a.setEndAfter(c)}function b(b,c){a(b=b.adjustmentBoundary());var d=b.startContainer;d.nodeType==1&&(d=d.childNodes[b.startOffset],d&&d.nodeType==1&&d.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(d[j.ie?"innerText":"textContent"])&&(d[j.ie?"innerText":"textContent"]=o.html(c.textValue||c.href))),b.removeInlineStyle("a");if(b.collapsed){var e=b.document.createElement("a"),f="";c.textValue?(f=o.html(c.textValue),delete c.textValue):f=o.html(c.href),v.setAttributes(e,c),b.insertNode(e),e[j.ie?"innerText":"textContent"]=f,b.selectNode(e)}else b.applyInlineStyle("a",c)}UE.commands.unlink={execCommand:function(){var b,c=new i.Range(this.document),d=this.currentSelectedArr,e;if(d&&d.length>0){for(var f=0,g;g=d[f++];){b=v.getElementsByTagName(g,"a");for(var h=0,j;j=b[h++];)v.remove(j,!0)}v.isEmptyNode(d[0])?c.setStart(d[0],0).setCursor():c.selectNodeContents(d[0]).select()}else{c=this.selection.getRange();if(c.collapsed&&!v.findParentByTagName(c.startContainer,"a",!0))return;e=c.createBookmark(),a(c),c.removeInlineStyle("a").moveToBookmark(e).select()}},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={queryCommandState:function(){var a=v.findParentByTagName(this.selection.getStart(),"a",!0),b=a?1:0;return this.highlight?-1:b},execCommand:function(a,c){var d=new i.Range(this.document),e=this.currentSelectedArr;c.data_ue_src&&(c.data_ue_src=o.unhtml(c.data_ue_src,/[<">]/g)),c.href&&(c.href=o.unhtml(c.href,/[<">]/g)),c.textValue&&(c.textValue=o.unhtml(c.textValue,/[<">]/g));if(e&&e.length){for(var f=0,g;g=e[f++];)v.isEmptyNode(g)&&(g[j.ie?"innerText":"textContent"]=o.html(c.textValue||c.href)),b(d.selectNodeContents(g),c);d.selectNodeContents(e[0]).select()}else b(d=this.selection.getRange(),c),d.collapse().select(!0)},queryCommandValue:function(){var a=new i.Range(this.document),b=this.currentSelectedArr,c,d;if(b&&b.length)for(var e=0,f;f=b[e++];){c=f.getElementsByTagName("a");if(c[0])return c[0]}else{a=this.selection.getRange();if(!a.collapsed){a.shrinkBoundary();var g=a.startContainer.nodeType==3||!a.startContainer.childNodes[a.startOffset]?a.startContainer:a.startContainer.childNodes[a.startOffset],h=a.endContainer.nodeType==3||a.endOffset==0?a.endContainer:a.endContainer.childNodes[a.endOffset-1],j=a.getCommonAncestor();d=v.findParentByTagName(j,"a",!0);if(!d&&j.nodeType==1){var c=j.getElementsByTagName("a"),k,l;for(var e=0,m;m=c[e++];){k=v.getPosition(m,g),l=v.getPosition(m,h);if((k&v.POSITION_FOLLOWING||k&v.POSITION_CONTAINS)&&(l&v.POSITION_PRECEDING||l&v.POSITION_CONTAINS)){d=m;break}}}return d}d=this.selection.getStart();if(d&&(d=v.findParentByTagName(d,"a",!0)))return d}}}}(),UE.commands.imagefloat={execCommand:function(a,b){var c=this,d=c.selection.getRange();if(!d.collapsed){var e=d.getClosedNode();if(e&&e.tagName=="IMG")switch(b){case"left":case"right":case"none":var f=e.parentNode,g,h,i;while(r.$inline[f.tagName]||f.tagName=="A")f=f.parentNode;g=f;if(g.tagName=="P"&&v.getStyle(g,"text-align")=="center"){if(!v.isBody(g)&&v.getChildCount(g,function(a){return!v.isBr(a)&&!v.isWhitespace(a)})==1){h=g.previousSibling,i=g.nextSibling;if(h&&i&&h.nodeType==1&&i.nodeType==1&&h.tagName==i.tagName&&v.isBlockElm(h)){h.appendChild(g.firstChild);while(i.firstChild)h.appendChild(i.firstChild);v.remove(g),v.remove(i)}else v.setStyle(g,"text-align","")}d.selectNode(e).select()}v.setStyle(e,"float",b);break;case"center":if(c.queryCommandValue("imagefloat")!="center"){f=e.parentNode,v.setStyle(e,"float","none"),g=e;while(f&&v.getChildCount(f,function(a){return!v.isBr(a)&&!v.isWhitespace(a)})==1&&(r.$inline[f.tagName]||f.tagName=="A"))g=f,f=f.parentNode;d.setStartBefore(g).setCursor(!1),f=c.document.createElement("div"),f.appendChild(g),v.setStyle(g,"float",""),c.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+f.innerHTML+"</p>"),g=c.document.getElementById("_img_parent_tmp"),g.removeAttribute("id"),g=g.firstChild,d.selectNode(g).select(),i=g.parentNode.nextSibling,i&&v.isEmptyNode(i)&&v.remove(i)}}}},queryCommandValue:function(){var a=this.selection.getRange(),b,c;return a.collapsed?"none":(b=a.getClosedNode(),b&&b.nodeType==1&&b.tagName=="IMG"?(c=v.getComputedStyle(b,"float"),c=="none"&&(c=v.getComputedStyle(b.parentNode,"text-align")=="center"?"center":c),{left:1,right:1,center:1}[c]?c:"none"):"none")},queryCommandState:function(){if(this.highlight)return-1;var a=this.selection.getRange(),b;return a.collapsed?-1:(b=a.getClosedNode(),b&&b.nodeType==1&&b.tagName=="IMG"?0:-1)}},UE.commands.insertimage={execCommand:function(a,b){b=o.isArray(b)?b:[b];if(!b.length)return;var c=this,d=c.selection.getRange(),e=d.getClosedNode();if(e&&/img/i.test(e.tagName)&&e.className!="edui-faked-video"&&!e.getAttribute("word_img")){var f=b.shift(),g=f.floatStyle;delete f.floatStyle,v.setAttributes(e,f),c.execCommand("imagefloat",g),b.length>0&&(d.setStartAfter(e).setCursor(!1,!0),c.execCommand("insertimage",b))}else{var h=[],i="",j=b[0],k=450,l=parseInt(j.height*450/j.width);for(var m=0;j=b[m++];)i="<p "+(j["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+j.src+'" '+(j.width?'width="'+j.width+'" ':"")+(j.data_ue_src?' data_ue_src="'+j.data_ue_src+'" ':"")+(j.height?' height="'+j.height+'" ':"")+' style="'+(j.floatStyle&&j["floatStyle"]!="center"?"float:"+j.floatStyle+";":"")+(j.border||"")+'" '+(j.title?' title="'+j.title+'"':"")+" /></p>",h.push(i);c.execCommand("insertHtml",h.join(""))}},queryCommandState:function(){var a=this.selection.getRange().getClosedNode(),b=a&&a.className=="edui-image";return this.highlight?-1:b?1:0}},UE.plugins.video=function(){function c(b,c,d,e,f,g){return f?'<embed type="application/x-shockwave-flash" class="edui-faked-video" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+b+'" width="'+c+'" height="'+d+'" align="'+e+'"'+(e!="none"?' style= "'+(e=="center"?"display:block;":" float: "+e)+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':(g?"<p "+(e!="none"?e=="center"?' style="text-align:center;" ':' style="float:"'+e:"")+">":"")+'<img align="'+e+'" width="'+c+'" height="'+d+'" data-src="'+b+'" _url="'+b+'" title="'+b+'" class="edui-faked-video"'+' src="'+a.options.UEDITOR_CSSIMAGE_URL+'spacer.gif" style="background:url('+a.options.UEDITOR_CSSIMAGE_URL+'videologo.gif) no-repeat center center; border:1px solid gray;" />'+(g?"</p>":"")}function d(b){var d,e=v.getElementsByTagName(a.document,b?"img":"embed");for(var f=0,g;g=e[f++];){if(g.className!="edui-faked-video")continue;d=a.document.createElement("div");var h=g.style.cssFloat;d.innerHTML=c(b?g.getAttribute("_url"):g.getAttribute("src"),g.width,g.height,h||g.getAttribute("align"),b),g.parentNode.replaceChild(d.firstChild,g)}}var a=this,b;a.addListener("beforegetcontent",function(){d(!0)}),a.addListener("aftersetcontent",function(){d(!1)}),a.addListener("aftergetcontent",function(b){if(b=="aftergetcontent"&&a.queryCommandState("source"))return;d(!1)}),a.commands.insertvideo={execCommand:function(b,d){d=o.isArray(d)?d:[d];var e=[];for(var f=0,g,h=d.length;f<h;f++)g=d[f],e.push(c(g.url,g.width||420,g.height||280,g.align||"none",!1,!0));a.execCommand("inserthtml",e.join(""))},queryCommandState:function(){var b=a.selection.getRange().getClosedNode(),c=b&&b.className=="edui-faked-video";return this.highlight?-1:c?1:0}}},UE.plugins.blockindent=function(){function b(a){return v.filterNodeList(a.selection.getStartElementPath(),"dl")}var a=this;a.commands.blockindent={execCommand:function(a,c){var d=this.selection.getRange(),e=b(this),f=r.blockindent,g=d.createBookmark();if(e){var h=d.startContainer,i=v.isBlockElm(h)?h:v.findParent(h,function(a){return v.isBlockElm(a)}),j=d.endContainer,k=v.isBlockElm(j)?j:v.findParent(j,function(a){return v.isBlockElm(a)});i=v.findParentByTagName(i,"li",!0)||i,k=v.findParentByTagName(k,"li",!0)||k,i.tagName=="LI"||i.tagName=="TD"||i===e?v.remove(e,!0):v.breakParent(i,e),i!==k&&(e=v.findParentByTagName(k,"dl"),e&&(k.tagName=="LI"||k.tagName=="TD"?v.remove(e,!0):v.breakParent(k,e)));var l=v.getElementsByTagName(this.document,"dl");for(var m=0,n;n=l[m++];)n.childNodes.length?v.getPosition(n,i)&v.POSITION_FOLLOWING&&v.getPosition(n,k)&v.POSITION_PRECEDING&&v.remove(n,!0):v.remove(n)}else{var o=d.cloneRange(),p=o.startContainer.nodeType==1?o.startContainer:o.startContainer.parentNode,q=p,s=1;for(;;){if(v.isBody(p)){q!==p?d.collapsed?(o.selectNode(q),s=0):o.setStartBefore(q):o.setStart(p,0);break}if(!f[p.tagName]){d.collapsed?o.selectNode(q):o.setStartBefore(q);break}q=p,p=p.parentNode}if(s){q=p=p=o.endContainer.nodeType==1?o.endContainer:o.endContainer.parentNode;for(;;){if(v.isBody(p)){q!==p?o.setEndAfter(q):o.setEnd(p,p.childNodes.length);break}if(!f[p.tagName]){o.setEndAfter(q);break}q=p,p=p.parentNode}}p=d.document.createElement("dl"),v.setAttributes(p,c),p.appendChild(o.extractContents()),o.insertNode(p);var t=v.getElementsByTagName(p,"dl");for(var m=0,u;u=t[m++];)u.parentNode&&v.remove(u,!0)}d.moveToBookmark(g).select()},queryCommandState:function(){return b(this)?1:0}}},UE.plugins.removeformat=function(){var a=this;a.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var,a",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),a.commands.removeformat={execCommand:function(a,b,c,d,e){function o(a){if(a.nodeType==3||a.tagName.toLowerCase()!="span")return 0;if(j.ie){var b=a.attributes;if(b.length){for(var c=0,d=b.length;c<d;c++)if(b[c].specified)return 0;return 1}}return!a.attributes.length}function p(a){var b=a.createBookmark();a.collapsed&&a.enlarge(!0);if(!e){var d=v.findParentByTagName(a.startContainer,"a",!0);d&&a.setStartBefore(d),d=v.findParentByTagName(a.endContainer,"a",!0),d&&a.setEndAfter(d)}k=a.createBookmark(),l=k.start;while((m=l.parentNode)&&!v.isBlockElm(m))v.breakParent(l,m),v.clearEmptySibling(l);if(k.end){l=k.end;while((m=l.parentNode)&&!v.isBlockElm(m))v.breakParent(l,m),v.clearEmptySibling(l);var h=v.getNextDomNode(k.start,!1,n),i;while(h){if(h==k.end)break;i=v.getNextDomNode(h,!0,n),!r.$empty[h.tagName.toLowerCase()]&&!v.isBookmarkNode(h)&&(f.test(h.tagName)?c?(v.removeStyle(h,c),o(h)&&c!="text-decoration"&&v.remove(h,!0)):v.remove(h,!0):!r.$tableContent[h.tagName]&&!r.$list[h.tagName]&&(v.removeAttributes(h,g),o(h)&&v.remove(h,!0))),h=i}}var j=k.start.parentNode;v.isBlockElm(j)&&!r.$tableContent[j.tagName]&&!r.$list[j.tagName]&&v.removeAttributes(j,g),j=k.end.parentNode,k.end&&v.isBlockElm(j)&&!r.$tableContent[j.tagName]&&!r.$list[j.tagName]&&v.removeAttributes(j,g),a.moveToBookmark(k).moveToBookmark(b);var l=a.startContainer,p,q=a.collapsed;while(l.nodeType==1&&v.isEmptyNode(l)&&r.$removeEmpty[l.tagName])p=l.parentNode,a.setStartBefore(l),a.startContainer===a.endContainer&&a.endOffset--,v.remove(l),l=p;if(!q){l=a.endContainer;while(l.nodeType==1&&v.isEmptyNode(l)&&r.$removeEmpty[l.tagName])p=l.parentNode,a.setEndBefore(l),v.remove(l),l=p}}var f=new RegExp("^(?:"+(b||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),g=c?[]:(d||this.options.removeFormatAttributes).split(","),h=new i.Range(this.document),k,l,m,n=function(a){return a.nodeType==1};h=this.selection.getRange(),p(h),h.select()}}},UE.plugins.blockquote=function(){function b(a){return v.filterNodeList(a.selection.getStartElementPath(),"blockquote")}var a=this;a.commands.blockquote={execCommand:function(a,c){var d=this.selection.getRange(),e=b(this),f=r.blockquote,g=d.createBookmark();if(e){var h=d.startContainer,i=v.isBlockElm(h)?h:v.findParent(h,function(a){return v.isBlockElm(a)}),j=d.endContainer,k=v.isBlockElm(j)?j:v.findParent(j,function(a){return v.isBlockElm(a)});i=v.findParentByTagName(i,"li",!0)||i,k=v.findParentByTagName(k,"li",!0)||k,i.tagName=="LI"||i.tagName=="TD"||i===e?v.remove(e,!0):v.breakParent(i,e),i!==k&&(e=v.findParentByTagName(k,"blockquote"),e&&(k.tagName=="LI"||k.tagName=="TD"?v.remove(e,!0):v.breakParent(k,e)));var l=v.getElementsByTagName(this.document,"blockquote");for(var m=0,n;n=l[m++];)n.childNodes.length?v.getPosition(n,i)&v.POSITION_FOLLOWING&&v.getPosition(n,k)&v.POSITION_PRECEDING&&v.remove(n,!0):v.remove(n)}else{var o=d.cloneRange(),p=o.startContainer.nodeType==1?o.startContainer:o.startContainer.parentNode,q=p,s=1;for(;;){if(v.isBody(p)){q!==p?d.collapsed?(o.selectNode(q),s=0):o.setStartBefore(q):o.setStart(p,0);break}if(!f[p.tagName]){d.collapsed?o.selectNode(q):o.setStartBefore(q);break}q=p,p=p.parentNode}if(s){q=p=p=o.endContainer.nodeType==1?o.endContainer:o.endContainer.parentNode;for(;;){if(v.isBody(p)){q!==p?o.setEndAfter(q):o.setEnd(p,p.childNodes.length);break}if(!f[p.tagName]){o.setEndAfter(q);break}q=p,p=p.parentNode}}p=d.document.createElement("blockquote"),v.setAttributes(p,c),p.appendChild(o.extractContents()),o.insertNode(p);var t=v.getElementsByTagName(p,"blockquote");for(var m=0,u;u=t[m++];)u.parentNode&&v.remove(u,!0)}d.moveToBookmark(g).select()},queryCommandState:function(){return b(this)?1:0}}},UE.plugins.insertmathjax=function(){function c(a,c){return'<img data-code="'+a+'" src="'+c+'" class="'+b+'"/>'}var a=this,b="edui-faked-insertmathjax";a.commands.insertmathjax={execCommand:function(b,d){var e=c(d.text,d.url);a.execCommand("inserthtml",e);var f=a.selection.getRange(),g=f.startContainer;f.selectNode(g).setCursor(!0)},queryCommandState:function(){var c=a.selection.getRange().getClosedNode(),d=c&&c.className==b;return this.highlight?-1:d?1:0}}},UE.plugins.insertcode=function(){function b(a,b){return"<pre>"+a+"</pre>"}var a=this;a.commands.insertcode={execCommand:function(c,d){var e=b(d.text);a.execCommand("inserthtml",e);var f=a.selection.getRange(),g=f.startContainer;f.selectNode(g).setCursor(!0)},queryCommandState:function(){var b=a.selection.getRange().getClosedNode(),c=b&&b.className==mathclass;return this.highlight?-1:c?1:0}}},UE.plugins.autoheight=function(){function h(){clearTimeout(g),g=setTimeout(function(){a.queryCommandState("source")!=1&&(c||(c=a.document.createElement("span"),c.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;",c.innerHTML="."),d=c.cloneNode(!0),a.body.appendChild(d),f=Math.max(v.getXY(d).y+d.offsetHeight,a.options.minFrameHeight),f!=e&&(a.setHeight(f),e=f),v.remove(d))},50)}var a=this;a.autoHeightEnabled=a.options.autoHeightEnabled!==!1;if(!a.autoHeightEnabled)return;var b,c,d,e=0,f,g;a.addListener("destroy",function(){a.removeListener("contentchange",h),a.removeListener("keyup",h),a.removeListener("mouseup",h)}),a.enableAutoHeight=function(){if(!a.autoHeightEnabled)return;var c=a.document;a.autoHeightEnabled=!0,b=c.body.style.overflowY,c.body.style.overflowY="hidden",a.addListener("contentchange",h),a.addListener("keyup",h),a.addListener("mouseup",h),setTimeout(function(){h()},j.gecko?100:0),a.fireEvent("autoheightchanged",a.autoHeightEnabled)},a.disableAutoHeight=function(){a.body.style.overflowY=b||"",a.removeListener("contentchange",h),a.removeListener("keyup",h),a.removeListener("mouseup",h),a.autoHeightEnabled=!1,a.fireEvent("autoheightchanged",a.autoHeightEnabled)},a.addListener("ready",function(){a.enableAutoHeight();var b;v.on(j.ie?a.body:a.document,j.webkit?"dragover":"drop",function(){clearTimeout(b),b=setTimeout(function(){h()},100)})})},UE.plugins.autofloat=function(){function h(a){return a.ui?1:(alert(b.autofloatMsg),0)}function i(){var a=document.body.style;a.backgroundImage='url("about:blank")',a.backgroundAttachment="fixed"}function r(){var b=/^www\.(\w*?\.)?guokr\.com(:15000)?$/.test(location.host),c=v.getXY(m),e=v.getComputedStyle(m,"position"),h=v.getComputedStyle(m,"left");m.style.width=m.offsetWidth+"px",m.style.zIndex=a.options.zIndex*1+1,m.parentNode.insertBefore(l,m),f||g&&j.ie?(m.style.position!="absolute"&&(m.style.position="absolute"),b?m.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-n+d+43+"px":m.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-n+d+"px"):(j.ie7Compat&&q&&(q=!1,m.style.left=v.getXY(m).x-document.documentElement.getBoundingClientRect().left+2+"px"),m.style.position!="fixed"&&(m.style.position="fixed",b?m.style.top=d+43+"px":m.style.top=d+"px",(e=="absolute"||e=="relative")&&parseFloat(h)&&(m.style.left=c.x+"px")))}function s(){q=!0,l.parentNode&&l.parentNode.removeChild(l),m.style.cssText=k}function t(){var b=p(a.container);/^www\.(\w*?\.)?guokr\.com(:15000)?$/.test(location.host)?b.top<43&&b.bottom-m.offsetHeight>0?r():s():b.top<0&&b.bottom-m.offsetHeight>0?r():s()}var a=this,b=a.getLang();a.setOpt({topOffset:0});var c=a.options.autoFloatEnabled!==!1,d=a.options.topOffset;if(!c)return;var e=UE.ui.uiUtils,f=j.ie&&j.version<=6,g=j.quirks,k,l=document.createElement("div"),m,n,p,q=!0,u=o.defer(function(){t()},j.ie?200:100,!0);a.addListener("destroy",function(){v.un(window,["scroll","resize"],t),a.removeListener("keydown",u)}),a.addListener("ready",function(){h(a)&&(p=e.getClientRect,m=a.ui.getDom("toolbarbox"),n=p(m).top,k=m.style.cssText,l.style.height=m.offsetHeight+"px",f&&i(),a.addListener("autoheightchanged",function(b,c){c?(v.on(window,["scroll","resize"],t),a.addListener("keydown",u)):(v.un(window,["scroll","resize"],t),a.removeListener("keydown",u))}),a.addListener("beforefullscreenchange",function(a,b){b&&s()}),a.addListener("fullscreenchanged",function(a,b){b||t()}),a.addListener("sourcemodechanged",function(a,b){setTimeout(function(){t()},0)}))})},UE.plugins.autolink=function(){var a=0;if(j.ie)return;var b=this;b.addListener("reset",function(){a=0}),b.addListener("keydown",function(a,c){var d=c.keyCode||c.which;if(d==32||d==13){var e=b.selection.getNative(),f=e.getRangeAt(0).cloneRange(),g,h,i=f.startContainer;if(i.parentNode.nodeName.toLowerCase()==="a")return!1;while(i.nodeType==1&&f.startOffset>0){i=f.startContainer.childNodes[f.startOffset-1];if(!i)break;f.setStart(i,i.nodeType==1?i.childNodes.length:i.nodeValue.length),f.collapse(!0),i=f.startContainer}do{if(f.startOffset==0){i=f.startContainer.previousSibling;while(i&&i.nodeType==1)i=i.lastChild;if(!i||v.isFillChar(i))break;g=i.nodeValue.length}else i=f.startContainer,g=f.startOffset;f.setStart(i,g-1),h=f.toString().charCodeAt(0)}while(h!=160&&h!=32);if(f.toString().replace(new RegExp(v.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(f.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(f.toString()))break;try{f.setStart(f.startContainer,f.startOffset+1)}catch(j){var i=f.startContainer;while(!(next=i.nextSibling)){if(v.isBody(i))return;i=i.parentNode}f.setStart(next,0)}}var k=b.document.createElement("a"),l=b.document.createTextNode(" "),m;b.undoManger&&b.undoManger.save(),k.appendChild(f.extractContents()),k.href=k.innerHTML=k.innerHTML.replace(/<[^>]+>/g,""),m=k.getAttribute("href").replace(new RegExp(v.fillChar,"g"),""),m=/^(?:https?:\/\/)/ig.test(m)?m:"http://"+m,k.setAttribute("data_ue_src",m),k.href=m,f.insertNode(k),k.parentNode.insertBefore(l,k.nextSibling),f.setStart(l,0),f.collapse(!0),e.removeAllRanges(),e.addRange(f),b.undoManger&&b.undoManger.save()}}})},UE.commands.autosubmit={execCommand:function(){var a=this,b=a.options.autoSubmitCallBack;if(b){if(a.fireEvent("beforesubmit")===!1)return;a.sync(),b()}}},UE.plugins.undo=function(){function f(a){var b=this;b.collapsed=a.collapsed,b.startAddr=g(a.startContainer,a.startOffset),b.endAddr=a.collapsed?b.startAddr:g(a.endContainer,a.endOffset)}function g(a,b){for(var c=0,d=[b],e,f=v.findParents(a,!0,function(a){return!v.isBody(a)},!0);e=f[c++];){if(c==1&&e.nodeType==3){var g=e;while(g=g.previousSibling)if(g.nodeType==3)b+=g.nodeValue.replace(w,"").length;else break;d[0]=b}d.push(v.getNodeIndex(e,!0))}return d.reverse()}function h(a,b){if(a.length!=b.length)return 0;for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return 0;return 1}function k(a,b,c){e=a.document.body;for(var d=0,e,f=c.length-1;d<f;d++)e=e.childNodes[c[d]];a[b+"Container"]=e,a[b+"Offset"]=c[c.length-1]}function l(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){var a=this.getScene(),b=this.list[this.index];b.content.replace(e,"")!=a.content.replace(e,"")&&this.save();if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var b=this.list[this.index];a.document.body.innerHTML=b.bookcontent.replace(d,"");if(j.ie)for(var c=0,e,f=a.document.getElementsByTagName("p");e=f[c++];)e.innerHTML==""&&v.fillNode(a.document,e);var g=new i.Range(a.document);try{j.opera||j.safari?b.senceRange.transformRange(g):g.moveToBookmark({start:"_baidu_bookmark_start_",end:"_baidu_bookmark_end_",id:!0}),j.ie&&j.version==9&&g.collapsed&&v.isBlockElm(g.startContainer)&&v.isEmptyNode(g.startContainer)&&v.fillNode(g.document,g.startContainer),g.select(!j.gecko),!j.opera&&!j.safari&&setTimeout(function(){g.scrollToView(a.autoHeightEnabled,a.autoHeightEnabled?v.getXY(a.iframe).y:0)},200)}catch(h){}this.update();if(a.currentSelectedArr){a.currentSelectedArr=[];var k=a.document.getElementsByTagName("td");for(var c=0,l;l=k[c++];)l.className==a.options.selectedTdClass&&a.currentSelectedArr.push(l)}this.clearKey(),a.fireEvent("reset",!0)},this.getScene=function(){var b=a.selection.getRange(),c=a.body.innerHTML.replace(d,"");b.shrinkBoundary(),j.ie&&(c=c.replace(/>&nbsp;</g,"><").replace(/\s*</g,"").replace(/>\s*/g,">"));if(j.opera||j.safari||j.chrome)return{senceRange:new f(b),content:c,bookcontent:c};var e=b.createBookmark(!0,!0),g=a.body.innerHTML.replace(d,"");return e&&b.moveToBookmark(e).select(!0),{bookcontent:g,content:c}},this.save=function(){var a=this.getScene(),c=this.list[this.index];if(c&&c.content==a.content&&(j.opera||j.safari?c.senceRange.compare(a.senceRange):c.bookcontent==a.bookcontent))return;this.list=this.list.slice(0,this.index+1),this.list.push(a),this.list.length>b&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=this.list[this.index+1]?!0:!1,this.hasUndo=this.list[this.index-1]||this.list.length==1?!0:!1},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){o=0,p=null,a.fireEvent("contentchange")}}function m(){this.undoManger.save()}var a=this,b=a.options.maxUndoCount||20,c=a.options.maxInputCount||20,d=new RegExp(v.fillChar+"|</hr>","gi"),e=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={compare:function(b){return a.collapsed!==b.collapsed?0:!h(a.startAddr,b.startAddr)||!h(a.endAddr,b.endAddr)?0:1},transformRange:function(a){var b=this;a.collapsed=b.collapsed,k(a,"start",b.startAddr),a.collapsed?a.collapse(!0):k(a,"end",b.endAddr)}},a.undoManger=new l,a.addListener("beforeexeccommand",m),a.addListener("afterexeccommand",m),a.addListener("reset",function(b,c){c||a.undoManger.reset()}),a.commands.redo=a.commands.undo={execCommand:function(b){a.undoManger[b]()},queryCommandState:function(b){return a.undoManger["has"+(b.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var n={16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},o=0,p;a.addListener("keydown",function(b,d){var e=d.keyCode||d.which;if(!n[e]&&!d.ctrlKey&&!d.metaKey&&!d.shiftKey&&!d.altKey){if(a.undoManger.list.length==0||(e==8||e==46)&&p!=e){a.undoManger.save(!0),p=e;return}a.undoManger.list.length==2&&a.undoManger.index==0&&o==0&&(a.undoManger.list.splice(1,1),a.undoManger.update()),p=e,o++,o>=c&&a.selection.getRange().collapsed&&a.undoManger.save()}})},UE.plugins.selectall=function(){var a=this;a.commands.selectall={execCommand:function(){var a=this,b=a.body,c=a.selection.getRange();c.selectNodeContents(b),v.isEmptyBlock(b)&&(j.opera&&b.firstChild&&b.firstChild.nodeType==1&&c.setStartAtFirst(b.firstChild),c.collapse(!0)),c.select(!0),this.selectAll=!0},notNeedUndo:1},a.addListener("ready",function(){v.on(a.document,"click",function(b){a.selectAll=!1})})},UE.plugins.serialize=function(){function c(a){return/pt/.test(a)?a.replace(/([\d.]+)pt/g,function(a){return Math.round(parseFloat(a)*96/72)+"px"}):a}function s(a,b){var c=[0,10,12,16,18,24,32,48],f,g=o.indexOf;switch(a.tag){case"script":a.tag="div",a.attributes._ue_div_script=1,a.attributes._ue_script_data=a.children[0]?encodeURIComponent(a.children[0].data):"",a.attributes._ue_custom_node_=1,a.children=[];break;case"style":a.tag="div",a.attributes._ue_div_style=1,a.attributes._ue_style_data=a.children[0]?encodeURIComponent(a.children[0].data):"",a.attributes._ue_custom_node_=1,a.children=[];break;case"img":if(a.attributes.src&&/^data:/.test(a.attributes.src))return{type:"fragment",children:[]};if(a.attributes.src&&/^(?:file)/.test(a.attributes.src)){if(!/(gif|bmp|png|jpg|jpeg)$/.test(a.attributes.src))return{type:"fragment",children:[]};a.attributes.word_img=a.attributes.src,a.attributes.src=d.options.UEDITOR_CSSIMAGE_URL+"spacer.gif";var h=parseInt(a.attributes.width)<128||parseInt(a.attributes.height)<43;a.attributes.style="background:url("+(h?d.options.UEDITOR_CSSIMAGE_URL+"word.gif":d.options.langPath+d.options.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd",b&&(b.flag=1)}j.ie&&j.version<7&&(a.attributes.orgSrc=a.attributes.src),a.attributes.data_ue_src=a.attributes.data_ue_src||a.attributes.src;break;case"li":var i=a.children[0];if(!i||i.type!="element"||i.tag!="p"&&r.p[i.tag]){var k={type:"element",tag:"p",attributes:{},parent:a};k.children=i?a.children:[j.ie?{type:"text",data:v.fillChar,parent:k}:{type:"element",tag:"br",attributes:{},closed:!0,children:[],parent:k}],a.children=[k]}break;case"table":case"td":t(a);break;case"a":a.attributes.anchorname&&(a.tag="img",a.attributes={"class":"anchorclass",anchorname:a.attributes.name},a.closed=1),a.attributes.href&&(a.attributes.data_ue_src=a.attributes.href);break;case"b":a.tag=a.name="strong";break;case"i":a.tag=a.name="em";break;case"u":a.tag=a.name="span",a.attributes.style=(a.attributes.style||"")+";text-decoration:underline;";break;case"s":case"del":a.tag=a.name="span",a.attributes.style=(a.attributes.style||"")+";text-decoration:line-through;",a.children.length==1&&(i=a.children[0],i.tag==a.tag&&(a.attributes.style+=";"+i.attributes.style,a.children=i.children));break;case"span":var l=a.attributes.style;l&&(!a.attributes.style||j.webkit&&l=="white-space:nowrap;")&&delete a.attributes.style;if(j.gecko&&j.version<=10902&&a.parent){var m=a.parent;m.tag=="span"&&m.attributes&&m.attributes.style&&(a.attributes.style=m.attributes.style+";"+a.attributes.style)}o.isEmptyObject(a.attributes)&&e&&(a.type="fragment");break;case"font":a.tag=a.name="span",f=a.attributes,a.attributes={style:(f.size?"font-size:"+(c[f.size]||12)+"px":"")+";"+(f.color?"color:"+f.color:"")+";"+(f.face?"font-family:"+f.face:"")+";"+(f.style||"")};while(a.parent.tag==a.tag&&a.parent.children.length==1)a.attributes.style&&(a.parent.attributes.style?a.parent.attributes.style+=";"+a.attributes.style:a.parent.attributes.style=a.attributes.style),a.parent.children=a.children,a=a.parent;break;case"p":a.attributes.align&&(a.attributes.style=(a.attributes.style||"")+";text-align:"+a.attributes.align+";",delete a.attributes.align)}return a}function t(b){if(a&&b.attributes.style){var c=b.attributes.style;b.attributes.style=c.replace(/;\s*/g,";"),b.attributes.style=b.attributes.style.replace(/^\s*|\s*$/,"")}}function u(b){switch(b.tag){case"div":b.attributes._ue_div_script&&(b.tag="script",b.children=[{type:"cdata",data:b.attributes._ue_script_data?decodeURIComponent(b.attributes._ue_script_data):"",parent:b}],delete b.attributes._ue_div_script,delete b.attributes._ue_script_data,delete b.attributes._ue_custom_node_),b.attributes._ue_div_style&&(b.tag="style",b.children=[{type:"cdata",data:b.attributes._ue_style_data?decodeURIComponent(b.attributes._ue_style_data):"",parent:b}],delete b.attributes._ue_div_style,delete b.attributes._ue_style_data,delete b.attributes._ue_custom_node_);break;case"table":!b.attributes.style&&delete b.attributes.style,a&&b.attributes.style&&t(b),b.attributes["class"]=="noBorderTable"&&delete b.attributes["class"];break;case"td":case"th":if(/display\s*:\s*none/i.test(b.attributes.style))return{type:"fragment",children:[]};if(a&&!b.children.length){var c={type:"text",data:v.fillChar,parent:b};b.children[0]=c}a&&b.attributes.style&&t(b),b.attributes["class"]=="selectTdClass"&&delete b.attributes["class"];break;case"img":b.attributes.anchorname?(b.tag="a",b.attributes={name:b.attributes.anchorname,anchorname:1},b.closed=null):b.attributes.data_ue_src&&(b.attributes.src=b.attributes.data_ue_src,delete b.attributes.data_ue_src);break;case"a":b.attributes.data_ue_src&&(b.attributes.href=b.attributes.data_ue_src,delete b.attributes.data_ue_src)}return b}function w(a,b,c){if(!a.children||!a.children.length)return a;var d=a.children;for(var e=0;e<d.length;e++){var f=b(d[e],c);if(f.type=="fragment"){var g=[e,1];g.push.apply(g,f.children),d.splice.apply(d,g),d.length||(a={type:"fragment",children:[]}),e--}else d[e]=f}return a}function x(a){this.rules=a}var a=j.ie,b=j.version,d=this,e=d.options.autoClearEmptyNode,f=r.$empty,g=function(){function j(f,h){var i,j=0,k,l;c.exec("");while(i=c.exec(f)){var m=i.index;if(m>j){var n=f.slice(j,m);l?l.push(n):h.onText(n)}j=c.lastIndex;if(k=i[1]){k=k.toLowerCase(),l&&k==l._tag_name&&(h.onCDATA(l.join("")),l=null);if(!l){h.onTagClose(k);continue}}if(l){l.push(i[0]);continue}if(k=i[3]){if(/="/.test(k))continue;k=k.toLowerCase();var o=i[4],p,q={},r=o&&o.slice(-1)=="/";if(o){d.exec("");while(p=d.exec(o)){var s=p[1].toLowerCase(),t=p[2]||p[3]||p[4]||"";!t&&e[s]&&(t=s),s=="style"&&a&&b<=6&&(t=t.replace(/(?!;)\s*([\w-]+):/g,function(a,b){return b.toLowerCase()+":"})),t&&(q[s]=t.replace(/:\s*/g,":"))}}h.onTagOpen(k,q,r),!l&&g[k]&&(l=[],l._tag_name=k);continue}(k=i[2])&&h.onComment(k)}f.length>j&&h.onText(f.slice(j,f.length))}var c=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,d=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},g={script:1,style:1},h={li:{$:"ul",ul:1,ol:1},dd:{$:"dl",dl:1},dt:{$:"dl",dl:1},option:{$:"select",select:1},td:{$:"tr",tr:1},th:{$:"tr",tr:1},tr:{$:"tbody",tbody:1,thead:1,tfoot:1,table:1},tbody:{$:"table",table:1,colgroup:1},thead:{$:"table",table:1},tfoot:{$:"table",table:1},col:{$:"colgroup",colgroup:1}},i={table:"td",tbody:"td",thead:"td",tfoot:"td",tr:"td",colgroup:"col",ul:"li",ol:"li",dl:"dd",select:"option"};return function(a,b){function e(a){a.parent=d,d.children.push(a)}function g(a,c){var e=a;if(h[e.tag]){while(h[d.tag]&&h[d.tag][e.tag])d=d.parent;d.tag==e.tag&&(d=d.parent);while(h[e.tag]){if(h[e.tag][d.tag])break;e=e.parent={type:"element",tag:h[e.tag].$,attributes:{},children:[e]}}}if(b)while(r[e.tag]&&!(d.tag=="span"?o.extend(r.strong,{a:1,A:1}):r[d.tag]||r.div)[e.tag]){if(k(d))continue;if(!d.parent)break;d=d.parent}return e.parent=d,d.children.push(e),c&&(d=a),a.attributes.style&&(a.attributes.style=a.attributes.style.toLowerCase()),a}function k(a){var b;return!a.children.length&&(b=i[a.tag])?(g({type:"element",tag:b,attributes:{},children:[]},!0),!0):!1}var c={type:"fragment",parent:null,children:[]},d=c;j(a,{onText:function(a){while(!(r[d.tag]||r.div)["#"]){if(k(d))continue;d=d.parent}e({type:"text",data:a})},onComment:function(a){e({type:"comment",data:a})},onCDATA:function(a){while(!(r[d.tag]||r.div)["#"]){if(k(d))continue;d=d.parent}e({type:"cdata",data:a})},onTagOpen:function(a,b,c){c=c||f[a],g({type:"element",tag:a,attributes:b,closed:c,children:[]},!c)},onTagClose:function(a){var b=d;while(b&&a!=b.tag)b=b.parent;if(b){for(var c=d;c!==b.parent;c=c.parent)k(c);d=b.parent}else!r.$removeEmpty[a]&&!r.$removeEmptyBlock[a]&&a!="embed"&&(b={type:"element",tag:a,attributes:{},children:[]},g(b,!0),k(b),d=b.parent)}});while(d!==c)k(d),d=d.parent;return c}}(),h=function(){function b(b){return a[b]}var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(a){return a+="",a?a.replace(/[<>"']/g,b):""}}(),i=function(){function a(a,b){var c=a.children,d=[];for(var e=0,f;f=c[e];e++)d.push(i(f,b));return d.join("")}function b(a){var b=[];for(var c in a){var d=a[c];c=="style"&&(a[c]=""),b.push(c+'="'+h(a[c])+'"')}return b.join(" ")}function c(a,b){return b?a.data.replace(/&nbsp;/g," "):h(a.data).replace(/ /g,"&nbsp;")}function g(c,g){if(c.type=="element"&&!c.children.length&&r.$removeEmpty[c.tag]&&c.tag!="a"&&o.isEmptyObject(c.attributes)&&e)return k;var h=c.tag;if(g&&h=="td")k||(k=""),k+=a(c,g)+"&nbsp;&nbsp;&nbsp;";else{var i=b(c.attributes),k="<"+(g&&d[h]?d[h]:h)+(i?" "+i:"")+(f[h]?" />":">");f[h]||(h=="p"&&!c.children.length&&(k+=j.ie?"&nbsp;":"<br/>"),k+=a(c,g),k+="</"+(g&&d[h]?d[h]:h)+">")}return k}var d={div:"p",li:"p",tr:"p",br:"br",p:"p"};return function(b,d){return b.type=="fragment"?a(b,d):b.type=="element"?g(b,d):b.type=="text"||b.type=="cdata"?c(b,r.$notTransContent[b.parent.tag]):b.type=="comment"?"<!--"+b.data+"-->":""}}(),k=function(){function a(a){var b=new RegExp(/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig);return b.test(a)}function b(a){return a=a.replace(/([\d.]+)([\w]+)?/g,function(a,b,c){return(Math.round(parseFloat(b))||1)+(c||"px")}),a}function d(a){return a=a.replace(/<!--\s*EndFragment\s*-->[\s\S]*$/,"").replace(/^(\r\n|\n|\r)|(\r\n|\n|\r)$/ig,"").replace(/^\s*(&nbsp;)+/ig,"").replace(/(&nbsp;|<br[^>]*>)+\s*$/ig,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(j.opera)return"";try{var b=a.match(/width:([ \d.]*p[tx])/i)[1],d=a.match(/height:([ \d.]*p[tx])/i)[1],e=a.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+c(b)+'" height="'+c(d)+'" src="'+e+'" />'}catch(f){return""}}).replace(/v:\w+=["']?[^'"]+["']?/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/(lang)\s*=\s*([\'\"]?)[\w-]+\2/ig,"").replace(/<font[^>]*>\s*<\/font>/gi,"").replace(/class\s*=\s*["']?(?:(?:MsoTableGrid)|(?:MsoListParagraph)|(?:MsoNormal(Table)?))\s*["']?/gi,""),a=a.replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,c,d,e){var f=[],g=0,h=e.replace(/^\s+|\s+$/,"").replace(/&quot;/gi,"'").split(/;\s*/g);for(var g=0;g<h.length;g++){var i=h[g],j,k,l=i.split(":");if(l.length==2){j=l[0].toLowerCase(),k=l[1].toLowerCase();switch(j){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(c)||(f[g]=j.replace(/^mso-|-alt$/g,"")+":"+b(k));continue;case"horiz-align":f[g]="text-align:"+k;continue;case"vert-align":f[g]="vertical-align:"+k;continue;case"font-color":case"mso-foreground":f[g]="color:"+k;continue;case"mso-background":case"mso-highlight":f[g]="background:"+k;continue;case"mso-default-height":f[g]="min-height:"+b(k);continue;case"mso-default-width":f[g]="min-width:"+b(k);continue;case"mso-padding-between-alt":f[g]="border-collapse:separate;border-spacing:"+b(k);continue;case"text-line-through":if(k=="single"||k=="double")f[g]="text-decoration:line-through";continue;case"mso-zero-height":k=="yes"&&(f[g]="display:none");continue;case"margin":if(!/[1-9]/.test(l[1]))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(j))continue;if(/text\-indent|padding|margin/.test(j)&&/\-[\d.]+/.test(k))continue;f[g]=j+":"+l[1]}}return g>0?c+' style="'+f.join(";")+'"':c}),a=a.replace(/([ ]+)<\/span>/ig,function(a,b){return(new Array(b.length+1)).join("&nbsp;")+"</span>"}),a}return function(b){return m=null,n="",p="",q="",a(b)&&(b=d(b)),b.replace(/>[ \t\r\n]*</g,"><")}}(),l={text:"#text",comment:"#comment",cdata:"#cdata-section",fragment:"#document-fragment"},m,n="",p="",q;x.prototype={rules:null,filter:function(a,b,c){function f(a,b){a.name=a.type=="element"?a.tag:l[a.type];if(b==null)return w(a,f,a);if(e&&e[a.name])return c&&(c.flag=1),{type:"fragment",children:[]};if(d&&a.type=="element")if(b.type=="fragment"?d[a.name]:d[a.name]&&d[b.name][a.name]){var g;if(g=d[a.name].$){var h=a.attributes,i={};for(var j in g)h[j]&&(i[j]=h[j]);a.attributes=i}}else c&&(c.flag=1),a.type="fragment",a.name=b.name;return(e||d)&&w(a,f,a),a}b=b||this.rules;var d=b&&b.whiteList,e=b&&b.blackList;return f(a,null)},transformInput:function(a,b){function c(a){return a=s(a,b),a=w(a,c,a),d.options.pageBreakTag&&a.type=="text"&&a.data.replace(/\s/g,"")==d.options.pageBreakTag&&(a.type="element",a.name=a.tag="hr",delete a.data,a.attributes={"class":"pagebreak",noshade:"noshade",size:"5",unselectable:"on",style:"moz-user-select:none;-khtml-user-select: none;"},a.children=[]),a.type=="text"&&!r.$notTransContent[a.parent.tag]&&(a.data=a.data.replace(/[\r\t\n]*/g,"")),a}return c(a)},transformOutput:function(a){function b(a){a.tag=="hr"&&a.attributes["class"]=="pagebreak"&&(delete a.tag,a.type="text",a.data=d.options.pageBreakTag,delete a.children),a=u(a);if(a.tag=="ol"||a.tag=="ul")m=1;a=w(a,b,a);if(a.tag=="ol"||a.tag=="ul")m=0;return a}return b(a)},toHTML:i,parseHTML:g,word:k},d.serialize=new x(d.options.serialize||{}),UE.serialize=new x({})},function(){function a(a){var b=this.document;if(b.getElementById("baidu_pastebin"))return;var c=this.selection.getRange(),d=c.createBookmark(),e=b.createElement("div");e.id="baidu_pastebin",j.webkit&&e.appendChild(b.createTextNode(v.fillChar+v.fillChar)),b.body.appendChild(e),d.start.style.display="",e.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+v.getXY(d.start).y+"px",c.selectNodeContents(e).select(!0),setTimeout(function(){if(j.webkit)for(var f=0,g=b.querySelectorAll("#baidu_pastebin"),h;h=g[f++];)if(v.isEmptyNode(h))v.remove(h);else{e=h;break}try{e.parentNode.removeChild(e)}catch(i){}c.moveToBookmark(d).select(!0),a(e)},0)}UE.plugins.paste=function(){function f(a){var f;if(a.firstChild){var g=v.getElementsByTagName(a,"span");for(var h=0,i;i=g[h++];)(i.id=="_baidu_cut_start"||i.id=="_baidu_cut_end")&&v.remove(i);if(j.webkit){var k=a.querySelectorAll("div br");for(var h=0,l;l=k[h++];){var m=l.parentNode;m.tagName=="DIV"&&m.childNodes.length==1&&(m.innerHTML="<p><br/></p>",v.remove(m))}var n=a.querySelectorAll("#baidu_pastebin");for(var h=0,o;o=n[h++];){var p=b.document.createElement("p");o.parentNode.insertBefore(p,o);while(o.firstChild)p.appendChild(o.firstChild);v.remove(o)}var q=a.querySelectorAll("meta");for(var h=0,r;r=q[h++];)v.remove(r);var k=a.querySelectorAll("br");for(h=0;r=k[h++];)/^apple-/.test(r)&&v.remove(r)}if(j.gecko){var s=a.querySelectorAll("[_moz_dirty]");for(h=0;r=s[h++];)r.removeAttribute("_moz_dirty")}if(!j.ie){var t=a.querySelectorAll("span.apple-style-span");for(var h=0,r;r=t[h++];)v.remove(r,!0)}f=a.innerHTML;var u=b.serialize;if(u)try{var w=u.transformInput(u.parseHTML(u.word(f)),c);w=u.filter(w,d?{whiteList:{p:{br:1,BR:1,$:{}},br:{$:{}},div:{br:1,BR:1,$:{}},li:{$:{}},tr:{td:1,$:{}},td:{$:{}}},blackList:{style:1,script:1,object:1}}:null,d?null:e);if(j.webkit){var x=w.children.length,y;while((y=w.children[x-1])&&y.tag=="br")w.children.splice(x-1,1),x=w.children.length}f=u.toHTML(w,d)}catch(z){}f={html:f},b.fireEvent("beforepaste",f),b.execCommand("insertHtml",f.html,!0),b.fireEvent("afterpaste")}}var b=this,c={flag:""},d=b.options.pasteplain===!0,e={flag:""};b.commands.pasteplain={queryCommandState:function(){return d},execCommand:function(){d=!d|0},notNeedUndo:1},b.addListener("ready",function(){v.on(b.body,"cut",function(){var a=b.selection.getRange();!a.collapsed&&b.undoManger&&b.undoManger.save()}),v.on(b.body,j.ie||j.opera?"keydown":"paste",function(c){if(!j.ie&&!j.opera||!!c.ctrlKey&&c.keyCode=="86")a.call(b,function(a){f(a)});else return})})}}(),UE.plugins.fiximgclick=function(){var a=this;j.webkit&&a.addListener("click",function(b,c){if(c.target.tagName=="IMG"){var d=new i.Range(a.document);d.selectNode(c.target).select()}})},UE.plugins.enterkey=function(){var a,b=this,c=b.options.enterTag;b.addListener("keyup",function(c,d){var e=d.keyCode||d.which;if(e==13){var f=b.selection.getRange(),g=f.startContainer,h;if(!j.ie){if(/h\d/i.test(a)){if(j.gecko){var i=v.findParentByTagName(g,["h1","h2","h3","h4","h5","h6","blockquote"],!0);i||(b.document.execCommand("formatBlock",!1,"<p>"),h=1)}else if(g.nodeType==1){var k=b.document.createTextNode(""),l;f.insertNode(k),l=v.findParentByTagName(k,"div",!0);if(l){var m=b.document.createElement("p");while(l.firstChild)m.appendChild(l.firstChild);l.parentNode.insertBefore(m,l),v.remove(l),f.setStartBefore(k).setCursor(),h=1}v.remove(k)}b.undoManger&&h&&b.undoManger.save()}j.opera&&f.select()}setTimeout(function(){b.selection.getRange().scrollToView(b.autoHeightEnabled,b.autoHeightEnabled?v.getXY(b.iframe).y:0)},50)}}),b.addListener("keydown",function(d,e){var f=e.keyCode||e.which;if(f==13){b.undoManger&&b.undoManger.save(),a="";var g=b.selection.getRange();if(!g.collapsed){var h=g.startContainer,i=g.endContainer,k=v.findParentByTagName(h,"td",!0),l=v.findParentByTagName(i,"td",!0);if(k&&l&&k!==l||!k&&l||k&&!l){e.preventDefault?e.preventDefault():e.returnValue=!1;return}}b.currentSelectedArr&&v.clearSelectedArr(b.currentSelectedArr);if(c=="p")j.ie||(h=v.findParentByTagName(g.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote"],!0),!h&&!j.opera?(b.document.execCommand("formatBlock",!1,"<p>"),j.gecko&&(g=b.selection.getRange(),h=v.findParentByTagName(g.startContainer,"p",!0),h&&v.removeDirtyAttr(h))):(a=h.tagName,h.tagName.toLowerCase()=="p"&&j.gecko&&v.removeDirtyAttr(h)));else{e.preventDefault?e.preventDefault():e.returnValue=!1;if(!g.collapsed){g.deleteContents(),h=g.startContainer;if(h.nodeType==1&&(h=h.childNodes[g.startOffset])){while(h.nodeType==1){if(r.$empty[h.tagName])return g.setStartBefore(h).setCursor(),b.undoManger&&b.undoManger.save(),!1;if(!h.firstChild){var m=g.document.createElement("br");return h.appendChild(m),g.setStart(h,0).setCursor(),b.undoManger&&b.undoManger.save(),!1}h=h.firstChild}h===g.startContainer.childNodes[g.startOffset]?(m=g.document.createElement("br"),g.insertNode(m).setCursor()):g.setStart(h,0).setCursor()}else m=g.document.createElement("br"),g.insertNode(m).setStartAfter(m).setCursor()}else{m=g.document.createElement("br"),g.insertNode(m);var n=m.parentNode;n.lastChild===m?(m.parentNode.insertBefore(m.cloneNode(!0),m),g.setStartBefore(m)):g.setStartAfter(m),g.setCursor()}}}})},UE.commands["delete"]={execCommand:function(){var a=this.selection.getRange(),b=0,c=0,d=this;if(this.selectAll){d.body.innerHTML="<p>"+(j.ie?"&nbsp;":"<br/>")+"</p>",a.setStart(d.body.firstChild,0).setCursor(!1,!0),d.selectAll=!1;return}if(d.currentSelectedArr&&d.currentSelectedArr.length>0){for(var e=0,f;f=d.currentSelectedArr[e++];)f.style.display!="none"&&(f.innerHTML=j.ie?v.fillChar:"<br/>");a.setStart(d.currentSelectedArr[0],0).setCursor();return}if(a.collapsed)return;a.txtToElmBoundary();while(!a.startOffset&&!v.isBody(a.startContainer)&&!r.$tableContent[a.startContainer.tagName])b=1,a.setStartBefore(a.startContainer);while(a.endContainer.nodeType!=3&&!v.isBody(a.endContainer)&&!r.$tableContent[a.endContainer.tagName]){var g,h=a.endContainer,i=a.endOffset;g=h.childNodes[i];if(!g||v.isBr(g)&&h.lastChild===g){a.setEndAfter(h);continue}break}if(b){var k=d.document.createElement("span");k.innerHTML="start",k.id="_baidu_cut_start",a.insertNode(k).setStartBefore(k)}if(c){var l=d.document.createElement("span");l.innerHTML="end",l.id="_baidu_cut_end",a.cloneRange().collapse(!1).insertNode(l),a.setEndAfter(l)}a.deleteContents(),v.isBody(a.startContainer)&&v.isEmptyBlock(d.body)?(d.body.innerHTML="<p>"+(j.ie?"":"<br/>")+"</p>",a.setStart(d.body.firstChild,0).collapse(!0)):!j.ie&&v.isEmptyBlock(a.startContainer)&&(a.startContainer.innerHTML="<br/>"),a.select(!0)},queryCommandState:function(){return this.currentSelectedArr&&this.currentSelectedArr.length>0?0:this.highlight||this.selection.getRange().collapsed?-1:0}},UE.commands.inserthtml={execCommand:function(a,b,c){var d=this,e,f,g=d.currentSelectedArr;e=d.selection.getRange(),f=e.document.createElement("div"),f.style.display="inline";var h=d.serialize;if(!c&&h){var i=h.parseHTML(b);i=h.transformInput(i),i=h.filter(i),b=h.toHTML(i)}f.innerHTML=o.trim(b);try{d.adjustTable&&d.adjustTable(f)}catch(k){}if(g&&g.length){for(var l=0,m;m=g[l++];)m.className="";g[0].innerHTML="",e.setStart(g[0],0).collapse(!0),d.currentSelectedArr=[]}if(!e.collapsed){e.deleteContents();if(e.startContainer.nodeType==1){var n=e.startContainer.childNodes[e.startOffset],p;if(n&&v.isBlockElm(n)&&(p=n.previousSibling)&&v.isBlockElm(p)){e.setEnd(p,p.childNodes.length).collapse();while(n.firstChild)p.appendChild(n.firstChild);v.remove(n)}}}var n,q,p,s,t=0;while(n=f.firstChild){e.insertNode(n);if(!t&&n.nodeType==v.NODE_ELEMENT&&v.isBlockElm(n)){q=v.findParent(n,function(a){return v.isBlockElm(a)});if(q&&q.tagName.toLowerCase()!="body"&&(!r[q.tagName][n.nodeName]||n.parentNode!==q)){if(!r[q.tagName][n.nodeName])p=q;else{s=n.parentNode;while(s!==q)p=s,s=s.parentNode}v.breakParent(n,p||s);var p=n.previousSibling;v.trimWhiteTextNode(p),p.childNodes.length||v.remove(p),!j.ie&&(u=n.nextSibling)&&v.isBlockElm(u)&&u.lastChild&&!v.isBr(u.lastChild)&&u.appendChild(d.document.createElement("br")),t=1}}var u=n.nextSibling;if(!f.firstChild&&u&&v.isBlockElm(u)){e.setStart(u,0).collapse(!0);break}e.setEndAfter(n).collapse()}n=e.startContainer,v.isBlockElm(n)&&v.isEmptyNode(n)&&(n.innerHTML=j.ie?"":"<br/>"),e.select(!0),setTimeout(function(){e=d.selection.getRange(),e.scrollToView(d.autoHeightEnabled,d.autoHeightEnabled?v.getXY(d.iframe).y:0)},200)}},UE.plugins.at=function(){var a=this,b="@",c=j.ie&&j.version<=6;a.addListener("keyup",function(a,e){function m(a){if(!c){var b=this.document.createTextNode(a);j.parentNode.insertBefore(b,j)}else j.innerHTML=a+" ";f.setEndAtLast(j).select(),f.removeInlineStyle("span").collapse(!1).select(),UE.dom.domUtils.remove(j)}function n(){f.setCursor(!0),UE.dom.domUtils.remove(j),f.collapse(!1).select()}if(e.keyCode===8)return;var f=this.selection.getRange(),g=f.startOffset,h=f.startContainer.nodeValue||"",i=h.slice(g-1,g),j,k={},l={};i===b&&(j=this.document.createElement("span"),f.insertNode(j),j.innerHTML="&nbsp;",l=UE.dom.domUtils.getXY(j),k=$(this.container).offset(),l.top=l.y+k.top+$(this.container).children().eq(0).outerHeight(),l.left=l.x+k.left,this.ui.isFullScreen()&&(l.top-=$(this.document).scrollTop()),d(l,m,n,$(this.body)),setTimeout(function(){window.focus(),$(".gui-at").css({position:"absolute",zIndex:1e3}).find("input").focus()}))})},UE.plugins.shortcutkeys=function(){var a=this,b={"ctrl+66":"Bold","ctrl+90":"Undo","ctrl+89":"Redo","ctrl+73":"Italic","ctrl+shift+67":"removeformat","ctrl+65":"selectAll","ctrl+13":"autosubmit"};a.addListener("keydown",function(c,d){var e=d.keyCode||d.which,f;for(var g in b)if(/^(ctrl)(\+shift)?\+(\d+)$/.test(g.toLowerCase())||/^(\d+)$/.test(g))if((RegExp.$1=="ctrl"?d.ctrlKey||d.metaKey||j.opera&&e==17:0)&&(RegExp.$2!=""?d[RegExp.$2.slice(1)+"Key"]:1)&&e==RegExp.$3||e==RegExp.$1)f=b[g].split(":"),a.execCommand(f[0],f[1]),v.preventDefault(d)})},UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",blockindent:"缩进",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",mergecells:"合并多个单元格",deletetable:"删除表格",insertparagraphbeforetable:"表格前插行",cleardoc:"清空文档",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",insertimage:"图片",inserttable:"表格",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",highlightcode:"插入代码",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittd:"单元格",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",insertmathjax:"插入公式",insertcode:"插入代码"},insertorderedlist:{decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 小圆圈",disc:"● 小圆点",square:"■ 小方块 "},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">The number of characters has been exceeded maximum allowable values, the server may refuse to save!</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",edittd:"单元格属性",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",deletetable:"删除表格",insertparagraphbeforetable:"表格前插入行",deleterow:"删除行",deletecol:"删除列",insertrow:"插入行",insertcol:"插入列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",copy:"复制(Ctrl + c)",copymsg:"请使用 'Ctrl + c'执行复制操作",paste:"粘贴(Ctrl + v)",pastemsg:"请使用'Ctrl + v'执行复制操作"},anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"本地图片",lang_background_set:"选项",lang_background_none:"无",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"远程图片",lang_tab_local:"本地上传",lang_tab_imgManager:"在线管理",lang_tab_imgSearch:"图片搜索",lang_input_url:"地 址：",lang_input_width:"宽 度：",lang_input_height:"高 度：",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_remoteAlign:"对 齐：",lang_imgLoading:"　图片加载中……",lock:{title:"锁定宽高比例"},imgType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},imgSearchTxt:{value:"请输入搜索关键词"},imgSearchBtn:{value:"百度一下"},imgSearchReset:{value:"清空搜索"},upload:{style:"background: url(upload.png);"},duiqi:{style:"background: url(imglabel.png) -12px 2px no-repeat;"}},netError:"网络链接错误，请检查配置后重试！",noUploadImage:"当前未上传过任何图片！",imageLoading:"图片加载中，请稍后……",tryAgain:" :( ，抱歉，没有找到图片！请重试一次！",toggleSelect:"单击可切换选中状态\n原图尺寸: ",searchInitInfo:"请输入搜索关键词",numError:"请输入正确的长度或者宽度值！例如：123，400",fileType:"图片",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",flashError:"Flash插件初始化失败，请更新您的FlashPlayer版本之后重试！",floatDefault:"默认",floatLeft:"左浮动",floatRight:"右浮动",floatCenter:"居中",flashI18n:{}},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至editor_config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},attachment:{"static":{lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"}},browseFiles:"文件浏览…",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型错误！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……"},highlightcode:{"static":{lang_input_selectLang:"选择语言"},importCode:"请输入代码"},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_version:"版本:1.2.3",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_removeFormat:"清除页面文字格式",lang_Txt_leftJustification:"页面文字居左显示",lang_Txt_rightJustification:"页面文字居右显示",lang_Txt_visualEnter:"软回车"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二不，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"}},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动","default":"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！"},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",zyzf:"注音及其他"},inserttable:{"static":{lang_baseInfo:"基础信息",lang_rows:"行数",lang_rowUnit:"行",lang_width:"宽度",lang_widthUnit:"px",lang_height:"高度",lang_heightUnit:"px",lang_cols:"列数",lang_colUnit:"列",lang_warmPrompt:"温馨提示",lang_maxPadding:"边距最大不能超过13px! ",lang_extendInfo:"扩展信息",lang_preview:"可预览",lang_tableBorder:"表格边框",lang_borderSize:"大小",lang_borderColor:"颜色",lang_mar_pad:"边距间距",lang_margin:"边距",lang_padding:"间距",lang_table_background:"表格的背景颜色",lang_table_alignment:"表格的对齐方式",lang_borderFor:"边框设置作用于",align:{options:["默认","居中","居左","居右"]},borderType:{options:["仅表格","所有单元格"]},lang_forPreview:"这是用来预览的"},errorNum:"请输入正确的数值，如124,358",errorColor:"请输入正确的颜色值，如#34abdd，red",clearColor:"清除颜色",overflowMsg:"最大值不能超过{#value}px!",overflowPreviewMsg:"超过{#value} px时将不再提供实时预览。"},edittd:{"static":{lang_background:"背景颜色",lang_alignment:"对齐方式",lang_horizontal:"水平",lang_vertical:"垂直",vAlign:{options:["默认","居中对齐","顶端对齐","底部对齐"]},align:{options:["默认","居中对齐","左对齐","右对齐"]}},clearColor:"清除颜色"},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}}},UE.ui.Editor}),G.def("./setting/messageContentPage",["validate","ValidateUtils","../lib/UEditor"],function(a,b,c){return"use strict",{login:function(){function e(a,b){$.ajax({url:"/apis/community/user/message.json",data:{message_id:a},type:"DELETE",dataType:"json",success:function(a){a&&a.ok&&b&&b()}})}function f(){$(".gform-submit")[0].click()}var a={msg:"内容",vcode:"验证码",serverError:"服务器正在休息，请刷新之后过一会再试！",globalError:'<div class="tip_box">{v}</div>',errors:{vcode:"{desc}是4个字母或数字"}},b,c=$("#vcode").length?{msg:{_desc:a.msg,maxlength:300},vcode:{_desc:a.vcode,vcode:1,required:1}}:{msg:{_desc:a.msg,maxlength:300}},d=$('<img class="form-loading" width="16" height="16" src="/skin/imgs/loading.gif"/>');$("#msg").doOnce(function(){b=new UE.ui.Editor({toolbars:[["Bold","Italic","|","InsertImage","InsertVideo","Link","insertMathJax","|","blockquote","InsertUnorderedList","InsertOrderedList","|","removeformat","FullScreen"]],initialStyle:"h1,h2,h3,h4,h5,h6,h1 strong,h2 strong,h3 strong,h4 strong,h5 strong,h6 strong{font-size:12px;font-weight:normal;}"}),b.setOpt("autoSubmitCallBack",f),b.render("msg"),b.ready(function(){b.setHeight(200)})}),$("#newMessage").submit(function(){var a=b.getContentTxt(),c=b.getContent();if(!c.length)return alert("站内信的内容不能为空！"),!1;if(a.length>300)return alert("站内信的内容不能超过300字！"),!1;if($("#captcha").length&&$("#captcha").attr("type")==="text"&&!$.trim($("#captcha").val()))return alert("验证码不能为空"),!1}),$("#captchaImage").doOnce(function(){function e(b){b.preventDefault(),a.attr("src",c+"?v="+d++)}var a=$("#captchaImage"),b=$("#changeCaptchaImage"),c=a.attr("src"),d=1;b.click(e),a.click(e)}),$("#msgList").doOnce(function(){this.delegate("li","hover",function(a){a.type==="mouseenter"?$(this).find("a[data-operation]").show():$(this).find("a[data-operation]").hide()}).delegate("a[data-operation]","click",function(a){a.preventDefault();var b=$(this),c=b.data("id"),d=b.parents(".pt-txt").find("a").eq(0).text();if(!confirm("你确定要删除吗？删除后将不能恢复"))return;e(c,function(){b.parents("li").fadeOut()})})}),$("#msgList .main-message-content p a").attr("target","_blank");var g=$("#submitTip");$(".gform-submit").hover(function(){g.show()},function(){g.hide()}),$(".begin-letter").size()&&$(".begin-letter").click(function(){$(this).hide().next().show()})}}}),G.def("./setting/messageNewPage",["at","validate","ValidateUtils","../lib/UEditor"],function(a,b,c,d){return"use strict",{login:function(){function j(){$(".gform-submit")[0].click()}var d={addressee:"昵称",msg:"内容",vcode:"验证码",serverError:"服务器正在休息，请刷新之后过一会再试！",globalError:'<div class="tip_box">{v}</div>',errors:{addressee:'仅限中英文、数字、"."、"-"及"_"',nickname:"昵称不存在",vcode:"{desc}是4个字母或数字"}},e=function(a){alert(a)},f={_desc:d.addressee,required:1,isNickname:1,async:{url:"/apis/community/user.json?retrieve_type=by_nickname",type:"get",param:"nickname",msg:d.errors.nickname,success:function(a){return a.ok&&Object.keys(a.result).length},error:function(){e(d.serverError)},dataType:"json"}},g=$("#vcode").length?{addressee:f,msg:{_desc:d.msg,maxlength:300},vcode:{_desc:d.vcode,vcode:1,required:1}}:{addressee:f,msg:{_desc:d.msg,maxlength:300}},h=$('<img class="form-loading" width="16" height="16" src="/skin/imgs/loading.gif"/>'),i;i=new UE.ui.Editor({toolbars:[["Bold","Italic","|","InsertImage","InsertVideo","Link","insertMathJax","|","blockquote","InsertUnorderedList","InsertOrderedList","|","removeformat","FullScreen"]],initialStyle:"h1,h2,h3,h4,h5,h6,h1 strong,h2 strong,h3 strong,h4 strong,h5 strong,h6 strong{font-size:12px;font-weight:normal;}"}),i.setOpt("autoSubmitCallBack",j),i.render("msg"),i.ready(function(){i.setHeight("200")}),b("#newMessage",null,{msgPlace:function(a){return a.siblings(".tip")},msgClass:{error:"error",success:"ghide"}}).method("isNickname",function(){return c.isNickname(this.val())},d.errors.addressee).method("vcode",function(){return c.isVcode(this.val())},d.errors.vcode).rules(g),$("#newMessage").submit(function(){var a=i.getContentTxt(),b=i.getContent();if(b.length<1)return alert("站内信的内容不能为空."),!1;if(a.length>300)return alert("站内信的内容不能超过300字."),!1;if($("#captcha").length&&$("#captcha").attr("type")==="text"&&!$.trim($("#captcha").val()))return alert("验证码不能为空"),!1}),$("#captchaImage").doOnce(function(){function e(b){b.preventDefault(),a.attr("src",c+"?v="+d++)}var a=$("#captchaImage"),b=$("#changeCaptchaImage"),c=a.attr("src"),d=1;b.click(e),a.click(e)}),$("#addressee").doOnce(function(){function d(a){c.val(a.trim())}function e(){}var b=$(this).offset(),c=$(this);this.focus(function(){a(b,d,e,$("body").not(c),c)})});var k=$("#submitTip");$(".gform-submit").hover(function(){k.show()},function(){k.hide()})}}}),G.def("./setting/draftPage",function(){return"use strict",{deleteDraft:function(a,b){var c=a?{ids:a}:"";$.ajax({url:"/apis/community/draft.json",type:"delete",data:c,success:function(a){a.ok&&b&&b()},dataType:"json"})},login:function(){var a=this;$("#draftList").delegate(".draftDelete","click",function(){if(confirm("确定删除？")){var b=$(this),c=b.attr("data-id");a.deleteDraft(c,function(){b.parents("li").remove()})}}),$("#deleteAll").click(function(){confirm("确定全部删除？")&&a.deleteDraft("",function(){$("#draftList").html("已经全部删除！")})})}}}),G.def("./setting/resetEmailPage",["validate","ValidateUtils"],function(a,b){return"use strict",{login:function(){var c={email:"邮箱",captcha:"验证码",emailError:"邮箱格式错误",serverError:"服务器正在休息，请刷新之后过一会再试！",globalError:'<div class="tip_box">{v}</div>',errors:{email:"这个邮箱已经被人使用了"}},d=$('<img class="form-loading" width="16" height="16" src="imgs/loading.gif" />'),e=function(a){$("#tipbox").html($(c.globalError.replace("{v}",a)))};a("#resetEmail",null,{msgPlace:function(a){return a.siblings(".tip")}}).method("isEmail",function(){return b.isEmail(this.val())},c.emailError).rules({email:{_desc:c.email,required:1,isEmail:1,async:{url:"/apis/auth/email.json?retrieve_type=is_available",param:"email",type:"GET",msg:c.errors.email,success:function(a){return a.result.is_available===!0},error:function(){e(c.serverError)},dataType:"json"}}})},unlogin:function(){},all:function(){}}}),G.def("./setting/succEmailPage",function(){return"use strict",{login:function(){var a=$("#counter"),b=parseInt(a.text()),c=b,d=function(){--c,c>=0&&setTimeout(function(){a.html(c),d()},1e3)};d()},unlogin:function(){},all:function(){}}});if(typeof g_page_name!="undefined"){typeof ukey=="undefined"&&(ukey="");var moduleName=g_page_name.replace(/setting/g,"");moduleName=moduleName.slice(0,1).toLowerCase()+moduleName.slice(1),G.req("./setting/"+moduleName,function(a){"use strict";if(a==null)return;var b=ukey?"login":"unlogin";a[b]&&a[b](ukey),b==="login"&&$.get("/apis/community/weibo_verify/privilege.json",function(a){a.result.has_privilege&&$("#snavWeibo").css("visibility","visible")},"json"),a.all&&a.all()})}